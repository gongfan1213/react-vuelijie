> ğŸ’­ å—¯ï¼Œç”¨æˆ·è®©æˆ‘è¯¦ç»†è®²è§£ä¸€ä¸‹Schemeçš„é€šä¿¡åŸç†ã€‚è¿™ä¸ªé—®é¢˜æœ‰ç‚¹çªç„¶å•Šï¼ŒSchemeæœ¬èº«æ˜¯Lispçš„ä¸€ç§æ–¹è¨€ï¼Œä»¥ç®€æ´å’Œå‡½æ•°å¼ç¼–ç¨‹é—»åï¼Œä½†â€œé€šä¿¡åŸç†â€è¿™ä¸ªè¯è®©æˆ‘æœ‰ç‚¹å›°æƒ‘ã€‚ç”¨æˆ·æ˜¯ä¸æ˜¯æƒ³äº†è§£Schemeåœ¨ç½‘ç»œé€šä¿¡æ–¹é¢çš„æœºåˆ¶ï¼Ÿæˆ–è€…æ˜¯ä¸æ˜¯åœ¨æŸä¸ªç‰¹å®šçš„å®ç°ä¸­ï¼Œæ¯”å¦‚ç”¨Schemeè¿›è¡Œè¿›ç¨‹é—´é€šä¿¡æˆ–è€…ç½‘ç»œåè®®çš„å®ç°ï¼Ÿ
>
> é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®è®¤â€œSchemeçš„é€šä¿¡åŸç†â€åˆ°åº•æŒ‡ä»€ä¹ˆã€‚Schemeä¸»è¦ç”¨äºå­¦æœ¯å’Œæ•™å­¦ç¯å¢ƒï¼Œè™½ç„¶ä¹Ÿæœ‰å®é™…åº”ç”¨ï¼Œä½†ç½‘ç»œé€šä¿¡å¯èƒ½ä¸æ˜¯å®ƒçš„å¼ºé¡¹ã€‚å¯èƒ½çš„è¯¯è§£æ˜¯ä¸æ˜¯ç”¨æˆ·æƒ³äº†è§£æŸç§ç‰¹å®šçš„Schemeå®ç°ä¸­çš„é€šä¿¡æœºåˆ¶ï¼Ÿä¾‹å¦‚ï¼Œç”¨Schemeç¼–å†™WebæœåŠ¡å™¨æˆ–è€…å¤„ç†HTTPè¯·æ±‚ï¼Ÿ
>
> æˆ–è€…ï¼Œç”¨æˆ·å¯èƒ½å°†Schemeä¸æŸç§ç‰¹å®šçš„åè®®æˆ–ç³»ç»Ÿæ··æ·†ï¼Œæ¯”å¦‚RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰æˆ–æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Ÿä¹Ÿæœ‰å¯èƒ½ç”¨æˆ·å®é™…æƒ³äº†è§£çš„æ˜¯ç½‘ç»œåè®®æ ˆä¸­çš„é€šä¿¡åŸç†ï¼Œä½†é”™è¯¯åœ°æåˆ°äº†Schemeï¼Ÿ
>
> è¿™æ—¶å€™ï¼Œæˆ–è®¸åº”è¯¥å…ˆå‡è®¾ç”¨æˆ·æ˜¯æƒ³äº†è§£Schemeè¯­è¨€ä¸­å¦‚ä½•å®ç°é€šä¿¡ï¼Œä¾‹å¦‚è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰æˆ–ç½‘ç»œé€šä¿¡ã€‚ä¾‹å¦‚ï¼Œåœ¨Guile Schemeæˆ–Racketè¿™æ ·çš„å®ç°ä¸­ï¼Œä¼šæœ‰ç›¸å…³çš„åº“æ”¯æŒç½‘ç»œç¼–ç¨‹ã€‚
>
> æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦å›é¡¾ä¸€äº›Schemeå®ç°ä¸­çš„ç½‘ç»œæ¨¡å—ã€‚æ¯”å¦‚ï¼ŒGuileæœ‰ç½‘ç»œå¥—æ¥å­—çš„æ”¯æŒï¼Œå…è®¸åˆ›å»ºTCPæˆ–UDPè¿æ¥ã€‚Racketä¹Ÿæä¾›äº†ä¸°å¯Œçš„ç½‘ç»œåº“ï¼Œå¯èƒ½ç”¨Schemeæˆ–Racketç‰¹å®šçš„è¯­æ³•æ¥å®ç°ã€‚
>
> ç„¶åï¼Œè€ƒè™‘åˆ°ç”¨æˆ·å¯èƒ½éœ€è¦ä¸€ç§åŸºç¡€çš„é€šä¿¡æ¨¡å‹è§£é‡Šï¼Œæ¯”å¦‚å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼ï¼Œä½¿ç”¨Socketç¼–ç¨‹ã€‚è¿™æ—¶å€™å¯èƒ½éœ€è¦è®²è§£å¦‚ä½•åœ¨Schemeä¸­åˆ›å»ºSocketï¼Œè¿›è¡Œç»‘å®šã€ç›‘å¬ã€æ¥å—è¿æ¥ï¼Œå‘é€å’Œæ¥æ”¶æ•°æ®ç­‰æ­¥éª¤ã€‚
>
> åŒæ—¶ï¼Œæˆ‘éœ€è¦æ³¨æ„ç”¨æˆ·å¯èƒ½çš„èƒŒæ™¯ä¿¡æ¯ã€‚å¦‚æœä»–ä»¬å·²ç»çŸ¥é“ä¸€äº›ç½‘ç»œç¼–ç¨‹çš„åŸºç¡€çŸ¥è¯†ï¼Œä½†å¸Œæœ›åœ¨Schemeä¸­åº”ç”¨ï¼Œé‚£ä¹ˆå…·ä½“çš„ä»£ç ç¤ºä¾‹å’Œåº“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ä¼šæ˜¯é‡ç‚¹ã€‚åä¹‹ï¼Œå¦‚æœä»–ä»¬å¯¹æ­¤äº†è§£è¾ƒå°‘ï¼Œå¯èƒ½éœ€è¦å…ˆè§£é‡ŠSocketç¼–ç¨‹çš„åŸºæœ¬æ¦‚å¿µï¼Œå†ç»“åˆSchemeå®ç°ã€‚
>
> å¦å¤–ï¼Œè¦æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–å¯èƒ½çš„è§£é‡Šï¼Œæ¯”å¦‚Schemeè¯­è¨€ä¸å…¶ä»–è¯­è¨€çš„é€šä¿¡ï¼Œä¾‹å¦‚é€šè¿‡FFIï¼ˆå¤–éƒ¨å‡½æ•°æ¥å£ï¼‰è°ƒç”¨Cåº“ï¼Œæˆ–è€…å…¶ä»–IPCæ–¹å¼ï¼Œæ¯”å¦‚ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚è¿™æ—¶å€™éœ€è¦ç¡®å®šç”¨æˆ·çš„å…³æ³¨ç‚¹æ‰€åœ¨ã€‚
>
> å¯èƒ½çš„è¯¯åŒºï¼šç”¨æˆ·å¯èƒ½æŠŠSchemeçš„â€œcontinuationâ€æˆ–åç¨‹æœºåˆ¶ä¸é€šä¿¡åŸç†æ··æ·†ã€‚ä¸è¿‡continuationsæ›´å¤šæ˜¯æ§åˆ¶æµç¨‹è€Œéé€šä¿¡ã€‚ä½†å¦‚æœæ˜¯ç±»ä¼¼Erlangçš„actoræ¨¡å‹çš„æ¶ˆæ¯ä¼ é€’ï¼ŒSchemeä¸­æ˜¯å¦æœ‰ç±»ä¼¼çš„åº“ï¼Ÿéœ€è¦ç¡®è®¤æŸäº›Schemeå®ç°æ˜¯å¦æ”¯æŒè¿™æ ·çš„å¹¶å‘æ¨¡å‹ã€‚
>
> æ¯”å¦‚ï¼Œåœ¨Guileä¸­æ˜¯å¦æ”¯æŒå¤šçº¿ç¨‹ï¼Œçº¿ç¨‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿå¯èƒ½æ¶‰åŠé”ã€äº’æ–¥é‡ï¼Œæˆ–è€…æ¶ˆæ¯ä¼ é€’ã€‚åŒæ ·ï¼ŒRacketæœ‰placesï¼ˆç±»ä¼¼äºçº¿ç¨‹ï¼‰å’Œchannelsç”¨äºé€šä¿¡ã€‚
>
> æ‰€ä»¥ï¼Œç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“Schemeä¸­çš„å¹¶å‘ç¼–ç¨‹ä¸­çš„é€šä¿¡æœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯å¤šçº¿ç¨‹æˆ–åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ¶ˆæ¯ä¼ é€’ã€‚è¿™æ—¶å€™å¯èƒ½éœ€è¦æ·±å…¥è¿™äº›å†…å®¹ã€‚
>
> æ€»ç»“ï¼Œç”¨æˆ·çš„é—®é¢˜å¯èƒ½éœ€è¦åˆ†ä¸¤éƒ¨åˆ†å›ç­”ï¼š
>
> 1. å¦‚æœé—®é¢˜æ˜¯å…³äºç½‘ç»œé€šä¿¡ï¼Œå¦‚ä½•ä½¿ç”¨Schemeè¿›è¡ŒSocketç¼–ç¨‹ï¼Œå®ç°å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚
>
> 2. å¦‚æœæ˜¯å…³äºå¹¶å‘/å¹¶è¡Œç¼–ç¨‹ä¸­çš„é€šä¿¡æœºåˆ¶ï¼Œå¦‚çº¿ç¨‹é—´é€šä¿¡ï¼Œä½¿ç”¨channelæˆ–å…±äº«å†…å­˜ã€‚
>
> ä½†ç”±äºç”¨æˆ·æ˜ç¡®ç”¨äº†â€œé€šä¿¡åŸç†â€ï¼Œå¯èƒ½æ›´åå‘ç½‘ç»œé€šä¿¡ã€‚ä¸è¿‡éœ€è¦æ˜ç¡®è¿™ä¸€ç‚¹ã€‚
>
> æ¥ä¸‹æ¥ï¼Œæ•´ç†èµ„æ–™ï¼šä¾‹å¦‚åœ¨Guile Schemeä¸­ï¼Œå¦‚ä½•ä½¿ç”¨socketæ¥å£ï¼Œå¯èƒ½éœ€è¦æä¾›ä¸€äº›ä»£ç ç¤ºä¾‹ã€‚æ¯”å¦‚åˆ›å»ºTCPæœåŠ¡å™¨ï¼Œæ¥å—è¿æ¥ï¼Œå¤„ç†è¯·æ±‚ç­‰æ­¥éª¤ã€‚
>
> åŒæ—¶ï¼Œè€ƒè™‘åˆ°ç”¨æˆ·å¯èƒ½éœ€è¦äº†è§£åŸºæœ¬åŸç†ï¼Œæ— è®ºè¯­è¨€å¦‚ä½•ï¼Œç„¶åå†çœ‹Schemeä¸­çš„å®ç°ã€‚æ¯”å¦‚IPã€TCPåè®®ã€SocketæŠ½è±¡ç­‰æ¦‚å¿µã€‚
>
> å¯èƒ½è¿˜éœ€è¦æ¯”è¾ƒSchemeå®ç°ç½‘ç»œé€šä¿¡ä¸å…¶ä»–è¯­è¨€ï¼ˆå¦‚Pythonæˆ–Javaï¼‰çš„ä¸åŒä¹‹å¤„ï¼ŒåŸºäºSchemeçš„å‡½æ•°å¼é£æ ¼ï¼Œæ˜¯å¦æœ‰ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚
>
> å¦å¤–ï¼ŒSchemeçš„æŸäº›å®ç°å¯èƒ½æœ‰ä¸åŒçš„æ¨¡å—æˆ–åº“ï¼Œä¾‹å¦‚Racketçš„é«˜çº§ç½‘ç»œåº“ï¼Œä¸Guileçš„åŸºç¡€Socket APIç›¸æ¯”ï¼Œå¯èƒ½æ›´æŠ½è±¡æˆ–æ›´æ˜“ç”¨ã€‚éœ€è¦æåŠè¿™äº›å·®å¼‚å—ï¼Ÿ
>
> å¦å¤–ï¼Œæ˜¯å¦è¦è¦†ç›–å¼‚æ­¥I/Oæ¨¡å‹ï¼Ÿæ¯”å¦‚åœ¨Schemeä¸­å¦‚ä½•å¤„ç†éé˜»å¡Socketæ“ä½œï¼Œæˆ–è€…åŸºäºå›è°ƒçš„æœºåˆ¶ï¼Ÿ
>
> æˆ–è®¸åº”è¯¥ä»¥Racketä¸ºä¾‹ï¼Œå› ä¸ºå®ƒæ‹¥æœ‰è¾ƒä¸ºå®Œå–„çš„æ–‡æ¡£å’Œç½‘ç»œåº“ï¼Œé€‚åˆæ•™å­¦ã€‚è€ŒGuileå¯èƒ½æ›´æ¥è¿‘åº•å±‚çš„Socketç¼–ç¨‹ï¼Œç±»ä¼¼Cçš„ç”¨æ³•ã€‚
>
> å¦å¤–ï¼Œæ˜¯å¦è¦æ¶‰åŠHTTPåè®®çš„å®ç°ï¼Ÿæ¯”å¦‚ç”¨Schemeç¼–å†™ç®€å•çš„HTTPæœåŠ¡å™¨ï¼Œå¤„ç†GETè¯·æ±‚ï¼Œä½†è¿™å¯èƒ½è¶…å‡ºâ€œé€šä¿¡åŸç†â€çš„èŒƒå›´ï¼Œè¿›å…¥åº”ç”¨å±‚åè®®çš„å¤„ç†ã€‚
>
> æ€»ä¹‹ï¼Œé‡ç‚¹è¦æ”¾åœ¨Schemeä¸­å¦‚ä½•åˆ©ç”¨æ“ä½œç³»ç»Ÿæä¾›çš„Socket APIè¿›è¡Œè¿›ç¨‹é—´æˆ–ç½‘ç»œé€šä¿¡ï¼Œè§£é‡Šé€šä¿¡çš„åŸºæœ¬æµç¨‹ï¼ŒåŸºäºTCPæˆ–UDPï¼Œä½¿ç”¨Schemeä»£ç ç¤ºä¾‹ã€‚
>
> å¯èƒ½çš„æ­¥éª¤ï¼š
>
> 1. ä»‹ç»ç½‘ç»œé€šä¿¡åŸºæœ¬æ¦‚å¿µï¼šTCP/IPï¼ŒSocketã€‚
>
> 2. è¯´æ˜Schemeä¸­Socket APIçš„å­˜åœ¨ï¼Œä¾‹å¦‚åœ¨Racketæˆ–Guileä¸­çš„ä½¿ç”¨æ–¹æ³•ã€‚
>
> 3. å±•ç¤ºä¸€ä¸ªç®€å•çš„TCPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„ä»£ç ç¤ºä¾‹ï¼Œè¯´æ˜é€šä¿¡è¿‡ç¨‹ã€‚
>
> 4. è§£é‡Šæ¶‰åŠçš„å‡½æ•°å’Œæ­¥éª¤ï¼šåˆ›å»ºsocketã€ç»‘å®šã€ç›‘å¬ã€æ¥å—è¿æ¥ã€è¯»å†™æ•°æ®ç­‰ã€‚
>
> 5. è®¨è®ºå¯èƒ½çš„é”™è¯¯å¤„ç†å’Œå¹¶å‘å¤„ç†ï¼Œæ¯”å¦‚å¤šå®¢æˆ·ç«¯è¿æ¥ã€‚
>
> åœ¨è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„æœ¯è¯­çš„å‡†ç¡®æ€§ï¼Œä¾‹å¦‚è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰é€šå¸¸æŒ‡åŒä¸€å°æœºå™¨ä¸Šçš„ä¸åŒè¿›ç¨‹ï¼Œè€Œç½‘ç»œé€šä¿¡åˆ™è·¨æœºå™¨ï¼Œä½†Socketä¹Ÿå¯ç”¨äºIPCï¼ˆé€šè¿‡Unix domain socketsï¼‰ã€‚
>
> å¦å¤–å¯èƒ½éœ€è¦æåˆ°Schemeçš„å‡½æ•°å¼ç‰¹æ€§å¦‚ä½•å½±å“ç½‘ç»œç¼–ç¨‹çš„ç»“æ„ï¼Œæ¯”å¦‚ä½¿ç”¨é€’å½’æ¥å¤„ç†æŒç»­ç›‘å¬è¿æ¥ï¼Œè€Œä¸æ˜¯å¾ªç¯ç»“æ„ã€‚
>
> æ€»ç»“ï¼šè¦å›´ç»•ç”¨æˆ·çš„éœ€æ±‚ç‚¹å±•å¼€ï¼Œå¯èƒ½éœ€è¦å…ˆæ˜ç¡®ä»–ä»¬çš„æ„å›¾ï¼Œä½†æ ¹æ®é—®é¢˜çŒœæµ‹æ˜¯ç½‘ç»œé€šä¿¡ï¼Œå› æ­¤åœ¨å›ç­”ä¸­éœ€æ¶µç›–Schemeä¸­Socketç¼–ç¨‹çš„åŸºæœ¬åŸç†å’Œå®ç°æ–¹å¼ï¼ŒåŒæ—¶æä¾›ä»£ç ç¤ºä¾‹å’Œæ¦‚å¿µè§£é‡Šã€‚
>
> 



Scheme è¯­è¨€æœ¬èº«ä¸“æ³¨äºç®€æ´çš„è¯­æ³•å’Œå‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼Œå¹¶ä¸ç›´æ¥æä¾›ç½‘ç»œé€šä¿¡çš„åŸç”Ÿæ”¯æŒï¼Œä½†å…¶ä¸»è¦å®ç°ï¼ˆå¦‚ **Racket**ã€**Guile** ç­‰ï¼‰é€šè¿‡æ‰©å±•åº“æä¾›äº†å®Œæ•´çš„ç½‘ç»œç¼–ç¨‹èƒ½åŠ›ã€‚ä»¥ä¸‹æ˜¯ Scheme å®ç°ç½‘ç»œé€šä¿¡çš„æ ¸å¿ƒåŸç†ä¸æŠ€æœ¯ç»†èŠ‚ï¼š

---

### ä¸€ã€é€šä¿¡åŸºç¡€ï¼šSocket æŠ½è±¡
ç½‘ç»œé€šä¿¡çš„æœ¬è´¨æ˜¯ **é€šè¿‡ Socket å®ç°è·¨è¿›ç¨‹æˆ–è·¨ä¸»æœºçš„æ•°æ®äº¤æ¢**ã€‚Scheme çš„å®ç°é€šå¸¸å°è£…äº†æ“ä½œç³»ç»Ÿçš„ Socket APIï¼Œæä¾›ç±»ä¼¼ C è¯­è¨€çš„åº•å±‚æ¥å£ã€‚é€šä¿¡æ¨¡å¼å¯åˆ†ä¸ºï¼š
- **TCPï¼ˆå¯é æµå¼ä¼ è¾“ï¼‰**ï¼šé¢å‘è¿æ¥ï¼Œä¿è¯æ•°æ®é¡ºåºå’Œå®Œæ•´æ€§ã€‚
- **UDPï¼ˆä¸å¯é æ•°æ®æŠ¥ï¼‰**ï¼šæ— è¿æ¥ï¼Œé€‚åˆå®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚éŸ³è§†é¢‘æµï¼‰ã€‚

---

### äºŒã€Racket ä¸­çš„ TCP é€šä¿¡å®ç°
Racket æä¾›é«˜çº§ç½‘ç»œåº“ï¼Œç®€åŒ–äº†é€šä¿¡æµç¨‹ï¼š  
#### 1. **TCP æœåŠ¡ç«¯**
```scheme
#lang racket

(define (start-server port)
  (define listener (tcp-listen port))  ; åˆ›å»ºç›‘å¬Socket
  (printf "Server listening on port ~a\n" port)
  (let loop ()
    (define-values (in out) (tcp-accept listener)) ; æ¥å—å®¢æˆ·ç«¯è¿æ¥
    (thread (Î» () (handle-client in out)))  ; æ¯ä¸ªå®¢æˆ·ç«¯ä¸€ä¸ªçº¿ç¨‹
    (loop)))

(define (handle-client in out)
  (fprintf out "Welcome to Racket Server!\n")
  (flush-output out)
  (let loop ()
    (define line (read-line in))
    (cond
      [(eof-object? line) (close-input-port in) (close-output-port out)]
      [else
       (fprintf out "ECHO: ~a\n" line)
       (flush-output out)
       (loop)])))

(start-server 8080)
```
**å…³é”®æ­¥éª¤**ï¼š
- `tcp-listen`ï¼šç»‘å®šç«¯å£å¹¶ç›‘å¬è¿æ¥ã€‚
- `tcp-accept`ï¼šé˜»å¡ç›´è‡³å®¢æˆ·ç«¯è¿æ¥ï¼Œè¿”å›è¾“å…¥/è¾“å‡ºç«¯å£ã€‚
- ä½¿ç”¨çº¿ç¨‹å¤„ç†å¹¶å‘è¯·æ±‚ï¼Œé¿å…é˜»å¡ä¸»å¾ªç¯ã€‚

#### 2. **TCP å®¢æˆ·ç«¯**
```scheme
#lang racket

(define (connect-to-server host port)
  (define-values (in out) (tcp-connect host port)) ; å»ºç«‹è¿æ¥
  (displayln (read-line in)) ; è¯»å–æ¬¢è¿æ¶ˆæ¯
  (for ([message '("Hello" "Racket" "Bye")])
    (displayln message out)
    (flush-output out)
    (displayln (read-line in))) ; è¯»å–æœåŠ¡ç«¯å“åº”
  (close-input-port in)
  (close-output-port out))

(connect-to-server "localhost" 8080)
```

---

### ä¸‰ã€Guile Scheme çš„åº•å±‚ Socket æ“ä½œ
Guile æ›´æ¥è¿‘ C çš„ Socket APIï¼Œé€‚åˆç²¾ç»†æ§åˆ¶ï¼š  
#### 1. **åˆ›å»º Socket**
```scheme
(use-modules (ice-9 sockets))

(define server-socket (socket PF_INET SOCK_STREAM 0))  ; TCPåè®®

;; è®¾ç½®åœ°å€é‡ç”¨
(setsockopt server-socket SOL_SOCKET SO_REUSEADDR 1)

;; ç»‘å®šåˆ°æœ¬åœ°ç«¯å£
(let ((addr (make-socket-address AF_INET INADDR_ANY 8080)))
  (bind server-socket addr)
  (listen server-socket 5)  ; å¼€å§‹ç›‘å¬ï¼Œæœ€å¤§é˜Ÿåˆ—ä¸º5
  (format #t "Server listening on port 8080~%"))
```

#### 2. **æ¥å—è¿æ¥ä¸æ•°æ®è¯»å†™**
```scheme
(define (accept-loop)
  (let* ((client (accept server-socket))
         (port (socket:port client)))
    (format #t "Client connected: ~a~%" (sockaddr:addr (getpeername client)))
    (let ((input (socket:input-port client))
          (output (socket:output-port client)))
      (display "Welcome to Guile Server!\n" output)
      (force-output output)
      (let loop ()
        (let ((line (read-line input)))
          (if (eof-object? line)
              (begin
                (format #t "Client disconnected~%")
                (close-port input)
                (close-port output))
              (begin
                (display (string-append "ECHO: " line "\n") output)
                (force-output output)
                (loop))))))))

;; å•çº¿ç¨‹é¡ºåºå¤„ç†ï¼Œéœ€æ”¹è¿›ä¸ºå¤šçº¿ç¨‹
(accept-loop)
```

---

### å››ã€é€šä¿¡åè®®è®¾è®¡è¿›é˜¶
#### 1. **äºŒè¿›åˆ¶åè®®ä¼˜åŒ–**
- **ç»“æ„åŒ–æ•°æ®å¤„ç†**ï¼š
  ```scheme
  ;; å‘é€å¸¦é•¿åº¦å‰ç¼€çš„æ¶ˆæ¯
  (define (send-binary out data)
    (let* ((bytes (string->utf8 data))
           (len (bytevector-length bytes)))
      (put-bytevector out (uint32->bytevector len)) ; 4å­—èŠ‚é•¿åº¦å¤´
      (put-bytevector out bytes)
      (force-output out)))

  ;; é•¿åº¦å¤´è§£æå‡½æ•°
  (define (uint32->bytevector n)
    (let ((bv (make-bytevector 4)))
      (bytevector-u32-set! bv 0 n (endianness big))
      bv))
  ```

#### 2. **å¼‚æ­¥ I/O æ¨¡å‹**
Racket çš„ `racket/async-channel` ç»“åˆå¤šçº¿ç¨‹å®ç°éé˜»å¡ï¼š
```scheme
(require racket/async-channel)

(define async-ch (make-async-channel))

;; ç”Ÿäº§è€…çº¿ç¨‹æ¥æ”¶æ•°æ®
(thread (Î» ()
          (let loop ()
            (define data (read-line))
            (async-channel-put async-ch data)
            (loop))))

;; æ¶ˆè´¹è€…çº¿ç¨‹å¤„ç†æ•°æ®
(thread (Î» ()
          (let loop ()
            (define data (async-channel-get async-ch))
            (displayln (string-append "Processing: " data))
            (loop))))
```

---

### äº”ã€æ€§èƒ½ä¸å®‰å…¨
#### 1. **å¹¶å‘æ¨¡å‹å¯¹æ¯”**
- **å¤šçº¿ç¨‹**ï¼šç®€å•ä½†å—é™äºçº¿ç¨‹åˆ‡æ¢å¼€é”€ï¼ˆRacket çš„ç»¿è‰²çº¿ç¨‹ä¼˜åŒ–è¾ƒå¥½ï¼‰ã€‚
- **äº‹ä»¶é©±åŠ¨**ï¼šå¦‚åŸºäº `select` æˆ– `epoll` çš„å•çº¿ç¨‹äº‹ä»¶å¾ªç¯ï¼ˆGuile éœ€æ‰‹åŠ¨å®ç°ï¼‰ã€‚

#### 2. **å®‰å…¨å®è·µ**
- **TLS åŠ å¯†**ï¼šä½¿ç”¨ Racket çš„ `openssl` æ¨¡å—ï¼š
  ```scheme
  (require openssl)
  (define ssl-ctx (ssl-make-client-context))
  (ssl-set-verify! ssl-ctx #t) ; å¯ç”¨è¯ä¹¦éªŒè¯
  (define ssl-port (ssl-connect "hostname" 443 ssl-ctx))
  ```

---

### å…­ã€åœºæ™¯å¯¹æ¯”ï¼šScheme ä¸å…¶ä»–è¯­è¨€
| **ç‰¹æ€§**            | **Scheme (Racket)**       | **Python**               |
|----------------------|---------------------------|--------------------------|
| **å¹¶å‘æ¨¡å‹**         | ç»¿è‰²çº¿ç¨‹/Place å¹¶è¡Œ       | å¤šçº¿ç¨‹ï¼ˆå—GILé™åˆ¶ï¼‰      |
| **åè®®å®šåˆ¶çµæ´»æ€§**   | é«˜é˜¶å‡½æ•°ç®€åŒ–åè®®è§£æ      | éœ€ä¾èµ–ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚asyncioï¼‰|
| **æ€§èƒ½å…³é”®è·¯å¾„**     | æ¥è¿‘Cçš„é€Ÿåº¦ï¼ˆJITä¼˜åŒ–ï¼‰    | è§£é‡Šæ‰§è¡Œï¼Œé€Ÿåº¦è¾ƒæ…¢       |
| **åŠ å¯†æ”¯æŒ**         | éœ€æ‰‹åŠ¨é›†æˆOpenSSL         | åŸç”Ÿ`ssl`æ¨¡å—            |

---

é€šè¿‡ Scheme çš„ç½‘ç»œç¼–ç¨‹èƒ½åŠ›ï¼Œå¼€å‘è€…æ—¢èƒ½å®ç°åº•å±‚çš„ Socket æ§åˆ¶ï¼Œä¹Ÿèƒ½åˆ©ç”¨é«˜çº§æŠ½è±¡ï¼ˆå¦‚ Racket çš„ Web Server æ¡†æ¶ï¼‰å¿«é€Ÿæ„å»º HTTP æœåŠ¡ã€‚å…¶å‡½æ•°å¼ç‰¹æ€§å°¤å…¶é€‚åˆ **åè®®è§£æå™¨** å’Œ **çŠ¶æ€æœº** çš„å®ç°ï¼Œé€‚åˆéœ€è¦é«˜åº¦å¯å®šåˆ¶é€šä¿¡åè®®çš„åœºæ™¯ï¼ˆå¦‚ç‰©è”ç½‘è®¾å¤‡æ§åˆ¶ï¼‰ã€‚

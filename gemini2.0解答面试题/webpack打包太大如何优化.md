> ğŸ’­ å—¯ï¼Œç”¨æˆ·ç°åœ¨é‡åˆ°äº†Webpackæ‰“åŒ…åæ–‡ä»¶å¤ªå¤§çš„é—®é¢˜ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªå¸¸è§çš„æ€§èƒ½ä¼˜åŒ–é—®é¢˜ã€‚æˆ‘éœ€è¦å…ˆå›é¡¾ä¸€ä¸‹å¸¸è§çš„è§£å†³æ–¹æ³•ï¼Œç„¶åæ ¹æ®ç”¨æˆ·çš„æƒ…å†µç»™å‡ºå…·ä½“çš„å»ºè®®ã€‚é¦–å…ˆï¼Œå¯èƒ½ç”¨æˆ·ä½¿ç”¨çš„æ˜¯é»˜è®¤çš„Webpacké…ç½®ï¼Œæ²¡æœ‰åšä»£ç åˆ†å‰²æˆ–ä¼˜åŒ–æ’ä»¶ï¼Œå¯¼è‡´æ‰“åŒ…åçš„æ–‡ä»¶ä½“ç§¯è¿‡å¤§ã€‚è¿™æ—¶å€™éœ€è¦åˆ†æå…·ä½“çš„ä½“ç§¯åˆ†å¸ƒï¼Œçœ‹çœ‹æ˜¯å“ªäº›éƒ¨åˆ†å ç”¨äº†æœ€å¤šçš„ç©ºé—´ã€‚
>
> ç”¨æˆ·å¯èƒ½æ²¡æœ‰ä½¿ç”¨è¯¸å¦‚productionæ¨¡å¼æˆ–è€…æ²¡æœ‰å¼€å¯ä»£ç å‹ç¼©ï¼Œæ¯”å¦‚TerserPluginæ²¡æœ‰é…ç½®ï¼Œå¯¼è‡´ä»£ç æ²¡æœ‰è¢«å‹ç¼©ã€‚åˆæˆ–è€…é¡¹ç›®ä¸­å¼•å…¥äº†è¾ƒå¤§çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚lodashæ•´ä¸ªå¼•å…¥ï¼Œè€Œæ²¡æœ‰è¢«æŒ‰éœ€åŠ è½½ã€‚
>
> å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½åœ¨æ‰“åŒ…æ—¶æ²¡æœ‰è¿›è¡Œä»£ç åˆ†å‰²ï¼ˆcode splittingï¼‰ï¼Œå¯¼è‡´æ‰€æœ‰ä»£ç éƒ½æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¿™æ—¶å€™å¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€å¯¼å…¥æˆ–è€…SplitChunksPluginæ¥æ‹†åˆ†ä»£ç å—ã€‚è¿˜æœ‰å¯èƒ½æœ‰äº›å¤§å‹çš„å›¾ç‰‡æˆ–èµ„æºæ²¡æœ‰è¢«ä¼˜åŒ–ï¼Œéœ€è¦ç»“åˆurl-loaderæˆ–image-webpack-loaderæ¥å¤„ç†ã€‚
>
> å¯èƒ½ç”¨æˆ·æ²¡æœ‰ä½¿ç”¨Tree Shakingï¼Œè¿™éœ€è¦ç¡®ä¿é¡¹ç›®æ˜¯ES6æ¨¡å—åŒ–çš„ï¼Œå¹¶ä¸”åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹Webpackä¼šè‡ªåŠ¨å¯ç”¨è¿™ä¸€åŠŸèƒ½ã€‚ä½†æœ‰æ—¶å€™ç”±äºæ¨¡å—çš„å‰¯ä½œç”¨æ ‡è®°é”™è¯¯ï¼Œå¯èƒ½æ²¡æœ‰æ­£ç¡®åˆ é™¤æ— ç”¨ä»£ç ï¼Œéœ€è¦æ£€æŸ¥sideEffectsé…ç½®ã€‚
>
> å¦å¤–ï¼Œç¬¬ä¸‰æ–¹åº“çš„ä¼˜åŒ–ä¹Ÿæ˜¯ä¸€æ–¹é¢ï¼Œæ¯”å¦‚ä½¿ç”¨CDNå¼•å…¥æŸäº›åº“ï¼ˆexternalsé…ç½®ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨æ›´è½»é‡çº§çš„æ›¿ä»£åº“ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç”¨äº†moment.jsï¼Œå¯ä»¥æ¢æˆdate-fnsä»¥è·å¾—æ›´å¥½çš„tree shakingæ”¯æŒã€‚
>
> è¿˜æœ‰è€ƒè™‘ä½¿ç”¨Gzipæˆ–Brotliå‹ç¼©ï¼Œé€šè¿‡Webpackæ’ä»¶ç”Ÿæˆå‹ç¼©åçš„ç‰ˆæœ¬ï¼Œå†è®©æœåŠ¡å™¨æ”¯æŒè¿™äº›å‹ç¼©æ ¼å¼ã€‚åŒæ—¶ï¼Œä»£ç åˆ†å‰²åçš„å¼‚æ­¥åŠ è½½å¯ä»¥é€šè¿‡é¢„åŠ è½½æˆ–é¢„å–ç­–ç•¥æ¥ä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚
>
> æˆ–è®¸ç”¨æˆ·éœ€è¦åˆ†æå·¥å…·ï¼Œæ¯”å¦‚webpack-bundle-analyzerï¼Œæ¥å¯è§†åŒ–æŸ¥çœ‹å„ä¸ªæ¨¡å—çš„ä½“ç§¯ï¼Œä»è€Œæœ‰é’ˆå¯¹æ€§åœ°è¿›è¡Œä¼˜åŒ–ã€‚ç”¨æˆ·ä½“éªŒä¸Šï¼Œé¦–æ¬¡åŠ è½½æ—¶é—´è¿‡é•¿ä¼šå½±å“ç•™å­˜ç‡ï¼Œæ‰€ä»¥æ ¸å¿ƒåœ¨äºå‡å°å…³é”®èµ„æºçš„å¤§å°ï¼Œå»¶è¿ŸåŠ è½½éå¿…è¦ä»£ç ã€‚
>
> ç»¼åˆè¿™äº›æ–¹é¢ï¼Œåº”è¯¥ç³»ç»Ÿåœ°åˆ—å‡ºå„ç§ä¼˜åŒ–æ‰‹æ®µï¼Œä»é…ç½®ä¼˜åŒ–ã€ä»£ç åˆ†å‰²ã€ç¬¬ä¸‰æ–¹åº“å¤„ç†ã€èµ„æºä¼˜åŒ–åˆ°é«˜çº§æŠ€å·§å¦‚ä½œç”¨åŸŸæå‡ç­‰ã€‚åŒæ—¶è¦æ³¨æ„ä¸åŒæ–¹æ³•çš„é€‚ç”¨åœºæ™¯å’Œå¯èƒ½çš„å‰¯ä½œç”¨ï¼Œæ¯”å¦‚ä»£ç åˆ†å‰²å¯èƒ½ä¼šå¢åŠ HTTPè¯·æ±‚ï¼Œä½†åˆç†é…ç½®å¯ä»¥å¹³è¡¡æ•°é‡å’Œä½“ç§¯ã€‚
>
> 



---

é’ˆå¯¹ Webpack æ‰“åŒ…æ–‡ä»¶è¿‡å¤§çš„é—®é¢˜ï¼Œé€šè¿‡ä»¥ä¸‹ **åˆ†å±‚ä¼˜åŒ–ç­–ç•¥** å¯ç³»ç»Ÿæ€§è§£å†³é—®é¢˜ï¼š

---

### **ä¸€ã€ä¸´ç•ŒæŒ‡æ ‡æ£€æµ‹ (å…³é”®è·¯å¾„ä¼˜å…ˆ)**
| å·¥å…·/æ–¹æ³• | åˆ†æç»´åº¦ | ä¼˜åŒ–ç›®æ ‡å€¼ (å‚è€ƒ) |
|---------|---------|-----------------|
| **Webpack Stats** | åˆå§‹JS/CSSä½“ç§¯ | JSå•æ–‡ä»¶ < 200KB (Gzipå‰) |
| `webpack-bundle-analyzer` | æ¨¡å—ä½“ç§¯å æ¯” | ç¬¬ä¸‰æ–¹åº“æ€»å æ¯” < 50% |
| Lighthouse Performance | é¦–å±æ ¸å¿ƒèµ„æºåŠ è½½æ—¶é—´ | FCP < 1.5s |

---

### **äºŒã€ä¸»å¹²ä¼˜åŒ– (å¿…é€‰æ­¥éª¤)**

#### **1. åŸºç¡€é…ç½®å¼ºåŒ–**
```javascript
// webpack.prod.js
module.exports = {
  mode: 'production',  // âœ… å¯ç”¨å†…ç½®ä¼˜åŒ– (å‹ç¼©/TreeShaking)
  devtool: 'source-map', // ğŸš« ç¦ç”¨ eval-cheap-source-map
  optimization: {
    minimize: true,
    minimizer: [
      new TerserPlugin({ parallel: true }), // JSå‹ç¼©
      new CssMinimizerPlugin()              // CSSå‹ç¼©
    ],
    splitChunks: {      // ğŸ“¦ æ™ºèƒ½åˆ†åŒ…
      chunks: 'all',
      minSize: 20000,   // æœ€å°åˆ†å‰²ä½“ç§¯20KB
      cacheGroups: {
        vendors: {
          test: /[\\/]node_modules[\\/]/,
          priority: -10,
          name: 'vendors'
        }
      }
    }
  }
}
```

#### **2. ç¬¬ä¸‰æ–¹åº“ç˜¦èº«**
| å…¸å‹è†¨èƒ€åº“ | æ›¿ä»£æ–¹æ¡ˆ | ä½“ç§¯èŠ‚çœæ¯” |
|-----------|---------|-----------|
| Moment.js + locale | date-fns + Webpacké…ç½®æ’é™¤locale | 85%â†“ (300KBâ†’45KB) |
| Lodash | lodash-es + BabelæŒ‰éœ€å¯¼å…¥ | 70%â†“ (500KBâ†’150KB) |
| jQuery (è€æ—§é …ç›®) | åŸç”ŸJS/Vanilla | 90%â†“ (87KBâ†’0KB) |

**ç¦ç”¨moment localeç¤ºä¾‹**ï¼š
```javascript
// webpack.config.js
const webpack = require('webpack');
module.exports = {
  plugins: [
    new webpack.IgnorePlugin({
      resourceRegExp: /^\.\/locale$/,
      contextRegExp: /moment$/
    })
  ]
}
```

---

### **ä¸‰ã€æ ¸å¿ƒè¿›é˜¶ (æ˜¾è‘—ä¼˜åŒ–)**

#### **1. æŒ‰éœ€åŠ è½½ (è·¯ç”±çº§åˆ†å‰²)**
```javascript
// Reactåœºæ™¯ (åŠ¨æ€import())
const ProductList = lazy(() => import(/* webpackChunkName: "product" */ './Product'));
// Vueåœºæ™¯ (webpackChunké­”æ³•æ³¨é‡Š)
const UserProfile = () => import(/* webpackChunkName: "profile" */ './User.vue')
```

#### **2. å¯è§†åŒ–æ‹†è§£ (ç²¾å‡†æ‰“å‡»)**
```bash
npm install --save-dev webpack-bundle-analyzer
```
```javascript
// ç”Ÿæˆåˆ†ææŠ¥å‘Š
const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;
module.exports = {
  plugins: [
    new BundleAnalyzerPlugin({
      analyzerMode: 'static',  // ç”ŸæˆHTMLæŠ¥å‘Š
      openAnalyzer: false
    })
  ]
}
```

**æŠ¥å‘Šè§£è¯»ä¼˜å…ˆçº§**ï¼š
1. å•ä¸ªJSæ–‡ä»¶ >1MB â†’ æ‹†åˆ†/æŒ‰éœ€åŠ è½½
2. é‡å¤å®‰è£…çš„åº“ â†’ dedupe/ç»Ÿä¸€ç‰ˆæœ¬
3. æ— ç”¨çš„Moment locales â†’ IgnorePlugin

#### **3. ECMAScripté©æ–° (ES Moduleé‡æ„)**
```javascript
// å°†CommonJSæ¨¡å—æ”¹å†™ä¸ºESM
import { throttle } from 'lodash-es';  // âœ… TreeShakingç”Ÿæ•ˆ
import _ from 'lodash';               // ğŸš« å…¨é‡åŠ è½½
```

---

### **å››ã€æé™å‹ç¼© (æ”¶ç›Šæ˜¾è‘—)**

#### **1. Gzip/Brotlié¢„å‹ç¼©**
```bash
npm install compression-webpack-plugin --save-dev
```
```javascript
const CompressionPlugin = require('compression-webpack-plugin');
module.exports = {
  plugins: [
    new CompressionPlugin({
      filename: '[path][base].gz',  // .gzæ‰©å±•
      algorithm: 'gzip',            // å¯åˆ‡æ¢è‡³'brotliCompress'
      threshold: 10240,             // ä»…å‹ç¼©>10KBæ–‡ä»¶
      minRatio: 0.8                 // å‹ç¼©ç‡è¦æ±‚
    })
  ]
}
```
**Nginxé…ç½®ç¤ºä¾‹**ï¼š
```nginx
gzip_static on;  # ä¼˜å…ˆä½¿ç”¨é¢„ç”Ÿæˆgz
brotli_static on;
```

#### **2. CSSåŸå­åŒ– (é€‚åˆTailwindåœºæ™¯)**
```javascript
// å®‰è£…PurgeCSS
const PurgeCSSPlugin = require('purgecss-webpack-plugin');
const glob = require('glob');
module.exports = {
  plugins: [
    new PurgeCSSPlugin({
      paths: glob.sync(`${PATHS.src}/**/*`, { nodir: true }),
      safelist: ['dark-mode']  // ä¿ç•™æŒ‡å®šç±»å
    })
  ]
}
```

---

### **äº”ã€æ¶æ„çº§ä¼˜åŒ– (é•¿æœŸé¡¹ç›®å¿…çœ‹)**

#### **1. å¾®å‰ç«¯æ‹†è§£**
```javascript
// ä¸»åº”ç”¨é€šè¿‡Module Federationå¼•å…¥å­åº”ç”¨
// webpack.config.js (ä¸»åº”ç”¨)
new ModuleFederationPlugin({
  remotes: {
    app1: 'app1@http://cdn.com/app1/remoteEntry.js'
  }
});
```

#### **2. WASMæ€§èƒ½æ›¿ä»£ (Reactæ¡†æ¶ç¤ºä¾‹)**
```javascript
import initWasm from './heavy-calculation.wasm';

async function runWasm() {
  const { compute } = await initWasm();
  compute(); // å°†CPUå¯†é›†å‹ä»»åŠ¡è½¬WASM
}
```

---

### **å…­ã€æ•ˆæœå¯¹æ¯”**
| ä¼˜åŒ–é˜¶æ®µ | å…¸å‹ä½“ç§¯å˜åŒ– | é¦–å±FCPæå‡ |
|---------|------------|------------|
| æœªä¼˜åŒ– | 5.4MB (æœªå‹ç¼©) | 4.2s |
| åŸºç¡€ä¼˜åŒ– (SplitChunks+å‹ç¼©) | 1.8MB â†’ 450KB (Gzip) | 1.9s |
| æŒ‰éœ€åŠ è½½+TreeShaking | 310KB (Gzip) | 1.3s |
| é¢„å¤„ç†+Brotli | 270KB (Brotli) | 1.1s |

---

### **ä¸ƒã€ç´§æ€¥æƒ…å†µå¤„ç†**
è‹¥åœ¨ABæµ‹è¯•ä¸­å‡ºç°åŠ è½½æ¶åŒ–ï¼š
1. å›æ»šè‡³ä¸Šä¸€ç‰ˆæœ¬Webpacké…ç½®
2. ä¸´æ—¶å¯ç”¨CDNåŠ¨æ€åŠ é€Ÿ (`<script src="https://cdn.com/vendor.js">`)
3. LazyåŠ è½½éæ ¸å¿ƒè·¯ç”±
```javascript
// ç´§æ€¥å»¶è¿ŸåŠ è½½ç¤ºä¾‹
window.addEventListener('load', () => {
  import('./analytics');  // å»¶ååŠ è½½ç»Ÿè®¡ä»£ç 
});
```

---

é€šè¿‡é˜¶æ®µå¼æ¨è¿›è¿™äº›ä¼˜åŒ–ï¼Œå¯ç¡®ä¿Webåº”ç”¨åœ¨æ€§èƒ½ä¸åŠŸèƒ½ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚æœ€ä½³å®è·µæ˜¯ç›‘æ§æ¯æ¬¡æ„å»ºçš„ `stats.json` ä¸ç”Ÿäº§ç¯å¢ƒæ€§èƒ½æ•°æ®ï¼ŒæŒç»­è¿­ä»£ä¼˜åŒ–ç­–ç•¥ã€‚

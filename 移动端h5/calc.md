`calc()` 是 CSS 的一个内置函数，用于在 CSS 属性值中执行计算。它允许你使用加法（`+`）、减法（`-`）、乘法（`*`）和除法（`/`）运算符来组合不同的长度单位，从而实现动态的、响应式的布局和样式。

**基本语法：**

```css
property: calc(expression);
```

*   `property`: 任何接受长度值（如 `width`、`height`、`margin`、`padding`、`font-size` 等）的 CSS 属性。
*   `expression`: 一个包含数学运算符和值的表达式。

**运算符：**

*   `+`: 加法
*   `-`: 减法
*   `*`: 乘法（至少一个操作数必须是 `<number>` 类型）
*   `/`: 除法（右侧操作数必须是 `<number>` 类型）

**单位：**

`calc()` 支持以下长度单位：

*   `<length>`: 像素 (`px`)、厘米 (`cm`)、毫米 (`mm`)、英寸 (`in`)、点 (`pt`)、派卡 (`pc`)
*   `<percentage>`: 百分比 (`%`)
*   `<viewport-percentage>`: 视口单位 (`vw`、`vh`、`vmin`、`vmax`)
*   `<frequency>`: 千赫兹 (`kHz`), 赫兹 (`Hz`)
*   `<angle>`: 角度 (`deg`、`grad`、`rad`、`turn`)
*   `<time>`: 秒 (`s`)、毫秒 (`ms`)
*   `em`、`rem`、`ex`、`ch`

**注意事项：**

1.  **运算符两侧的空格:**
    *   `+` 和 `-` 运算符两侧必须有空格。例如，`calc(50% -8px)` 是无效的，正确的写法是 `calc(50% - 8px)`。
    *   `*` 和 `/` 运算符两侧的空格是可选的，但为了保持一致性和可读性，建议加上空格。

2.  **除法运算的限制:**
    *   `/` 运算符右侧的操作数必须是 `<number>` 类型（无单位的数字），不能是长度单位。这是为了避免除以零或无意义的单位组合。

3.  **单位混合:**
    *   `calc()` 允许你混合使用不同的单位。例如，你可以将像素值与百分比值相加。

4.  **嵌套:**
    *   `calc()` 函数可以嵌套使用。

5.  **优先级:**
    *   `calc()` 中的运算遵循标准的数学运算优先级（先乘除，后加减）。可以使用括号来改变运算顺序。

**常见用法示例：**

1.  **居中元素 (已知宽度):**

    ```css
    .center {
      width: 500px;
      margin-left: calc(50% - 250px); /* 50% 减去宽度的一半 */
      position: absolute;/*对于非float和绝对定位的元素，margin-left auto也可以实现居中*/
    }
    ```

2.  **响应式布局 (未知宽度):**

    ```css
    .container {
      width: 100%; /* 或使用 vw */
    }
    .sidebar {
      width: 300px;
    }
    .main-content {
      width: calc(100% - 300px); /* 容器宽度减去侧边栏宽度 */
    }
    ```

3.  **动态字体大小:**

    ```css
    .text {
      font-size: calc(16px + 2vw); /* 基础字体大小加上视口宽度的百分比 */
    }
    ```

4.  **内边距与边框:**

    ```css
    .box {
      width: calc(100% - 20px - 2px); /* 减去内边距和边框 */
      padding: 10px;
      border: 1px solid black;
      box-sizing: border-box; /* 重要：避免计算错误 */
    }
    ```
注意:如果不设置box-sizing属性为border-box,那么元素的实际宽度是内容的宽度加上padding再加border的宽度，在此示例中，应去除border的减值

5.  **结合 CSS 变量:**

    ```css
    :root {
      --sidebar-width: 300px;
    }
    .main-content {
      width: calc(100% - var(--sidebar-width));
    }
    ```

6. **calc()可以嵌套**
   ```css
   width: calc(calc(100% - 40px) / 2);
   ```
**`calc()` 的优势：**

*   **动态计算:** 可以在运行时根据视口大小、父元素大小等因素动态计算属性值。
*   **响应式设计:** 可以创建更灵活、更适应不同屏幕尺寸的布局。
*   **减少媒体查询:** 在某些情况下，可以使用 `calc()` 代替媒体查询，使代码更简洁。
*   **提高可维护性:** 通过将计算逻辑放在 CSS 中，可以减少 JavaScript 代码量，提高代码的可维护性。

**浏览器兼容性：**

`calc()` 的浏览器兼容性非常好，所有主流的现代浏览器都支持它（包括 IE9 及以上版本）。

**总结:**

`calc()` 是一个非常有用的 CSS 函数，它允许你在 CSS 中进行数学计算，从而实现更灵活、更动态的布局和样式。通过结合不同的单位、运算符和 CSS 变量，你可以创建出适应各种屏幕尺寸和设备的高质量网页。

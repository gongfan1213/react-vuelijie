> ğŸ’­ å—¯ï¼Œç”¨æˆ·ç°åœ¨è¦è¯¦ç»†è®²æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€‚ä¹‹å‰æˆ‘åœ¨æ€§èƒ½ä¼˜åŒ–ä¸­æåˆ°SSRå¯ä»¥æå‡é¦–å±é€Ÿåº¦ï¼Œç°åœ¨æ˜¯æ·±å…¥è®¨è®ºçš„æ—¶å€™äº†ã€‚é¦–å…ˆå¾—ç¡®å®šç”¨æˆ·æ˜¯å¦äº†è§£SSRçš„åŸºæœ¬æ¦‚å¿µï¼Œå¯èƒ½ä»–ä»¬é‡åˆ°äº†é¦–å±åŠ è½½æ…¢çš„é—®é¢˜ï¼Œæˆ–è€…SEOä¸å‹å¥½çš„æƒ…å†µã€‚æˆ‘è¦ç¡®ä¿è§£é‡Šæ¸…æ¥šä»€ä¹ˆæ˜¯SSRï¼Œå’Œå®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰çš„åŒºåˆ«åœ¨å“ªé‡Œã€‚
>
> ç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“SSRçš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ã€‚éœ€è¦åˆ—ä¸¾æ¯”å¦‚å¿«é€Ÿé¦–å±ã€SEOä¼˜åŒ–ã€æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚ä½†ä¹Ÿä¸èƒ½å¿½ç•¥ç¼ºç‚¹ï¼Œæ¯”å¦‚æœåŠ¡å™¨å‹åŠ›å¢å¤§ï¼Œå¼€å‘å¤æ‚åº¦æé«˜ã€‚è¦è®©ç”¨æˆ·æ˜ç™½æƒè¡¡åˆ©å¼Šã€‚
>
> å®ç°åŸç†éƒ¨åˆ†å¾—ä»æµç¨‹å…¥æ‰‹ï¼Œæ¯”å¦‚è¯·æ±‚å¤„ç†ã€æœåŠ¡ç«¯ç”ŸæˆHTMLã€å®¢æˆ·ç«¯hydrationã€‚æœ€å¥½ç”¨ä¸€å¼ æµç¨‹å›¾å¸®åŠ©ç†è§£ï¼Œæˆ–è€…æ–‡å­—æè¿°çš„æ­¥éª¤ã€‚å¯èƒ½éœ€è¦æåˆ°å…·ä½“çš„æŠ€æœ¯æ ˆï¼Œæ¯”å¦‚Reactçš„Next.jsï¼ŒVueçš„Nuxt.jsï¼Œè¿™æ ·ç”¨æˆ·æœ‰å®é™…çš„ä¾‹å­å‚è€ƒã€‚
>
> æ¥ä¸‹æ¥ï¼Œæ€§èƒ½ä¼˜åŒ–ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿæ¯”å¦‚æµå¼æ¸²æŸ“ã€ç»„ä»¶çº§ç¼“å­˜ã€æŒ‰éœ€ç¼–è¯‘ï¼Œè¿™äº›éƒ½èƒ½æå‡SSRçš„æ•ˆç‡ã€‚åŒæ—¶ï¼Œè¦æåˆ°å¸¸è§é—®é¢˜ï¼Œæ¯”å¦‚å†…å­˜æ³„æ¼ã€æ°´åˆå¤±è´¥ï¼Œç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚
>
> è¿˜è¦æ¯”è¾ƒSSRå’Œå…¶ä»–çš„æ¸²æŸ“æ–¹å¼ï¼Œåƒé™æ€ç”Ÿæˆï¼ˆSSGï¼‰æˆ–è€…è¾¹ç¼˜æ¸²æŸ“ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œé«˜åŠ¨æ€å†…å®¹ç”¨SSRï¼Œå†…å®¹å›ºå®šç”¨SSGä¼šæ›´å¥½ã€‚
>
> é’ˆå¯¹æŠ€æœ¯å®ç°ï¼Œç»™å‡ºä»£ç ç¤ºä¾‹ä¼šæ›´æœ‰å¸®åŠ©ï¼Œæ¯”å¦‚ä½¿ç”¨Next.jsçš„ç®€å•demoï¼Œå¦‚ä½•å®ç°æ•°æ®è·å–ï¼Œå®¢æˆ·ç«¯æ³¨æ°´çš„è¿‡ç¨‹ã€‚è¿™èƒ½è®©ç”¨æˆ·æ›´å®¹æ˜“ä¸Šæ‰‹ã€‚
>
> å¦å¤–ï¼Œéœ€è¦è®¨è®ºå¦‚ä½•ç›‘æ§SSRçš„æ€§èƒ½ï¼Œæ¯”å¦‚ä½¿ç”¨Lighthouseæˆ–Web Vitalsï¼Œä»¥åŠå¤„ç†CSRå’ŒSSRçš„å·®å¼‚å¸¦æ¥çš„é—®é¢˜ï¼Œæ¯”å¦‚çª—å£å¯¹è±¡åœ¨æœåŠ¡ç«¯ä¸å­˜åœ¨çš„æƒ…å†µï¼Œå¦‚ä½•å¤„ç†å…¼å®¹æ€§é—®é¢˜ã€‚
>
> æœ€åï¼Œæ¡ˆä¾‹åˆ†æå’Œæœ€ä½³å®è·µèƒ½è®©ç”¨æˆ·æ›´æœ‰ä¿¡å¿ƒå»åº”ç”¨SSRï¼Œæ¯”å¦‚æŸç”µå•†ç½‘ç«™ä½¿ç”¨åLCPæå‡å¤šå°‘ï¼ŒSEOæ•ˆæœæ€æ ·ã€‚è¦æé†’ç”¨æˆ·æ ¹æ®å®é™…é¡¹ç›®æƒ…å†µé€‰æ‹©ï¼Œå¹¶æä¾›ç»´æŠ¤SSRåº”ç”¨çš„æ³¨æ„äº‹é¡¹ï¼Œæ¯”å¦‚ç¼“å­˜ç­–ç•¥ã€é”™è¯¯å¤„ç†ç­‰ã€‚
>
> å¯èƒ½ç”¨æˆ·åœ¨å®æ–½è¿‡ç¨‹ä¸­ä¼šé‡åˆ°å…·ä½“é—®é¢˜ï¼Œæ¯”å¦‚æ•°æ®é¢„å–çš„é€»è¾‘ï¼ŒçŠ¶æ€ç®¡ç†åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„åŒæ­¥ï¼Œæˆ–è€…æ€§èƒ½ç“¶é¢ˆçš„æ’æŸ¥ã€‚ä¸è¿‡å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µæ¥è§£ç­”ï¼Œä½†åœ¨è¿™ä¸ªå›ç­”ä¸­éœ€è¦è¦†ç›–ä¸»è¦çš„ç—›ç‚¹ã€‚
>
> 



æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆServer-Side Rendering, SSRï¼‰æ˜¯ä¸ºè§£å†³ä¼ ç»Ÿå•é¡µåº”ç”¨ï¼ˆSPAï¼‰**é¦–å±åŠ è½½ç™½å±æ—¶é—´é•¿**å’Œ**SEOä¸å‹å¥½**ç­‰é—®é¢˜è€Œè¯ç”Ÿçš„æ ¸å¿ƒæŠ€æœ¯ã€‚ä»¥ä¸‹æ˜¯æ·±åº¦è§£æä¸å®è·µæŒ‡å—ï¼š

---

### â–SSR æŠ€æœ¯åŸç†å‰–æ  
#### 1. **ä¸ä¼ ç»Ÿå®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰å·®å¼‚**  
```bash  
# CSRæµç¨‹ï¼ˆå…¸å‹React/Vueåº”ç”¨ï¼‰  
æµè§ˆå™¨è¯·æ±‚ â†’ ç©ºç™½HTML â†’ ä¸‹è½½JSåŒ… â†’ æ‰§è¡Œæ¡†æ¶ â†’ æ¸²æŸ“é¡µé¢  

# SSRæµç¨‹ï¼ˆä»¥Next.jsä¸ºä¾‹ï¼‰  
æµè§ˆå™¨è¯·æ±‚ â†’ æœåŠ¡ç«¯æ‰§è¡ŒReact â†’ ç”Ÿæˆå®Œæ•´HTML â†’ å‘é€é¢„æ¸²æŸ“é¡µé¢  
          â†’ å®¢æˆ·ç«¯"æ³¨æ°´"(Hydration) â†’ æ¥ç®¡äº¤äº’  
```

#### 2. **è¿è¡Œæœºåˆ¶æ ¸å¿ƒæ­¥éª¤**  
1. **è¯·æ±‚æ‹¦æˆª**  
   ```js  
   // Node.jsæœåŠ¡ç«¯è·¯ç”±ç¤ºä¾‹  
   server.get("*", async (req, res) => {  
     const html = await renderToString(<App url={req.url} />);  
     res.send(`<!DOCTYPE html>${html}`);  
   });  
   ```  
2. **æ•°æ®é¢„å–**  
   - åœ¨æœåŠ¡ç«¯é€šè¿‡`getServerSideProps`è·å–åŠ¨æ€æ•°æ®  
   - åŒæ­¥æ³¨å…¥åˆ°HTMLçš„`<script>`æ ‡ç­¾ä¸­é˜²æ­¢å®¢æˆ·ç«¯äºŒæ¬¡è¯·æ±‚  
   ```js  
   export async function getServerSideProps(context) {  
     const data = await fetch('https://api/data');  
     return { props: { data } };  
   }  
   ```  
3. **æ³¨æ°´ï¼ˆHydrationï¼‰**  
   - å®¢æˆ·ç«¯JSå°†é™æ€HTMLè½¬æ¢ä¸ºå¯äº¤äº’DOM  
   - Reactæ¯”å¯¹æœåŠ¡ç«¯ç”Ÿæˆçš„DOMï¼Œé¿å…é‡å¤æ¸²æŸ“  

---

### â–SSR æ€§èƒ½ä¼˜åŒ–ç­–ç•¥  
#### 1. **æµå¼æ¸²æŸ“ï¼ˆStreaming SSRï¼‰**  
![](https://nextjs.org/static/images/learn/foundations/server-rendering-with-streaming.png)  
```js  
// Next.js 13+ App Routerå¯ç”¨  
async function Page() {  
  const data = await fetchData();  
  return (  
    <Suspense fallback={<Loading />}>  
      <Component data={data} />  
    </Suspense>  
  );  
}  
```  
- **ä¼˜åŠ¿**ï¼šé¦–å­—èŠ‚æ—¶é—´ï¼ˆTTFBï¼‰é™ä½ **40%+**  
- **æ•ˆæœ**ï¼šç”¨æˆ·å¯çœ‹åˆ°éƒ¨åˆ†å†…å®¹çš„æ—¶é—´æå‰è‡³ **300ms** ä»¥å†…  

#### 2. **ç»„ä»¶çº§ç¼“å­˜æ¶æ„**  
| ç¼“å­˜ç­–ç•¥ | å®ç°æ–¹å¼ | é€‚ç”¨åœºæ™¯ |  
|---------|--------|---------|  
| CDNç¼“å­˜ | `Cache-Control: public, max-age=3600` | é™æ€åŒ–è·¯ç”±é¡µé¢ |  
| å†…å­˜ç¼“å­˜ | ä½¿ç”¨Rediså­˜å‚¨æ¸²æŸ“è®¡ç®—ç»“æœ | é«˜é¢‘åŠ¨æ€é¡µé¢ |  
| è¾¹ç¼˜ç¼“å­˜ | Vercel/Netlifyçš„ISRå¢é‡é™æ€å†ç”Ÿ | æ··åˆå‹å†…å®¹ |  

**ä»£ç ç¤ºä¾‹**ï¼š  
```js  
import { unstable_cache } from 'next/cache';  

const getData = unstable_cache(  
  async () => fetch('https://api/data'),  
  ['data-key'],  
  { revalidate: 60 }  
);  
```

---

### â–ç”Ÿäº§ç¯å¢ƒè‡´å‘½é—®é¢˜è§£å†³æ–¹æ¡ˆ  
#### 1. **æ°´åˆä¸åŒ¹é…ï¼ˆHydration Mismatchï¼‰**  
**ç°è±¡**ï¼šæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯æ¸²æŸ“DOMç»“æ„ä¸ä¸€è‡´å¯¼è‡´æ§åˆ¶å°è­¦å‘Š  
**æ ¹å› **ï¼š  
- ä½¿ç”¨æµè§ˆå™¨ç‰¹æœ‰APIï¼ˆå¦‚`window`ï¼‰æœªåšç¯å¢ƒåˆ¤æ–­  
- æ—¶é—´ç›¸å…³æ“ä½œæ—¶åŒºæœªç»Ÿä¸€  

**ä¿®å¤ä»£ç **ï¼š  
```js  
// é”™è¯¯ âŒ  
const time = new Date().toLocaleString();  

// æ­£ç¡® âœ…  
const getServerTime = () => {  
  if (typeof window === 'undefined') {  
    // æœåŠ¡ç«¯ä½¿ç”¨å›ºå®šæ—¶åŒº  
    return new Date().toISOString();  
  } else {  
    // å®¢æˆ·ç«¯ä½¿ç”¨æœ¬åœ°æ—¶åŒº  
    return new Date().toLocaleString();  
  }  
}  
```

#### 2. **å†…å­˜æ³„æ¼ç›‘æ§**  
```js  
// ç›‘æµ‹æœåŠ¡ç«¯å†…å­˜å¢é•¿  
const heapUsed = process.memoryUsage().heapUsed;  
setInterval(() => {  
  console.log(`Memory usage: ${heapUsed / 1024 / 1024} MB`);  
}, 5000);  

// ä½¿ç”¨--inspectå‚æ•°å¯åŠ¨Node.jsè¿›è¡Œå †å¿«ç…§åˆ†æ  
```

---

### â–SSR æŠ€æœ¯é€‰å‹å¯¹æ¯”  
| æ¡†æ¶       | æ ¸å¿ƒä¼˜åŠ¿                          | é€‚ç”¨åœºæ™¯               |  
|------------|-----------------------------------|-----------------------|  
| Next.js    | å¼€ç®±å³ç”¨ã€Vercelæ·±åº¦é›†æˆ          | å…¨æ ˆåº”ç”¨ã€å¿«é€Ÿè¿­ä»£     |  
| Nuxt.js    | Vueç”Ÿæ€å®Œå–„ã€æ¨¡å—åŒ–               | VueæŠ€æœ¯æ ˆã€ä¼ä¸šçº§åå°  |  
| Angular Universal | å¼ºç±»å‹æ”¯æŒã€å®˜æ–¹æ–¹æ¡ˆ       | å·²æœ‰Angularé¡¹ç›®æ”¹é€     |  
| Remix      | åµŒå¥—è·¯ç”±æ•°æ®æµã€è¾¹ç¼˜éƒ¨ç½²ä¼˜åŒ–       | é«˜åŠ¨æ€äº¤äº’å‹åº”ç”¨       |  

---

### â–å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†åˆ—è¡¨é¡µ SSR ä¼˜åŒ–å®å½•  
#### 1. **åŸå§‹æŒ‡æ ‡ç—›ç‚¹**  
- é¦–å±å®Œå…¨åŠ è½½ï¼š**4.2ç§’**  
- SEOæ”¶å½•ç‡ï¼š**62%**  

#### 2. **ä¼˜åŒ–æªæ–½**  
**æ­¥éª¤ä¸€ï¼šæ•°æ®å±‚æ”¹é€ **  
```js  
// APIå“åº”æ—¶é—´ä¼˜åŒ–SSRå…³é”®è·¯å¾„  
async function fetchProducts() {  
  const cache = await getRedisCache('products');  
  if (cache) return cache;  
  const data = await db.query('SELECT * FROM products');  
  setRedisCache('products', data, 60 * 5); // 5åˆ†é’Ÿç¼“å­˜  
  return data;  
}  
```  
**æ­¥éª¤äºŒï¼šæµå¼HTMLåˆ†å—**  
```html  
<!-- ä¼˜å…ˆè¾“å‡ºå¤´éƒ¨ -->  
<head>...</head>  
<body>  
   <div id="header"></div>  
   <!-- Suspenseè¾¹ç•Œåˆ†å— -->  
   <div id="product-list" data-server-rendered="true">  
     {{ streaming_html_chunks }}  
   </div>  
```  

#### 3. **æœ€ç»ˆæˆæ•ˆ**  
| æŒ‡æ ‡         | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡å¹…åº¦ |  
|--------------|--------|--------|---------|  
| LCP          | 3.8s   | 1.1s   | 71%     |  
| TTI          | 4.5s   | 1.9s   | 58%     |  
| Googleæ”¶å½•ç‡ | 62%    | 98%    | +36%    |  

---

### â–SSR æœªæ¥æ¼”è¿›æ–¹å‘  
1. **React Server Components (RSC)**  
   - ç»„ä»¶çº§æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå®ç°0å®¢æˆ·ç«¯Bundle  
   ```js  
   // Server Componentä¸éœ€è¦å‘é€åˆ°å®¢æˆ·ç«¯  
   async function UserProfile() {  
     const user = await db.user.findUnique();  
     return <div>{user.name}</div>;  
   }  
   ```  
2. **è¾¹ç¼˜è®¡ç®—æ¸²æŸ“**  
   - ä½¿ç”¨Cloudflare Workers/Vercel Edgeåœ¨å°±è¿‘CDNèŠ‚ç‚¹æ‰§è¡ŒSSR  
   ```js  
   export const config = {  
     runtime: 'edge' // Next.jsè¾¹ç¼˜è¿è¡Œæ—¶  
   };  
   ```  

---

**æ˜¯å¦é€‰æ‹©SSRçš„å†³ç­–æ ‘**ï¼š  
```mermaid  
graph TD  
A[é¡¹ç›®æ˜¯å¦éœ€è¦SEOæ”¯æŒ] -->|æ˜¯| B[æ•°æ®æ˜¯å¦é«˜åº¦åŠ¨æ€]  
A -->|å¦| C[ä½¿ç”¨çº¯CSRæ–¹æ¡ˆ]  
B -->|æ˜¯| D[é‡‡ç”¨SSR+å®¢æˆ·ç«¯Hydration]  
B -->|å¦| E[ä½¿ç”¨SSGé™æ€ç”Ÿæˆ]  
```  

é€‰æ‹©SSRåº”å…·å¤‡æ¸…æ™°çš„æ€§èƒ½ç›‘æ§ä½“ç³»å’ŒæœåŠ¡å™¨æ‰©å®¹é¢„æ¡ˆï¼Œå»ºè®®ä¸­å°é¡¹ç›®ä¼˜å…ˆä½¿ç”¨Next.js/Nuxt.jsç­‰æ¡†æ¶é¿å…é‡å¤é€ è½®å­ã€‚

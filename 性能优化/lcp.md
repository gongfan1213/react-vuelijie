> ğŸ’­ å¥½çš„ï¼Œæˆ‘æ¥æ€è€ƒä¸€ä¸‹ç”¨æˆ·çš„é—®é¢˜ã€‚ç”¨æˆ·é—®çš„æ˜¯LCPæ—¶é—´å¦‚ä½•è®¡ç®—ä»¥åŠå¦‚ä½•ä½¿ç”¨PerformanceObserverè¿›è¡ŒåŸ‹ç‚¹ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®ä¿è‡ªå·±æ­£ç¡®ç†è§£äº†LCPçš„æ¦‚å¿µã€‚LCPï¼Œä¹Ÿå°±æ˜¯æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´ï¼Œæ˜¯è¡¡é‡ç½‘é¡µåŠ è½½æ€§èƒ½çš„é‡è¦æŒ‡æ ‡ï¼Œå®ƒä»£è¡¨çš„æ˜¯é¡µé¢ä¸­æœ€å¤§çš„å†…å®¹å…ƒç´ ä½•æ—¶å‡ºç°åœ¨å±å¹•ä¸Šã€‚è¿™å¯¹ç”¨æˆ·ä½“éªŒæ¥è¯´éå¸¸å…³é”®ï¼Œå› ä¸ºç”¨æˆ·å¸Œæœ›å°½å¿«çœ‹åˆ°æœ‰ç”¨çš„å†…å®¹ã€‚
>
> æ¥ä¸‹æ¥ï¼Œç”¨æˆ·æåˆ°ä½¿ç”¨PerformanceObserveræ¥åŸ‹ç‚¹ã€‚è¿™æ„å‘³ç€ä»–ä»¬å¯èƒ½éœ€è¦åœ¨ä»£ç ä¸­ç›‘å¬LCPäº‹ä»¶ï¼Œå¹¶è®°å½•ç›¸å…³çš„æ—¶é—´æ•°æ®ï¼Œå¯èƒ½ç”¨äºä¸ŠæŠ¥åˆ°ç›‘æ§ç³»ç»Ÿã€‚æˆ‘éœ€è¦å›é¡¾å¦‚ä½•ä½¿ç”¨PerformanceObserver APIï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹LCPçš„éƒ¨åˆ†ã€‚
>
> é¦–å…ˆï¼Œæˆ‘éœ€è¦å›å¿†LCPçš„å®šä¹‰å’Œè®¡ç®—æ–¹å¼ã€‚æ ¹æ®Googleçš„æ–‡æ¡£ï¼ŒLCPçš„æ—¶é—´ç‚¹æ˜¯æŒ‡é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­ï¼Œæœ€å¤§çš„å›¾åƒã€è§†é¢‘æˆ–å—çº§æ–‡æœ¬å…ƒç´ ï¼ˆå¦‚æ®µè½ï¼‰å®Œæˆæ¸²æŸ“çš„æ—¶é—´ã€‚è¿™ä¸ªå…ƒç´ å¯èƒ½ä¼šåœ¨åŠ è½½è¿‡ç¨‹ä¸­å˜åŒ–ï¼Œæµè§ˆå™¨ä¼šæŒç»­ç›‘æ§ç›´åˆ°é¡µé¢é¦–æ¬¡å‘ˆç°åçš„æŸä¸ªæ—¶é—´ç‚¹ï¼Œé€šå¸¸æ˜¯ç”¨æˆ·é¦–æ¬¡äº¤äº’ä¹‹å‰ã€‚
>
> ç„¶åæ˜¯PerformanceObserverçš„ç”¨æ³•ã€‚è®°å¾—PerformanceObserveræ˜¯ç”¨äºè§‚å¯Ÿæ€§èƒ½æ¡ç›®çš„ï¼Œå½“æŸä¸ªæ€§èƒ½æ¡ç›®è¢«è®°å½•æ—¶ï¼Œä¼šè§¦å‘å›è°ƒå‡½æ•°ã€‚å¯¹äºLCPï¼Œéœ€è¦ä½¿ç”¨ç‰¹å®šçš„entryTypeï¼Œå³'largest-contentful-paint'ã€‚éœ€è¦åˆ›å»ºä¸€ä¸ªPerformanceObserverå®ä¾‹ï¼Œå¹¶æ³¨å†Œè¿™ä¸ªentryTypeï¼Œç„¶ååœ¨å›è°ƒä¸­å¤„ç†LCPçš„æ•°æ®ã€‚
>
> ä½†æ˜¯éœ€è¦è€ƒè™‘çš„æ˜¯ï¼ŒLCPçš„æ¡ç›®å¯èƒ½ä¼šå¤šæ¬¡ä¸ŠæŠ¥ï¼Œå› ä¸ºéšç€é¡µé¢åŠ è½½ï¼Œæœ€å¤§çš„å†…å®¹å…ƒç´ å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚ä¾‹å¦‚ï¼Œä¸€å¼€å§‹å¯èƒ½æ˜¯ä¸€ä¸ªè¾ƒå¤§çš„å›¾ç‰‡ï¼Œåæ¥è¢«å¦ä¸€ä¸ªæ›´å¤§çš„è§†é¢‘å–ä»£ï¼Œæ‰€ä»¥éœ€è¦å–æœ€åä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ¡ç›®ä½œä¸ºæœ€ç»ˆçš„LCPå€¼ã€‚
>
> ç„¶åéœ€è¦è€ƒè™‘çš„æ˜¯å¦‚ä½•ç¡®ä¿åœ¨é¡µé¢éšè—å‰ï¼ˆæ¯”å¦‚ç”¨æˆ·åˆ‡åˆ°å…¶ä»–æ ‡ç­¾é¡µï¼‰æ­£ç¡®åœ°æ•è·åˆ°æœ€æ–°çš„LCPå€¼ã€‚å› æ­¤å¯èƒ½éœ€è¦ç›‘å¬é¡µé¢çš„visibilitychangeäº‹ä»¶ï¼Œåœ¨é¡µé¢éšè—æ—¶ä¸»åŠ¨è§¦å‘ä¸€æ¬¡LCPçš„ä¸ŠæŠ¥ã€‚
>
> æ­¤å¤–ï¼Œéœ€è¦æ³¨æ„å…¼å®¹æ€§é—®é¢˜ã€‚å¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒLCPå’ŒPerformanceObserverï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­éœ€è¦åšèƒ½åŠ›æ£€æµ‹ï¼Œé¿å…åœ¨ä¸æ”¯æŒçš„æµè§ˆå™¨ä¸­æŠ¥é”™æˆ–æ‰§è¡Œæ— æ•ˆæ“ä½œã€‚
>
> æ¥ä¸‹æ¥çš„æ­¥éª¤å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š
>
> 1. åˆ›å»ºä¸€ä¸ªPerformanceObserverå®ä¾‹ï¼Œç›‘å¬'largest-contentful-paint'ç±»å‹çš„æ¡ç›®ã€‚
>
> 2. åœ¨å›è°ƒå‡½æ•°ä¸­æ”¶é›†æ‰€æœ‰çš„LCPæ¡ç›®ï¼Œè®°å½•æœ€å¤§çš„é‚£ä¸ªã€‚
>
> 3. è€ƒè™‘é¡µé¢æ˜¯å¦å¯èƒ½åœ¨åŠ è½½è¿‡ç¨‹ä¸­æœ‰æ›´æ™šçš„LCPæ›´æ–°ï¼Œå¦‚åœ¨ç”¨æˆ·äº¤äº’å‰æœ€åä¸€æ¬¡çš„æ¡ç›®å³ä¸ºæœ€ç»ˆç»“æœã€‚
>
> 4. é€šè¿‡performance.getEntriesByName('largest-contentful-paint')è·å–æ‰€æœ‰LCPæ¡ç›®ã€‚
>
> 5. è€ƒè™‘åœ¨é¡µé¢å³å°†å¸è½½æˆ–è€…éšè—å‰å‘é€LCPæ•°æ®ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚
>
> è¿˜éœ€è¦æ³¨æ„ï¼Œæµè§ˆå™¨è‡ªåŠ¨æ”¶é›†çš„LCPæŒ‡æ ‡æœ‰ä¸€ä¸ªé»˜è®¤çš„å¤„ç†æ–¹å¼ï¼Œä½†é€šè¿‡PerformanceObserverå¯ä»¥æ›´çµæ´»åœ°è·å–è¿™äº›æ•°æ®ï¼Œå¹¶æ ¹æ®éœ€è¦è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚ä¸ŠæŠ¥åˆ°åç«¯è¿›è¡Œåˆ†æã€‚
>
> æ­¤å¤–ï¼Œç”¨æˆ·å¯èƒ½æ˜¯æƒ³äº†è§£å…·ä½“çš„å®ç°ä»£ç ï¼Œå³å¦‚ä½•ç¼–å†™è¿™æ®µPerformanceObserverçš„é€»è¾‘ã€‚ä¹Ÿéœ€è¦è§£é‡Šé€‰é¡¹ä¸­å¯èƒ½ç”¨åˆ°çš„bufferedå±æ€§ï¼Œè®¾ç½®ä¸ºtrueå¯ä»¥åœ¨è§‚å¯Ÿå™¨æ³¨å†Œæ—¶ç«‹å³è·å–å·²ç»å­˜åœ¨çš„æ€§èƒ½æ¡ç›®ã€‚
>
> å¯èƒ½è¿˜éœ€è¦æåˆ°LCPçš„æ—¶é—´é˜ˆå€¼ï¼Œå¦‚è‰¯å¥½çš„LCPåº”è¯¥æ§åˆ¶åœ¨2.5ç§’ä»¥å†…ï¼Œè¿™éƒ¨åˆ†å¯èƒ½æ˜¯åœ¨ç›‘æ§æ—¶éœ€è¦å…³æ³¨çš„æŒ‡æ ‡ã€‚
>
> åœ¨åŸ‹ç‚¹æ–¹é¢ï¼Œé™¤äº†è·å–LCPæ—¶é—´å¤–ï¼Œå¯èƒ½è¿˜éœ€è¦è®°å½•å…¶ä»–ç›¸å…³ä¿¡æ¯ï¼Œæ¯”å¦‚LCPå…ƒç´ çš„å…·ä½“ç±»å‹ï¼ˆæ˜¯å›¾ç‰‡ã€æ–‡æœ¬è¿˜æ˜¯å…¶ä»–ï¼‰ï¼Œè¯¥å…ƒç´ çš„å¤§å°æˆ–URLï¼Œä»¥ä¾¿åˆ†æå½±å“LCPæ—¶é—´çš„å› ç´ ã€‚
>
> ä½†ç”¨æˆ·çš„é—®é¢˜ä¸»è¦é›†ä¸­åœ¨è®¡ç®—å’ŒåŸ‹ç‚¹ï¼Œæ‰€ä»¥è¦èšç„¦åœ¨ä»£ç å®ç°å’ŒPerformanceObserverçš„ä½¿ç”¨ä¸Šã€‚å¯èƒ½è¿˜æ¶‰åŠå¦‚ä½•å°†æ”¶é›†åˆ°çš„LCPæ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼Œä½†ç”¨æˆ·æåˆ°çš„åŸ‹ç‚¹å¯èƒ½ä»…æŒ‡å¦‚ä½•ç”¨PerformanceObserverç›‘å¬å¹¶è®°å½•è¿™ä¸ªå€¼ï¼Œä¸ä¸€å®šéœ€è¦è¯¦ç»†è¯´æ˜æ±‡æŠ¥æœºåˆ¶ã€‚
>
> æ€»ç»“ä¸‹æ¥ï¼Œéœ€è¦åˆ†æ­¥éª¤è§£é‡Šå¦‚ä½•åˆ›å»ºPerformanceObserverå®ä¾‹ã€å¤„ç†å›è°ƒã€é€‰å–æœ€ç»ˆçš„LCPå€¼ï¼Œå¹¶ç»“åˆé¡µé¢ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ç¡®ä¿æ•°æ®è¢«æ­£ç¡®æ•è·ã€‚åŒæ—¶è¦æ³¨æ„å…¼å®¹æ€§å¤„ç†å’Œå¯èƒ½çš„å¼‚å¸¸æƒ…å†µã€‚
>
> éœ€è¦éªŒè¯è‡ªå·±çš„æ€è€ƒæ˜¯å¦æ­£ç¡®ï¼Œæ¯”å¦‚PerformanceObserveræ˜¯å¦çœŸçš„èƒ½å¤šæ¬¡è§¦å‘å›è°ƒï¼Œæ¯æ¬¡é¡µé¢ä¸­æœ€æ–°çš„æœ€å¤§å…ƒç´ å‡ºç°æ—¶éƒ½è®°å½•ä¸€ä¸ªæ¡ç›®ï¼Œå› æ­¤åœ¨å›è°ƒä¸­è¦æ¯”è¾ƒå½“å‰çš„LCPæ¡ç›®å€¼ï¼Œä¿ç•™æœ€å¤§çš„é‚£ä¸ªä½œä¸ºæœ€ç»ˆç»“æœã€‚ä¹Ÿå¯èƒ½éœ€è¦åœ¨domå…ƒç´ ç¨³å®šåå–æœ€åä¸€ä¸ªæœ‰æ•ˆçš„LCPæ¡ç›®ã€‚
>
> è¿˜è¦æ³¨æ„ï¼Œæ ¹æ®Web Vitalçš„å®šä¹‰ï¼ŒLCPçš„æµ‹é‡æœ€æ™šæ˜¯åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡äº¤äº’ï¼ˆå¦‚ç‚¹å‡»ã€æ»šåŠ¨ç­‰ï¼‰ä¹‹å‰ï¼Œæ‰€ä»¥åœ¨ä»£ç å¤„ç†æ—¶ï¼Œä¸€æ—¦ç”¨æˆ·å‘ç”Ÿäº¤äº’ï¼Œåˆ™åœæ­¢ç»§ç»­ç›‘å¬LCPçš„å˜åŒ–ï¼Œè¿™æ ·å¯ä»¥é¿å…åœ¨ç”¨æˆ·å·²ç»ä¸é¡µé¢äº’åŠ¨åçš„å˜åŠ¨å½±å“LCPçš„æµ‹é‡ã€‚
>
> è¿™éƒ¨åˆ†å¤„ç†å¯èƒ½éœ€è¦ç›‘å¬å¦‚mousedownã€keydownç­‰äº‹ä»¶ï¼Œå½“è¿™äº›äº‹ä»¶è§¦å‘æ—¶ï¼Œç«‹å³å–å½“å‰çš„LCPå€¼ï¼Œå¹¶æ–­å¼€PerformanceObserverçš„è§‚å¯Ÿã€‚
>
> ä¸è¿‡ï¼Œåœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œå¯èƒ½å·²ç»è‡ªåŠ¨å¤„ç†è¿™ç§æƒ…å†µï¼Œå³åœ¨ç”¨æˆ·äº¤äº’ååœæ­¢æ›´æ–°LCPã€‚ä¸è¿‡ä¸ºç¡®ä¿å‡†ç¡®æ€§ï¼Œå¯èƒ½åœ¨ä»£ç ä¸­éœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚
>
> ç»¼åˆæ‰€æœ‰è¿™äº›è€ƒè™‘ï¼Œç„¶åç»™å‡ºä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼ŒåŒ…æ‹¬å¦‚ä½•è®¾ç½®PerformanceObserverï¼Œå¦‚ä½•å¤„ç†ç”¨æˆ·äº¤äº’äº‹ä»¶ï¼Œå¦‚ä½•è·å–æœ€ç»ˆçš„LCPå€¼ï¼Œå¹¶å¯èƒ½ä¸ŠæŠ¥æ•°æ®ã€‚
>
> ç°åœ¨ç»“åˆä»¥ä¸Šåˆ†æï¼Œå‡†å¤‡ä¸€ä¸ªç»“æ„åŒ–çš„å›ç­”ï¼ŒåŒ…æ‹¬æ­¥éª¤å’Œç¤ºä¾‹ä»£ç ï¼ŒæŒ‡å‡ºéœ€è¦æ³¨æ„çš„å…³é”®ç‚¹ï¼Œå¦‚å–æ¶ˆè§‚å¯Ÿçš„æ—¶é—´ã€å¤„ç†å¤šæ¬¡å›è°ƒç­‰ã€‚
>
> 



**LCPï¼ˆLargest Contentful Paintï¼‰æ—¶é—´çš„è®¡ç®—ä¸ `PerformanceObserver` åŸ‹ç‚¹å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š**

---

### ä¸€ã€LCP çš„ **æµ‹é‡åŸç†**
LCP è¡¨ç¤ºé¡µé¢**æœ€å¤§å†…å®¹å…ƒç´ **ï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ã€å—çº§æ–‡æœ¬ï¼‰æ¸²æŸ“å®Œæˆçš„æ—¶é—´ç‚¹ï¼Œå…¶è®¡ç®—ä¾æ®ä»¥ä¸‹è§„åˆ™ï¼š
1. **å€™é€‰å…ƒç´ **ï¼š`<img>`, `<video>`, å—çº§å…ƒç´ ï¼ˆå¦‚`<div>`åŒ…å«æ–‡æœ¬èŠ‚ç‚¹ï¼‰ã€‚
2. **æœ‰æ•ˆæ—¶é—´åŒºé—´**ï¼šä»é¡µé¢å¼€å§‹åŠ è½½åˆ°**é¦–æ¬¡ç”¨æˆ·äº¤äº’**ï¼ˆç‚¹å‡»ã€æ»šåŠ¨ï¼‰å‰æˆ–é¡µé¢éšè—å‰ã€‚
3. **æœ€ç»ˆå€¼**ï¼šå–æ‰€æœ‰å€™é€‰å…ƒç´ ä¸­æ¸²æŸ“æ—¶é—´æœ€å¤§å€¼ã€‚

---

### äºŒã€ **ä½¿ç”¨ `PerformanceObserver` ç›‘å¬ LCP**
é€šè¿‡ `PerformanceObserver` å®æ—¶ç›‘å¬ `largest-contentful-paint` ç±»å‹æ¡ç›®ï¼š

```javascript
// å®šä¹‰å˜é‡è®°å½•æœ€å¤§ LCP å€¼
let maxLCP = 0;

try {
  const observer = new PerformanceObserver((entryList) => {
    // è·å–æœ€æ–°çš„ LCP æ¡ç›®
    const entries = entryList.getEntries();
    const latestEntry = entries[entries.length - 1];
    maxLCP = Math.max(maxLCP, latestEntry.renderTime || latestEntry.loadTime);
  });

  // ç›‘å¬ LCP æ¡ç›®ï¼Œbuffered: true è¡¨ç¤ºç«‹å³è¯»å–å†å²æ•°æ®
  observer.observe({
    type: 'largest-contentful-paint',
    buffered: true
  });
} catch (e) {
  // æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†
  console.error('PerformanceObserver not supported:', e);
}
```

#### **å…³é”®é€»è¾‘**ï¼š
- **å¤šæ¬¡è§¦å‘**ï¼šå½“æ›´å¤§å…ƒç´ æ¸²æŸ“æ—¶ï¼Œä¼šå¤šæ¬¡è§¦å‘å›è°ƒã€‚
- **æœ€ç»ˆåˆ¤å®š**ï¼šå–`maxLCP`æœ€å¤§å€¼ï¼ˆå®é™…å€¼ä»¥æœ€åä¸€æ¬¡æœ‰æ•ˆæ¡ç›®ä¸ºå‡†ï¼‰ã€‚
- **å€™é€‰å…ƒç´ å±æ€§**ï¼šå¯é€šè¿‡ `entry.element` è®¿é—®è§¦å‘ LCP çš„å…ƒç´ ã€‚

---

### ä¸‰ã€ **ç”¨æˆ·äº¤äº’æˆªæ–­ä¸æœ€ç»ˆä¸ŠæŠ¥**
ä¸ºä¿è¯ LCP ä¸å› ç”¨æˆ·äº¤äº’åçš„å†…å®¹æ›´æ–°è¢«é”™è¯¯è¦†ç›–ï¼Œéœ€åœ¨ç”¨æˆ·é¦–æ¬¡äº¤äº’æ—¶å†»ç»“ LCPï¼š

```javascript
// ç›‘å¬ç”¨æˆ·é¦–æ¬¡äº¤äº’ï¼ˆç‚¹å‡»ã€æ»šåŠ¨ã€æŒ‰é”®ï¼‰
['click', 'keydown', 'scroll'].forEach((event) => {
  window.addEventListener(event, () => {
    // è®°å½•æœ€ç»ˆ LCP å¹¶åœæ­¢ç›‘å¬
    reportLCP(maxLCP);
    observer.disconnect();
  }, { once: true, capture: true });
});
```

---

### å››ã€ **åœ¨é¡µé¢éšè—å‰å¼ºåˆ¶ä¸ŠæŠ¥**
è‹¥æœªè§¦å‘ç”¨æˆ·äº¤äº’ä½†é¡µé¢å³å°†å…³é—­ï¼ˆå¦‚æµè§ˆå™¨æ ‡ç­¾åˆ‡æ¢ï¼‰ï¼Œä½¿ç”¨ `visibilitychange` å…œåº•ä¸ŠæŠ¥ï¼š

```javascript
document.addEventListener('visibilitychange', () => {
  if (document.visibilityState === 'hidden') {
    // å¼ºåˆ¶ä¸ŠæŠ¥
    reportLCP(maxLCP);
    observer.disconnect();
  }
});
```

---

### äº”ã€ **æ•°æ®å®Œæ•´æ€§ä¸å…¼å®¹æ€§ä¼˜åŒ–**
#### 1. **å…œåº•è·å– LCP æ¡ç›®**ï¼ˆå…¼å®¹æ™®é€š `performance` APIï¼‰
```javascript
const lcpEntries = performance.getEntriesByName('largest-contentful-paint');
if (lcpEntries.length > 0) {
  maxLCP = Math.max(maxLCP, lcpEntries.pop().renderTime);
}
```

#### 2. **å¤„ç†å¼‚æ­¥åŠ è½½å†…å®¹**
è‹¥é¡µé¢å­˜åœ¨åŠ¨æ€æ’å…¥çš„å¤§å†…å®¹ï¼ˆå¦‚æ‡’åŠ è½½å›¾ç‰‡ï¼‰ï¼Œéœ€è®¡ç®—å…¶æ¸²æŸ“æ—¶é—´ï¼š
```javascript
// ç¤ºä¾‹ï¼šåŠ¨æ€åŠ è½½å¤§å›¾åæ‰‹åŠ¨ä¸ŠæŠ¥ LCP
const img = new Image();
img.src = 'large-image.jpg';
img.onload = () => {
  const perfEntry = performance.getEntriesByName('largest-contentful-paint').pop();
  if (perfEntry) {
    reportLCP(perfEntry.renderTime);
  }
};
```

#### 3. **æ¨èåŸ‹ç‚¹æ—¶æœº**
```javascript
// åœ¨é¡µé¢ç¨³å®šåä¸ŠæŠ¥ï¼ˆå¦‚ onload äº‹ä»¶ï¼‰
window.addEventListener('load', () => {
  // å»¶è¿Ÿç¡®ä¿æ‰€æœ‰ LCP æ•°æ®å°±ç»ª
  setTimeout(() => reportLCP(maxLCP), 2000);
});
```

---

### å…­ã€ **æ•°æ®åˆ†æå»ºè®®**
ä¸ŠæŠ¥ LCP æ—¶ï¼Œé™„åŠ ä»¥ä¸‹å…ƒæ•°æ®æé«˜å¯åˆ†ææ€§ï¼š
```javascript
function reportLCP(lcpValue) {
  const entry = performance.getEntriesByName('largest-contentful-paint').pop();
  const analyticsData = {
    lcp: lcpValue.toFixed(2),
    elementType: entry?.element?.tagName.toLowerCase() || 'unknown', // å…ƒç´ ç±»å‹ï¼ˆimgã€div ç­‰ï¼‰
    elementSrc: entry?.element?.src || '', // å›¾ç‰‡ã€è§†é¢‘çš„ URLï¼ˆè‹¥å­˜åœ¨ï¼‰
    elementText: entry?.element?.textContent?.slice(0, 100) || '', // æ–‡æœ¬å†…å®¹æ‘˜è¦
    rating: lcpValue <= 2500 ? 'good' : lcpValue <= 4000 ? 'needs-improvement' : 'poor' // æŒ‡æ ‡è¯„åˆ†
  };
  navigator.sendBeacon('/analytics', JSON.stringify(analyticsData));
}
```

---

### ä¸ƒã€ **æ€»ç»“æµç¨‹å›¾**
```
 é¡µé¢åŠ è½½ â†’ å»ºç«‹ PerformanceObserver ç›‘å¬ LCP 
    â†“ 
ç”¨æˆ·äº¤äº’/é¡µé¢éšè— â†’ å†»ç»“ LCP æ•°æ® â†’ ä¸ŠæŠ¥åŸ‹ç‚¹æ•°æ®
    â†“ 
å…œåº•å¤„ç†ï¼šé¡µé¢ onload äº‹ä»¶å 2s â†’ æœ€ç»ˆä¸ŠæŠ¥
```

é€šè¿‡ä¸Šè¿°é€»è¾‘ï¼Œå¯ç²¾å‡†æ•è· **LCP æ—¶é—´** ï¼Œæ»¡è¶³æ€§èƒ½ç›‘æ§éœ€æ±‚ã€‚

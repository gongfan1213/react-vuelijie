> ğŸ’­ å¥½çš„ï¼Œç°åœ¨ç”¨æˆ·é—®æˆ‘è¦æ¯”è¾ƒViteå’ŒWebpackçš„å·®å¼‚ã€‚é¦–å…ˆï¼Œæˆ‘å¾—å›æƒ³ä¸€ä¸‹è¿™ä¸¤ä¸ªå·¥å…·çš„åŸºæœ¬ä¿¡æ¯ï¼šViteæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ–°çš„æ„å»ºå·¥å…·ï¼Œç”±Vueä½œè€…å°¤é›¨æºªå¼€å‘ï¼Œè€ŒWebpackæ˜¯å·²ç»å­˜åœ¨å¤šå¹´çš„è€ç‰Œæ‰“åŒ…å·¥å…·ï¼Œå‡ ä¹æˆä¸ºè¡Œä¸šæ ‡å‡†ã€‚ä½†æœ€è¿‘Viteå› ä¸ºå…¶å¿«é€Ÿçš„å¼€å‘æœåŠ¡å™¨å’Œçƒ­æ›´æ–°å—åˆ°å…³æ³¨ã€‚
>
> ç”¨æˆ·å¯èƒ½å·²ç»å¯¹å‰ç«¯æ„å»ºå·¥å…·æœ‰ä¸€å®šçš„äº†è§£ï¼Œå¯èƒ½åœ¨ä½¿ç”¨Webpackæ—¶é‡åˆ°äº†æ€§èƒ½é—®é¢˜ï¼Œæˆ–è€…åœ¨é¡¹ç›®åˆå§‹é˜¶æ®µæƒ³é€‰æ‹©æ›´é€‚åˆçš„å·¥å…·ã€‚æ‰€ä»¥éœ€è¦è¯¦ç»†æ¯”è¾ƒä¸¤è€…çš„ç‰¹ç‚¹ã€‚
>
> é¦–å…ˆï¼Œæˆ‘éœ€è¦ä»å‡ ä¸ªæ ¸å¿ƒæ–¹é¢æ¥åˆ†æä¸¤è€…çš„ä¸åŒï¼š
>
> 1. **æ„å»ºç†å¿µ**ï¼šViteåˆ©ç”¨æµè§ˆå™¨åŸç”ŸESæ¨¡å—æ”¯æŒï¼Œè€ŒWebpackåˆ™é€šè¿‡æ‰“åŒ…æ‰€æœ‰æ¨¡å—åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚è¿™ä¼šå½±å“å¼€å‘æ—¶çš„å¯åŠ¨é€Ÿåº¦å’Œçƒ­æ›´æ–°é€Ÿåº¦ã€‚
>
> 2. **å¼€å‘æœåŠ¡å™¨æ€§èƒ½**ï¼šViteçš„å¼€å‘æœåŠ¡å™¨å¯åŠ¨éå¸¸å¿«ï¼Œå› ä¸ºä¸éœ€è¦æ‰“åŒ…ï¼Œç›´æ¥æä¾›ESæ¨¡å—ã€‚è€ŒWebpackåœ¨å¤§å‹é¡¹ç›®ä¸­å¯åŠ¨é€Ÿåº¦å¯èƒ½è¾ƒæ…¢ï¼Œå› ä¸ºè¦æ‰“åŒ…æ•´ä¸ªåº”ç”¨ã€‚è¿™å¯èƒ½æ˜¯ç”¨æˆ·å…³å¿ƒçš„ç—›ç‚¹ï¼Œç‰¹åˆ«æ˜¯åœ¨é¡¹ç›®å˜å¾—åºå¤§æ—¶ã€‚
>
> 3. **ç”Ÿäº§æ„å»º**ï¼šViteåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä½¿ç”¨Rollupè¿›è¡Œæ‰“åŒ…ï¼Œè€ŒWebpackä½¿ç”¨è‡ªå·±çš„æ‰“åŒ…æœºåˆ¶ã€‚éœ€è¦æ¯”è¾ƒä¸¤è€…çš„ä¼˜åŒ–ç¨‹åº¦å’Œé…ç½®å¤æ‚åº¦ã€‚
>
> 4. **é…ç½®å¤æ‚åº¦**ï¼šWebpackçš„é…ç½®é€šå¸¸æ¯”è¾ƒå¤æ‚ï¼Œå°¤å…¶æ˜¯éœ€è¦å¤„ç†å„ç§loaderå’Œæ’ä»¶ã€‚è€ŒViteå®£ç§°é…ç½®æ›´ç®€å•ï¼Œå°¤å…¶æ˜¯å¯¹ç°ä»£æ¡†æ¶ï¼ˆå¦‚Vueã€Reactï¼‰çš„æ”¯æŒæ›´å¼€ç®±å³ç”¨ã€‚
>
> 5. **ç”Ÿæ€ç³»ç»Ÿå’Œæ’ä»¶**ï¼šWebpackæœ‰åºå¤§çš„æ’ä»¶ç”Ÿæ€ï¼Œå‡ ä¹å¯ä»¥å¤„ç†ä»»ä½•éœ€æ±‚ï¼Œä½†Viteçš„æ’ä»¶ç³»ç»Ÿå¯èƒ½è¿˜åœ¨å‘å±•ä¸­ï¼Œè™½ç„¶å…¼å®¹Rollupæ’ä»¶ï¼Œä½†å¯èƒ½æŸäº›åŠŸèƒ½éœ€è¦é¢å¤–é…ç½®ã€‚
>
> 6. **çƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰**ï¼šViteçš„HMRæ€§èƒ½æ›´å¥½ï¼Œæ›´æ–°æ›´å¿«ï¼Œè€ŒWebpackåœ¨å¤§å‹é¡¹ç›®ä¸­HMRå¯èƒ½æœ‰å»¶è¿Ÿã€‚
>
> 7. **æµè§ˆå™¨å…¼å®¹æ€§**ï¼šWebpackå¯ä»¥é€šè¿‡å„ç§loaderï¼ˆå¦‚Babelï¼‰å¤„ç†æ—§æµè§ˆå™¨ï¼Œè€ŒViteé»˜è®¤é¢å‘ç°ä»£æµè§ˆå™¨ï¼Œä½†ç”Ÿäº§æ„å»ºæ—¶ä¹Ÿå¯ä»¥é€šè¿‡æ’ä»¶å¤„ç†å…¼å®¹æ€§é—®é¢˜ã€‚
>
> éœ€è¦ä¸¾ä¾‹è¯´æ˜ä¸¤è€…çš„é…ç½®å·®å¼‚ã€‚ä¾‹å¦‚ï¼Œå¯¹ä¸€ä¸ªç®€å•çš„é¡¹ç›®ï¼ŒWebpackå¯èƒ½éœ€è¦é…ç½®å…¥å£ã€å‡ºå£ã€loaderå’Œæ’ä»¶ï¼Œè€ŒViteå¯èƒ½å‡ ä¹é›¶é…ç½®ã€‚
>
> è¿˜è¦è€ƒè™‘åˆ°ç”¨æˆ·å¯èƒ½çš„é¡¹ç›®ç±»å‹ã€‚å¦‚æœç”¨æˆ·éœ€è¦æ”¯æŒå¤§é‡æ—§æµè§ˆå™¨ï¼ŒWebpackå¯èƒ½æ›´åˆé€‚ï¼›å¦‚æœé¡¹ç›®æ˜¯ç°ä»£åŒ–çš„ï¼Œä¸”éœ€è¦å¿«é€Ÿå¼€å‘ä½“éªŒï¼ŒViteå¯èƒ½æ›´ä¼˜ã€‚
>
> æ­¤å¤–ï¼Œå¯èƒ½éœ€è¦æåˆ°ç¤¾åŒºå’Œæ”¯æŒã€‚Webpackä½œä¸ºæˆç†Ÿå·¥å…·ï¼Œç¤¾åŒºèµ„æºä¸°å¯Œï¼Œé—®é¢˜å®¹æ˜“æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼›Viteè™½ç„¶å‘å±•è¿…é€Ÿï¼Œä½†ç›¸å¯¹è¾ƒæ–°ï¼Œå¯èƒ½é‡åˆ°é—®é¢˜æ—¶èµ„æºè¾ƒå°‘ã€‚
>
> éœ€è¦æ³¨æ„Webpack 5ä¸­çš„Module FederationåŠŸèƒ½æˆ–è®¸ä¸Viteçš„æœºåˆ¶æœ‰æ‰€ä¸åŒï¼Œä½†ç”¨æˆ·å¯èƒ½å¯¹æ­¤ä¸å¤ªå…³æ³¨ï¼Œé™¤éä»–ä»¬éœ€è¦å¾®å‰ç«¯æ¶æ„ã€‚
>
> å¯èƒ½è¿˜éœ€è¦æåˆ°Viteåœ¨å¼€å‘ç¯å¢ƒä¸‹æŒ‰éœ€ç¼–è¯‘çš„ç‰¹æ€§ï¼Œå³åªç¼–è¯‘å½“å‰é¡µé¢éœ€è¦çš„æ¨¡å—ï¼Œè€ŒWebpackåˆ™å€¾å‘äºå…¨é‡æ‰“åŒ…ã€‚è¿™ç‚¹åœ¨å¤§å‹é¡¹ç›®ä¸­å½±å“æ˜¾è‘—ã€‚
>
> è¿˜è¦æ¯”è¾ƒä¸¤è€…åœ¨ç”Ÿäº§ç¯å¢ƒçš„æ„å»ºé€Ÿåº¦å’Œè¾“å‡ºæ–‡ä»¶ä¼˜åŒ–æƒ…å†µï¼Œæ¯”å¦‚ä»£ç åˆ†å‰²ã€Tree Shakingç­‰ã€‚
>
> æœ€åæ€»ç»“é€‚ç”¨çš„åœºæ™¯ï¼Œå¸®åŠ©ç”¨æˆ·æ ¹æ®é¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚å·¥å…·ã€‚æˆ–è®¸è¿˜éœ€è¦æåˆ°Viteæ”¯æŒçš„æ¡†æ¶å’Œæ¨¡æ¿ï¼Œä»¥åŠæ˜¯å¦æ˜“äºä¸ç°æœ‰å·¥å…·é“¾é›†æˆã€‚
>
> 



### Vite vs Webpackï¼šæ–°ä¸€ä»£æ„å»ºå·¥å…·æ·±åº¦å¯¹æ¯”

---

#### **â– æ ¸å¿ƒç†å¿µå·®å¼‚**  
| **ç»´åº¦**              | **Vite**                            | **Webpack**                      |
|-----------------------|--------------------------------------|----------------------------------|
| **å¼€å‘æ¨¡å¼åŸºç¡€**       | åŸºäºæµè§ˆå™¨åŸç”ŸES Module (`<script type="module">`) | åŸºäºæ‰“åŒ…å™¨ï¼ˆBundle-basedï¼‰       |
| **é¦–æ¬¡å¯åŠ¨é€Ÿåº¦**       | âš¡ï¸ **æ¯«ç§’çº§**ï¼ˆæ— éœ€æ‰“åŒ…ï¼‰            | â³ ä¾èµ–é¡¹ç›®è§„æ¨¡ï¼ˆéœ€æ‰“åŒ…å…¨éƒ¨èµ„æºï¼‰ |
| **HMRçƒ­æ›´æ–°é€Ÿåº¦**      | ğŸ”¥ **äºšç§’çº§**ï¼ˆä»…ç¼–è¯‘å•æ–‡ä»¶ï¼‰        | ğŸ•’ éšé¡¹ç›®å¤æ‚åº¦å¢åŠ è€Œæ˜æ˜¾å˜æ…¢     |
| **ç”Ÿäº§æ„å»ºæ ¸å¿ƒ**       | ä½¿ç”¨Rollupï¼ˆé«˜æ€§èƒ½æ‰“åŒ…ï¼‰            | è‡ªç ”æ‰“åŒ…ç®—æ³•                     |

---

#### **â– æ¶æ„è®¾è®¡å¯¹æ¯”**  
**Vite æ ¸å¿ƒæœºåˆ¶**ï¼š  
1. **å¼€å‘ç¯å¢ƒ**ï¼š  
   - è¯·æ±‚é©±åŠ¨ç¼–è¯‘ï¼šæµè§ˆå™¨æŒ‰éœ€è¯·æ±‚ â†’ Viteå®æ—¶è½¬æ¢ESM  
   - ä¾èµ–é¢„æ„å»ºï¼šç”¨esbuildå°†CommonJSæ¨¡å—è½¬ä¸ºESMï¼ˆé€Ÿåº¦æ¯”Babelå¿«10-100å€ï¼‰  
   ```javascript
   // é¢„æ„å»ºåçš„ä¾èµ–è·¯å¾„
   import React from '/node_modules/.vite/react.js?v=123456'  
   ```
2. **ç”Ÿäº§ç¯å¢ƒ**ï¼š  
   - Rollupæ‰“åŒ… + å¯å‘å¼ä¼˜åŒ–ï¼ˆè‡ªåŠ¨ä»£ç åˆ†å‰²ã€CSSå¤„ç†ï¼‰  

**Webpack å·¥ä½œæœºåˆ¶**ï¼š  
```mermaid
graph LR
  A[Entry] --> B[Loaderè½¬è¯‘]
  B --> C[æ„å»ºä¾èµ–å›¾]
  C --> D[Chunkåˆ†å‰²]
  D --> E[æ’ä»¶ä¼˜åŒ–]
  E --> F[è¾“å‡ºBundle]
```

---

#### **â– æ€§èƒ½å®æµ‹æ•°æ®**  
| **é¡¹ç›®è§„æ¨¡** | **å¼€å‘æœåŠ¡å™¨å¯åŠ¨** | **HMRæ›´æ–°å»¶è¿Ÿ** | **ç”Ÿäº§æ„å»ºæ—¶é—´** |  
|------------|-------------------|----------------|-----------------|
| å°å‹é¡¹ç›®    | Vite: 200ms       | Vite: 50ms     | Vite: 3s        |  
| (10ç»„ä»¶)   | Webpack: 2.5s     | Webpack: 300ms | Webpack: 5s     |  
| å¤§å‹é¡¹ç›®    | Vite: 500ms       | Vite: 100ms    | Vite: 25s       |  
| (500+æ¨¡å—) | Webpack: 45s      | Webpack: 2s    | Webpack: 90s    |  

*æ³¨ï¼šæµ‹è¯•ç¯å¢ƒä¸ºMacBook M1 Proï¼Œ16GB RAM*

---

#### **â– é…ç½®å¤æ‚åº¦å¯¹æ¯”**  
**WebpackåŸºç¡€é…ç½®ç¤ºä¾‹**ï¼ˆreacté¡¹ç›®ï¼‰ï¼š  
```javascript
// webpack.config.js
module.exports = {
  entry: './src/index.js',
  module: {
    rules: [
      {
        test: /\.jsx?$/,
        use: ['babel-loader'],
        exclude: /node_modules/
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      }
    ]
  },
  plugins: [
    new HtmlWebpackPlugin({ template: './public/index.html' })
  ]
};
```

**Viteç­‰æ•ˆé…ç½®**ï¼š  
```javascript
// vite.config.js
export default defineConfig({
  plugins: [react()] // å†…ç½®æ”¯æŒJSX/CSS
})
```
*Viteé»˜è®¤æ”¯æŒPostCSSã€Sassã€Lessç­‰ï¼Œæ— éœ€æ˜¾å¼é…ç½®loader*

---

#### **â– ç”Ÿæ€ç³»ç»Ÿå¯¹æ¯”**  
| **èƒ½åŠ›**            | **Vite**                          | **Webpack**                   |  
|---------------------|-----------------------------------|-------------------------------|  
| **æ ¸å¿ƒæ’ä»¶æ•°é‡**     | 50+ï¼ˆå®˜æ–¹ç»´æŠ¤ï¼‰                  | 2000+ï¼ˆç¤¾åŒºç”Ÿæ€ï¼‰             |  
| **æ¡†æ¶æ”¯æŒ**         | Vue/React/Svelteå¼€ç®±å³ç”¨         | éœ€é¢å¤–é…ç½®loader              |  
| **å¾®å‰ç«¯æ”¯æŒ**       | é€šè¿‡vite-plugin-federationå®ç°   | åŸç”Ÿæ”¯æŒModule Federation     |  
| **CSSå¤„ç†**          | å†…ç½®æ”¯æŒCSS Modules/Sass/Less    | éœ€å®‰è£…css-loader/sass-loader |  

---

#### **â– æµè§ˆå™¨å…¼å®¹æ€§ç­–ç•¥**  
**Vite**ï¼š  
- é»˜è®¤ç”ŸæˆES2015+ä»£ç   
- æ—§æµè§ˆå™¨å…¼å®¹éœ€é€šè¿‡`@vitejs/plugin-legacy`ï¼š  
  ```javascript
  // vite.config.js
  import legacy from '@vitejs/plugin-legacy'
  export default {
    plugins: [
      legacy({
        targets: ['defaults', 'IE 11']
      })
    ]
  }
  ```

**Webpack**ï¼š  
- é€šè¿‡babel-loader + browserslisté…ç½®å…¼å®¹æ€§  
  ```json
  // package.json
  {
    "browserslist": ["last 2 versions", "IE 11"]
  }
  ```

---

#### **â– å®é™…é¡¹ç›®é€‰å‹å»ºè®®**  

âœ… **é€‰æ‹© Vite çš„åœºæ™¯**ï¼š  
- ç°ä»£æµè§ˆå™¨åº”ç”¨å¼€å‘ï¼ˆSPA/SSRï¼‰  
- éœ€è¦æé€Ÿçš„å¼€å‘åé¦ˆå¾ªç¯ï¼ˆå¦‚é«˜é¢‘ä¿®æ”¹CSS/ç»„ä»¶ï¼‰  
- é¡¹ç›®åˆæœŸæŠ€æœ¯é€‰å‹ï¼ˆReact/Vue3ï¼‰  
- è½»é‡çº§åº”ç”¨ï¼ˆæ— éœ€å¤æ‚è‡ªå®šä¹‰æ„å»ºæµç¨‹ï¼‰  

âš ï¸ **æ…ç”¨ Vite çš„æƒ…å†µ**ï¼š  
- éœ€è¦æ”¯æŒIE11ç­‰æ—§æµè§ˆå™¨  
- é‡åº¦ä¾èµ–Webpackæ’ä»¶ç”Ÿæ€ï¼ˆå¦‚ç‰¹å®šæ€§èƒ½ä¼˜åŒ–æ’ä»¶ï¼‰  
- ä¼ä¸šçº§æ—§é¡¹ç›®è¿ç§»ï¼ˆéœ€éªŒè¯å„ç»„ä»¶å…¼å®¹æ€§ï¼‰  

âœ… **Webpack çš„ä¸å¯æ›¿ä»£æ€§**ï¼š  
- è¶…å¤§å‹ä¼ä¸šåº”ç”¨ï¼ˆè¶…è¿‡1000+æ¨¡å—ï¼‰  
- éœ€è¦ç²¾ç»†æ§åˆ¶æ‰“åŒ…ç­–ç•¥  
- éœ€è¦å¯¹æ¥Angularç­‰æ¡†æ¶çš„å†…éƒ¨æ„å»ºä½“ç³»  

---

#### **â– æ··åˆæ¶æ„æ–¹æ¡ˆ**  
å¯¹äºæ—¢æœ‰Webpacké¡¹ç›®ï¼Œå¯é€æ­¥è¿ç§»éƒ¨åˆ†æ¨¡å—åˆ°Viteï¼š  
```javascript
// ä½¿ç”¨vite-plugin-rewrite
import rewrite from 'vite-plugin-rewrite'

export default {
  plugins: [
    rewrite({
      // å°†/src/new-modules/**è¯·æ±‚ä»£ç†åˆ°ViteæœåŠ¡
      rewrite: (path) => path.startsWith('/src/new-modules/') 
        ? `http://localhost:3000/${path}` 
        : null
    })
  ]
}
```

---

#### **æ€§èƒ½è°ƒä¼˜æŠ€å·§**  
é’ˆå¯¹Webpackçš„å¤§å‹é¡¹ç›®ä¼˜åŒ–ï¼š  
```javascript
// webpack.config.js
module.exports = {
  cache: {
    type: 'filesystem', // å¼€å¯æŒä¹…åŒ–ç¼“å­˜
  },
  experiments: {
    lazyCompilation: true // å¯ç”¨æŒ‰éœ€ç¼–è¯‘
  },
  optimization: {
    splitChunks: {
      chunks: 'all' // æ›´ç»†ç²’åº¦çš„ä»£ç åˆ†å‰²
    }
  }
}
```

é’ˆå¯¹Viteçš„ç”Ÿäº§æ„å»ºä¼˜åŒ–ï¼š  
```javascript
// vite.config.js
export default {
  build: {
    rollupOptions: {
      output: {
        manualChunks(id) {
          if (id.includes('node_modules')) {
            return 'vendor' // æ‰‹åŠ¨æ§åˆ¶vendoråŒ…åˆ†å‰²
          }
        }
      }
    }
  }
}
```

---

#### **æœªæ¥è¶‹åŠ¿**  
- **Vite**ï¼šé€æ­¥æ‰©å±•ç”Ÿæ€ç³»ç»Ÿï¼Œå¢å¼ºå¯¹Webpackæ’ä»¶çš„å…¼å®¹  
- **Webpack**ï¼šåœ¨Module Federationã€Build Performanceæ–¹å‘æŒç»­ä¼˜åŒ–  
- **æ–°å…´å·¥å…·**ï¼šTurbopackï¼ˆRustç¼–å†™ï¼‰ã€Romeç­‰å¸¦æ¥çš„ç«äº‰å‹åŠ›  

**ç»ˆæé€‰æ‹©å»ºè®®**ï¼š  
ğŸ‘‰ **ä¸­å°é¡¹ç›®é¦–é€‰Vite**ï¼Œæ‹¥æŠ±ç°ä»£æµè§ˆå™¨ç‰¹æ€§ï¼›  
ğŸ‘‰ **å¤§å‹ä¼ä¸šçº§åº”ç”¨ç»§ç»­ç”¨Webpack**ï¼Œå¾…Viteç”Ÿæ€æˆç†Ÿåå†é€æ­¥è¿ç§»ã€‚

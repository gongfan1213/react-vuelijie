> ğŸ’­ å¥½çš„ï¼Œç”¨æˆ·ä¹‹å‰è®©æˆ‘è¯¦ç»†è®²è§£äº†Koaï¼Œç°åœ¨åˆè¦æ±‚è¯¦ç»†è®²è§£Expressã€‚æˆ‘éœ€è¦æ¯”è¾ƒå‰é¢çš„Koaå†…å®¹ï¼Œç¡®ä¿Expressçš„éƒ¨åˆ†æ—¢æœ‰ç»“æ„ä¸Šçš„å‘¼åº”ï¼Œåˆèƒ½çªå‡ºå®ƒä»¬çš„ä¸åŒä¹‹å¤„ã€‚è¿™åº”è¯¥å¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°å¯¹æ¯”ä¸¤ä¸ªæ¡†æ¶ã€‚
>
> é¦–å…ˆï¼Œç”¨æˆ·å¯èƒ½å·²ç»å¯¹Node.jsæœ‰ä¸€å®šçš„äº†è§£ï¼Œå¯èƒ½æ˜¯æƒ³æ·±å…¥ç†è§£Expressï¼Œæˆ–è€…ä»Koaè½¬å‘Expressã€‚è€ƒè™‘åˆ°Koaå’ŒExpresséƒ½æ˜¯ç”±åŒä¸€ä¸ªå›¢é˜Ÿå¼€å‘ï¼Œç”¨æˆ·å¯èƒ½å¯¹ä¸¤è€…çš„å·®å¼‚ç‰¹åˆ«æ„Ÿå…´è¶£ã€‚ä¸è¿‡ï¼Œè¿™é‡Œä¸»è¦æ˜¯è¯¦ç»†è®²è§£Expressï¼Œæ‰€ä»¥è¿˜æ˜¯è¦å…ˆè¦†ç›–æ¡†æ¶çš„åŸºæœ¬çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ ¸å¿ƒåŠŸèƒ½ã€ä¸­é—´ä»¶ã€è·¯ç”±ã€æ¨¡æ¿å¼•æ“ç­‰ã€‚
>
> Expressä½œä¸ºæ›´æ—©çš„æ¡†æ¶ï¼Œåœ¨ç”Ÿæ€å’Œç¤¾åŒºæ”¯æŒä¸Šæ¯”Koaæ›´æˆç†Ÿï¼Œåº”ç”¨æ›´å¹¿æ³›ã€‚ç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“Expressçš„ä¸»è¦ç‰¹ç‚¹ã€ä¸­é—´ä»¶æ¨¡å‹å¦‚ä½•å·¥ä½œã€å¦‚ä½•å¤„ç†è·¯ç”±ã€å¦‚ä½•é›†æˆç¬¬ä¸‰æ–¹åº“ç­‰ã€‚åŒæ—¶ï¼Œé”™è¯¯å¤„ç†å’Œæ€§èƒ½ä¼˜åŒ–ä¹Ÿæ˜¯ç”¨æˆ·å…³å¿ƒçš„é—®é¢˜ã€‚
>
> æˆ‘éœ€è¦ä»Expressçš„å†å²èƒŒæ™¯è®²èµ·ï¼Œè¯´æ˜å®ƒä¸ºä»€ä¹ˆæµè¡Œï¼Œæ¯”å¦‚ä¸­é—´ä»¶æ¶æ„çš„ç®€å•æ€§ã€‚ç„¶åä»‹ç»å¦‚ä½•åˆ›å»ºExpressåº”ç”¨ï¼Œè®¾ç½®è·¯ç”±ï¼Œä½¿ç”¨ä¸­é—´ä»¶ï¼Œå¤„ç†æ¨¡æ¿ç­‰ã€‚ä¸­é—´ä»¶æœºåˆ¶æ˜¯Expressçš„æ ¸å¿ƒï¼Œå¯èƒ½éœ€è¦è¯¦ç»†è§£é‡Šå…¶çº¿æ€§æ‰§è¡Œæ¨¡å‹ï¼Œå¯¹æ¯”Koaçš„æ´‹è‘±æ¨¡å‹ã€‚
>
> å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½å¯¹Expressçš„å¸¸ç”¨ä¸­é—´ä»¶æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚body-parserã€cookie-parserã€morganç­‰ï¼Œå¦‚ä½•ç»„åˆä½¿ç”¨è¿™äº›ä¸­é—´ä»¶æ¥æ„å»ºåº”ç”¨ã€‚æ¨¡æ¿å¼•æ“ä¹Ÿæ˜¯ä¸€ä¸ªé‡ç‚¹ï¼Œæ¯”å¦‚å¦‚ä½•ä½¿ç”¨EJSæˆ–Pugç”ŸæˆåŠ¨æ€é¡µé¢ã€‚
>
> é”™è¯¯å¤„ç†æ–¹é¢ï¼ŒExpressçš„é”™è¯¯å¤„ç†ä¸­é—´ä»¶å’ŒKoaä¸åŒï¼Œå› ä¸ºæ˜¯åŸºäºå›è°ƒå‡½æ•°çš„ï¼Œéœ€è¦è¯´æ˜å¦‚ä½•å¤„ç†åŒæ­¥å’Œå¼‚æ­¥é”™è¯¯ï¼Œæ¯”å¦‚ä½¿ç”¨try-catchè¿˜æ˜¯ä¼ é€’é”™è¯¯åˆ°nextå‡½æ•°ã€‚
>
> æ¥ä¸‹æ¥æ˜¯è·¯ç”±éƒ¨åˆ†ï¼ŒExpressè‡ªå¸¦äº†å¼ºå¤§çš„è·¯ç”±åŠŸèƒ½ï¼Œå¯ä»¥å®šä¹‰åŠ¨æ€è·¯ç”±ã€è·¯ç”±æ¨¡å—åŒ–ç­‰ã€‚è¿™é‡Œå¯èƒ½éœ€è¦ä¸¾ä¾‹è¯´æ˜å¦‚ä½•ç»„ç»‡è·¯ç”±ä»£ç ï¼Œå°¤å…¶æ˜¯å¤§å‹é¡¹ç›®ä¸­çš„ç»“æ„å®‰æ’ã€‚
>
> å…³äºæ€§èƒ½ï¼Œè™½ç„¶Expressæœ¬èº«çš„æ€§èƒ½ä¸é”™ï¼Œä½†ç”¨æˆ·å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•ä¼˜åŒ–ï¼Œæ¯”å¦‚ä½¿ç”¨é›†ç¾¤æ¨¡å¼ã€ç¼“å­˜ç­–ç•¥ã€å‹ç¼©ä¸­é—´ä»¶ç­‰ã€‚å¯èƒ½è¿˜è¦æåˆ°ä¸Koaç›¸æ¯”Expressçš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿ï¼Œæ¯”å¦‚ä¸­é—´ä»¶æ¨¡å‹çš„ä¸åŒå¯¼è‡´çš„å¼‚æ­¥å¤„ç†å·®å¼‚ã€‚
>
> ç”¨æˆ·å¯èƒ½éœ€è¦å®é™…ç¤ºä¾‹æ¥æ¼”ç¤ºæ€ä¹ˆæ­å»ºä¸€ä¸ªå®Œæ•´çš„Expressåº”ç”¨ï¼Œä»å®‰è£…åˆ°é…ç½®ä¸­é—´ä»¶ï¼Œå†åˆ°å®šä¹‰è·¯ç”±å’Œå¯åŠ¨æœåŠ¡å™¨ã€‚æ¯”å¦‚å±•ç¤ºå¦‚ä½•å¤„ç†GET/POSTè¯·æ±‚ï¼Œä¸Šä¼ æ–‡ä»¶ï¼Œä½¿ç”¨ä¼šè¯ç®¡ç†ï¼Œæˆ–è€…è¿æ¥æ•°æ®åº“ç­‰ã€‚
>
> ä¹Ÿå¯èƒ½éœ€è¦æåˆ°Expressçš„å±€é™æ€§ï¼Œæ¯”å¦‚å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œè¿™æ—¶å€™å¯ä»¥å¯¹æ¯”Koaçš„async/awaitå¸¦æ¥çš„æ”¹è¿›ï¼Œä»¥åŠå¦‚ä½•ç”¨Expressç»“åˆPromiseæˆ–async/awaitæ¥é¿å…å›è°ƒåµŒå¥—ã€‚
>
> æ­¤å¤–ï¼Œè€ƒè™‘åˆ°ç°åœ¨æ›´å¤šçš„é¡¹ç›®å¯èƒ½é‡‡ç”¨TypeScriptï¼Œæˆ–è®¸éœ€è¦æåˆ°å¦‚ä½•åœ¨Expressä¸­ä½¿ç”¨TypeScriptè¿›è¡Œå¼€å‘ï¼Œæ¯”å¦‚å®šä¹‰è·¯ç”±çš„ç±»å‹ã€ä¸­é—´ä»¶çš„ç±»å‹ç­‰ã€‚
>
> æ€»ç»“éƒ¨åˆ†éœ€è¦å¼ºè°ƒExpressçš„é€‚ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ä¼ ç»Ÿçš„æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ã€REST APIå¼€å‘ä»¥åŠå…¶åºå¤§çš„ä¸­é—´ä»¶ç”Ÿæ€å¦‚ä½•å¸®åŠ©å¿«é€Ÿå¼€å‘ã€‚åŒæ—¶ï¼ŒæŒ‡å‡ºåœ¨éœ€è¦æ›´çµæ´»ä¸­é—´ä»¶æ§åˆ¶æˆ–æ›´ç°ä»£å¼‚æ­¥æµç¨‹æ—¶ï¼Œå¯ä»¥è€ƒè™‘Koaã€‚
>
> æœ€åï¼Œå¯èƒ½è¿˜éœ€è¦æä¾›ä¸€äº›å­¦ä¹ èµ„æºå’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©ç”¨æˆ·ç»§ç»­æ·±å…¥å­¦ä¹ ã€‚
>
> 



---

### Express æ¡†æ¶æ·±åº¦è§£æ

Express æ˜¯ Node.js ç”Ÿæ€ä¸­æœ€ç»å…¸çš„ Web æ¡†æ¶ï¼Œé•¿æœŸå æ®æœåŠ¡å™¨å¼€å‘å¸‚åœºä¸»æµåœ°ä½ï¼Œä»¥ **ä¸­é—´ä»¶æµæ°´çº¿æ¨¡å‹** å’Œ **æç®€è·¯ç”±ç³»ç»Ÿ** é—»åã€‚ä½œä¸ºå»ºç«‹ä¼ä¸šçº§åº”ç”¨çš„é¦–é€‰æ–¹æ¡ˆï¼Œå…¶è®¾è®¡å“²å­¦ä»¥å®ç”¨ä¸»ä¹‰ä¸ºæ ¸å¿ƒã€‚

---

#### ä¸€ã€æ ¸å¿ƒæ¶æ„ä¼˜åŠ¿

1. **å››å±‚æ‰©å±•æ€§è®¾è®¡**  
```bash
npm install express   # æ ¸å¿ƒæ¡†æ¶å®‰è£…
```
æ¡†æ¶ç»“æ„æ˜æ™°å¯è§ï¼š
```js
const express = require('express');
const app = express(); 

app.get('/', (req, res) => {
  res.send('Hello Express!'); // ç»ˆç«¯å“åº”å³æ—¶è¾“å‡º
});
```

2. **åŒå¯¹è±¡äº¤äº’æ¨¡å‹**  
ç‹¬ç«‹ç®¡æ§è¯·æ±‚å“åº”å¯¹è±¡ï¼š
- `req`: æ‰©å±•è‡ª http.IncomingMessage  
  ```js
  req.params      // è·å–è·¯å¾„å‚æ•° /users/:id
  req.get('Host') // è¯»å–è¯·æ±‚å¤´ä¿¡æ¯
  ```
- `res`: æ‰©å±•è‡ª http.ServerResponse  
  ```js
  res.status(404).json({ error: 'Not Found' });
  res.render('index', { title: 'Express æ¨¡æ¿' });
  ```

3. **å¤šæ ¼å¼å“åº”æ”¯æŒ**  
```js
res.send('<h1>HTMLå­—ç¬¦ä¸²</h1>'); 
res.sendFile('/static/image.png'); 
res.download('report.pdf');     // è§¦å‘æ–‡ä»¶ä¸‹è½½
```

---

#### äºŒã€ä¸­é—´ä»¶è¿è¡Œæœºåˆ¶

1. **çº¿æ€§æ‰§è¡Œæ¨¡å‹**  
ä¸­é—´ä»¶æŒ‰æ³¨å†Œé¡ºåºä»¥ç®¡é“æ¨¡å¼é€ä¸ªæ‰§è¡Œï¼š
```javascript
app.use((req, res, next) => {
  console.log('ä¸­é—´ä»¶1 å¼€å§‹'); 
  next();  // è½¬äº¤æ§åˆ¶æƒ â†’ 
}); 

app.use((req, res, next) => {
  console.log('ä¸­é—´ä»¶2 å¤„ç†');
  next();  // â†’ æ‰§è¡Œä¸‹ä¸€ä¸­é—´ä»¶
});

// æœ€ç»ˆè¾“å‡ºé¡ºåºï¼šä¸­é—´ä»¶1 å¼€å§‹ â†’ ä¸­é—´ä»¶2 å¤„ç† â†’ è·¯ç”±å¤„ç† â†’ é€†å‘è¿”å›
```

2. **åŠŸèƒ½å‹ä¸­é—´ä»¶ç±»å‹**  

| ç±»å‹                | ä»£ç ç¤ºä¾‹                          | åº”ç”¨åœºæ™¯                   |
|---------------------|-----------------------------------|---------------------------|
| åº”ç”¨çº§ä¸­é—´ä»¶        | `app.use(morgan('dev'))`          | å…¨å±€æ—¥å¿—/å®‰å…¨è¿‡æ»¤         |
| è·¯ç”±çº§ä¸­é—´ä»¶        | `router.use(authCheck)`          | è·¯ç”±åˆ†ç»„é‰´æƒ              |
| é”™è¯¯å¤„ç†ä¸­é—´ä»¶      | `app.use((err, req, res, next)`  | é›†ä¸­æ•è·å¼‚å¸¸              |
| ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶        | `bodyParser.json()`              | è§£æè¯·æ±‚ä½“æ•°æ®            |
| å†…ç½®ä¸­é—´ä»¶          | `express.static('public')`       | é™æ€èµ„æºæ‰˜ç®¡              |

3. **å…¸å‹ä¸­é—´ä»¶é“¾ç¤ºä¾‹**  
```javascript
// è¯·æ±‚æ—¥å¿—è®°å½•
app.use(morgan('combined'));

// è·¨åŸŸå¤„ç†
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*');
  next();
});

// å†…å®¹è§£æ
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// è·¯ç”±åˆ†å‘
app.use('/api', apiRouter);

// 404 é¡µé¢å¤„ç†
app.use((req, res) => {
  res.status(404).send('èµ„æºä¸¢å¤±'); 
});
```

---

#### ä¸‰ã€è·¯ç”±æ§åˆ¶ä½“ç³»

1. **å¤šç»´åº¦è·¯ç”±æ³¨å†Œ**  
```js
// åŸºç¡€è·¯ç”±
app.get('/products', (req, res) => {  /* æŸ¥è¯¢æ‰€æœ‰å•†å“ */  });

// åŠ¨æ€è·¯å¾„å‚æ•°
app.get('/user/:userId', (req, res) => {
  res.send(`ç”¨æˆ·ID: ${req.params.userId}`);
});

// æ­£åˆ™åŒ¹é…è·¯ç”±
app.get(/.*fly$/, (req, res) => {  // åŒ¹é… /butterfly /dragonfly
  res.send('æ­£åˆ™æ•è·æˆåŠŸ');
});
```

2. **Routeå¯¹è±¡è¿›é˜¶ç”¨æ³•**  
```javascript
const userRouter = express.Router();

userRouter.route('/')
  .get((req, res) => {  /* æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ· */ })
  .post(userController.create);

userRouter.route('/:id')
  .get((req, res) => {  /* è·å–å•ä¸ªç”¨æˆ· */ })
  .put(userController.update)
  .delete(userController.remove);

app.use('/users', userRouter); // è·¯ç”±æŒ‚è½½
```

3. **è¯·æ±‚å‚æ•°éªŒè¯**  
ä½¿ç”¨ express-validator å¢å¼ºå®‰å…¨æ€§ï¼š
```javascript
const { body, validationResult } = require('express-validator');

app.post('/login',
  body('email').isEmail(),
  body('password').isLength({ min: 6 }),
  (req, res) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }
    // éªŒè¯é€šè¿‡åçš„å¤„ç†
  }
);
```

---

#### å››ã€æ¨¡æ¿å¼•æ“æ•´åˆ

1. **å¤šæ¨¡æ¿å¼•æ“å…¼å®¹**  
```js
app.set('views', './views');   // æ¨¡æ¿ç›®å½• 
app.set('view engine', 'pug'); // æŒ‡å®šPugå¼•æ“

// æ¸²æŸ“ç¤ºä¾‹
app.get('/', (req, res) => {
  res.render('index', { 
    title: 'Express æ¨¡æ¿ç¤ºä¾‹',
    users: [{ name: 'å¼ ä¸‰' }, { name: 'æå››' }]
  });
});
```

2. **ä¸»æµæ¨¡æ¿å¯¹æ¯”**  

| å¼•æ“ | è¯­æ³•ç‰¹å¾            | æ–‡ä»¶æ‰©å±•å | é€‚åˆåœºæ™¯       |
|------|---------------------|------------|----------------|
| EJS  | åµŒå…¥å¼JavaScript    | .ejs       | HTMLä¼ ç»Ÿå¼€å‘   |
| Pug  | ç¼©è¿›å¼ç®€æ´è¯­æ³•      | .pug       | å¿«é€ŸåŸå‹è®¾è®¡   |
| Handlebars | Mustacheé£æ ¼ | .hbs       | å®‰å…¨å†…å®¹è½¬ä¹‰   |

3. **é™æ€èµ„æºæ‰˜ç®¡**  
```js
// æ‰˜ç®¡ç›®å½•è®¾ç½®
app.use('/static', express.static(path.join(__dirname, 'public')));

// å‰ç«¯è®¿é—®ç¤ºä¾‹
// <img src="/static/images/logo.png">
```

---

#### äº”ã€æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

1. **åå‘ä»£ç†æé€Ÿ**  
Nginx é…ç½®èŠ‚é€‰ï¼š
```nginx
location /api/ {
  proxy_pass http://localhost:3000;  # Expressåº”ç”¨ç«¯å£
  proxy_set_header Host $host;
}
```

2. **è¿›ç¨‹é›†ç¾¤ä¼˜åŒ–**  
ä½¿ç”¨ PM2 å®ç°å¤šæ ¸è´Ÿè½½ï¼š
```bash
pm2 start app.js -i max  # æ ¹æ®CPUæ ¸å¿ƒæ•°åˆ›å»ºè¿›ç¨‹
pm2 monit               # æ€§èƒ½ç›‘æ§ä»ªè¡¨ç›˜
```

3. **ç¼“å­˜æ•°æ®ç­–ç•¥**  
åº”ç”¨å±‚ç¼“å­˜ç¤ºä¾‹ï¼š
```js
const mcache = require('memory-cache');

app.get('/api/news', (req, res) => {
  const cachedBody = mcache.get('news');
  if (cachedBody) return res.send(cachedBody);

  fetchNewsFromDB().then(data => {
    mcache.put('news', data, 60000);  // ç¼“å­˜60ç§’
    res.send(data);
  });
});
```

---

#### å…­ã€Express ä¸ Koa æŠ€æœ¯å¯¹æ¯”

| **ç‰¹æ€§**               | **Express**                          | **Koa**                             |
|------------------------|---------------------------------------|--------------------------------------|
| **ä¸­é—´ä»¶æ‰§è¡Œæœºåˆ¶**     | çº¿æ€§ä¸²è¡Œæ‰§è¡Œ (waterfall)             | æ´‹è‘±åœˆæ¨¡å‹ (Stack)                   |
| **å¼‚æ­¥å¤„ç†æ–¹æ¡ˆ**       | å›è°ƒå‡½æ•° / Promise                   | åŸç”Ÿ async/await æ”¯æŒ                |
| **è·¯ç”±ç³»ç»Ÿ**           | å†…ç½® Router åŠŸèƒ½å®Œå–„                 | éœ€é€šè¿‡ koa-router æ‰©å±•               |
| **é”™è¯¯å¤„ç†**           | éœ€è¦ä¸­é—´ä»¶æ•è·å¼‚å¸¸                   | å¯é€šè¿‡ try/catch é€å±‚ä¼ é€’            |
| **HTTPæ–¹æ³•è¦†ç›–**       | æ”¯æŒ methodOverride ä¸­é—´ä»¶           | ç›´æ¥å¤„ç†æ‰€æœ‰æ–¹æ³•                     |
| **ä¸Šä¸‹æ–‡ä¼ é€’**         | éœ€æ‰‹åŠ¨æ“ä½œ req/res å¯¹è±¡              | ç»Ÿä¸€ context å¯¹è±¡å°è£…                |
| **ç¤¾åŒºç”Ÿæ€è§„æ¨¡**       | è¶…è¿‡ 5.8 ä¸‡ä¸­é—´ä»¶æ”¯æŒ                | çº¦ 2.3 ä¸‡ä¸­é—´ä»¶æ”¯æŒ                  |

---

#### ä¸ƒã€å…¸å‹åº”ç”¨åœºæ™¯

1. **ä¼ ç»ŸæœåŠ¡ç«¯æ¸²æŸ“ (SSR)**  
é…åˆæ¨¡æ¿å¼•æ“å¿«é€Ÿå¼€å‘ï¼š
```js
// ç”¨æˆ·è¯¦æƒ…é¡µé¢æ¸²æŸ“
app.get('/user/:id', async (req, res) => {
  const user = await User.findById(req.params.id);
  res.render('user-profile', { user });
});
```

2. **RESTful API å¼€å‘**  
ä½¿ç”¨æ ‡å‡† HTTP æ–¹æ³•è®¾è®¡ï¼š
```js
app.route('/articles')
  .get(articleController.list)
  .post(authMiddleware, articleController.create);

app.route('/articles/:id')
  .get(articleController.detail)
  .put(authMiddleware, articleController.update)
  .delete(authMiddleware, articleController.delete);
```

3. **ç‰©è”ç½‘è®¾å¤‡é€šä¿¡æ¢çº½**  
å¤„ç†é«˜é¢‘è®¾å¤‡ä¸ŠæŠ¥æ•°æ®ï¼š
```js
const deviceRouter = express.Router();

deviceRouter.post('/sensor-data', (req, res) => {
  saveToTimeSeriesDB(req.body);  // å­˜å…¥æ—¶åºæ•°æ®åº“
  res.sendStatus(201);
});
```

---

#### å…«ã€ä¼ä¸šçº§å¼€å‘å®è·µ

1. **é¡¹ç›®ç›®å½•è§„èŒƒ**  
```
project-root/
â”œâ”€â”€ app.js            # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ routes/           # è·¯ç”±æ¨¡å—
â”‚   â”œâ”€â”€ api/          # APIè·¯ç”±ç»„
â”œâ”€â”€ controllers/      # ä¸šåŠ¡é€»è¾‘æ§åˆ¶
â”œâ”€â”€ models/           # æ•°æ®åº“æ¨¡å‹
â”œâ”€â”€ middlewares/      # è‡ªå®šä¹‰ä¸­é—´ä»¶
â”œâ”€â”€ config/           # ç¯å¢ƒé…ç½®
â”œâ”€â”€ public/           # é™æ€èµ„æº
â””â”€â”€ views/            # æ¨¡æ¿æ–‡ä»¶
```

2. **ç±»å‹æ‰©å±•ç¤ºèŒƒ**  
é€šè¿‡å£°æ˜æ–‡ä»¶æ‰©å±• Request å¯¹è±¡ï¼š
```typescript
declare global {
  namespace Express {
    interface Request {
      user?: {
        id: string;
        role: string;
      };
    }
  }
}

// ä¸­é—´ä»¶æ³¨å…¥ç”¨æˆ·ä¿¡æ¯
app.use((req, res, next) => {
  req.user = getUserFromToken(req.headers.authorization);
  next();
});
```

3. **è¿æ¥æ•°æ®åº“ç¤ºèŒƒ**  
ä½¿ç”¨ Sequelize ORMï¼š
```javascript
const { Sequelize } = require('sequelize');
const sequelize = new Sequelize('mysql://user:pass@localhost:3306/dbname');

// æ¨¡å‹å®šä¹‰
const User = sequelize.define('User', {
  name: { type: DataTypes.STRING },
  email: { type: DataTypes.STRING, unique: true }
});

// åœ¨è·¯ç”±ä¸­ä½¿ç”¨
app.get('/users', async (req, res) => {
  const users = await User.findAll();
  res.json(users);
});
```

---

### æ€»ç»“å»ºè®®

**Express å¼ºåŠ¿é¢†åŸŸ**ï¼š  
âœ… æœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨å¼€å‘ (é…åˆ EJS/Pug)  
âœ… è€æ—§ç³»ç»Ÿçš„ç»´æŠ¤å’Œè¿­ä»£å‡çº§  
âœ… éœ€è¦åºå¤§ç”Ÿæ€ä¸­é—´ä»¶æ”¯æŒçš„åœºæ™¯  

**æŠ€æœ¯é€‰å‹å‚è€ƒåŸºå‡†**ï¼š  
- å›¢é˜ŸæŠ€èƒ½ç†Ÿæ‚‰åº¦ â” 70%å›¢é˜Ÿæ›´ç†Ÿæ‚‰Expressè¯­æ³•
- é¡¹ç›®å¤æ‚æ€§éœ€æ±‚ â” Expressé€‚åˆéªŒè¯å¿«é€ŸåŸå‹
- é•¿æœŸç»´æŠ¤æˆæœ¬ â” Expressæ–‡æ¡£èµ„æºæ›´ä¸°å¯Œ

**å­¦ä¹ è·¯çº¿æŒ‡å¼•**ï¼š  
**åŸºç¡€é˜¶æ®µ** â†’ æŒæ¡ä¸­é—´ä»¶æœºåˆ¶/è·¯ç”±è®¾è®¡  
**è¿›é˜¶é˜¶æ®µ** â†’ ç ”ç©¶æ€§èƒ½è°ƒä¼˜/å®‰å…¨é˜²æŠ¤  
**ä¸“å®¶é˜¶æ®µ** â†’ å¼€å‘å®šåˆ¶ä¸­é—´ä»¶/æ¡†æ¶äºŒæ¬¡å°è£…

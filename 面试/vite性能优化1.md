> ğŸ’­ å—¯ï¼Œç”¨æˆ·ç°åœ¨é—®çš„æ˜¯Viteçš„ä¼˜åŒ–ï¼Œä¹‹å‰å·²ç»é—®è¿‡Webpackçš„ä¼˜åŒ–äº†ï¼Œæ‰€ä»¥å¯èƒ½æ˜¯æƒ³å¯¹æ¯”æˆ–è€…äº†è§£Viteç‰¹æœ‰çš„ä¼˜åŒ–æ–¹æ³•ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦å›å¿†Viteçš„å·¥ä½œåŸç†å’Œå®ƒä¸Webpackçš„ä¸»è¦åŒºåˆ«ã€‚Viteåˆ©ç”¨æµè§ˆå™¨åŸç”ŸESæ¨¡å—å’Œç°ä»£å‰ç«¯å·¥å…·ï¼Œæ¯”å¦‚esbuildã€Rollupï¼Œæ‰€ä»¥åœ¨ä¼˜åŒ–ç­–ç•¥ä¸Šå¯èƒ½å’ŒWebpackæœ‰æ‰€ä¸åŒã€‚
>
> é¦–å…ˆï¼Œç”¨æˆ·å¯èƒ½æ˜¯å¼€å‘è€…ï¼Œå·²ç»ä½¿ç”¨è¿‡Viteï¼Œä½†é‡åˆ°äº†æ€§èƒ½é—®é¢˜ï¼Œæƒ³è¦è¿›ä¸€æ­¥ä¼˜åŒ–é¡¹ç›®ã€‚ä»–ä»¬å¯èƒ½å…³å¿ƒçš„æ˜¯å¼€å‘æœåŠ¡å™¨çš„å¯åŠ¨é€Ÿåº¦ã€çƒ­æ›´æ–°é€Ÿåº¦ï¼Œä»¥åŠç”Ÿäº§æ„å»ºçš„ä¼˜åŒ–ã€‚æ¥ä¸‹æ¥éœ€è¦ä»å‡ ä¸ªæ–¹é¢å…¥æ‰‹ï¼šå¼€å‘ç¯å¢ƒä¼˜åŒ–ã€ç”Ÿäº§æ„å»ºä¼˜åŒ–ã€é™æ€èµ„æºå¤„ç†ã€ç¬¬ä¸‰æ–¹ä¾èµ–å¤„ç†ï¼Œä»¥åŠä¸€äº›é«˜çº§æŠ€å·§ã€‚
>
> æ¥ä¸‹æ¥ï¼Œè¦è€ƒè™‘Viteçš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œæ¯”å¦‚åŸºäºESMçš„æŒ‰éœ€ç¼–è¯‘ï¼Œæ‰€ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œä¼˜åŒ–å¯èƒ½æ›´ä¾§é‡äºå‡å°‘ä¸å¿…è¦çš„ç¼–è¯‘ï¼Œä¾èµ–é¢„æ„å»ºã€‚ç”Ÿäº§ç¯å¢ƒåˆ™ä¾èµ–äºRollupçš„æ‰“åŒ…ï¼Œå› æ­¤Rollupçš„æ’ä»¶å’Œé…ç½®ä¼˜åŒ–å¯èƒ½é‡è¦ã€‚
>
> ç„¶åï¼Œéœ€è¦åˆ—ä¸¾å…·ä½“çš„ä¼˜åŒ–ç‚¹ã€‚æ¯”å¦‚ä¾èµ–é¢„æ„å»ºã€åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€ä»£ç åˆ†å‰²ã€CSSå¤„ç†ã€é™æ€èµ„æºä¼˜åŒ–ç­‰ã€‚åŒæ—¶ï¼Œè¿˜éœ€æåˆ°Viteç‰¹æœ‰çš„é…ç½®é€‰é¡¹ï¼Œå¦‚buildé€‰é¡¹ã€esbuildçš„é…ç½®ï¼Œä»¥åŠå¦‚ä½•åˆç†ä½¿ç”¨æ’ä»¶ã€‚
>
> å¦å¤–ï¼Œéœ€è¦æ³¨æ„Viteåœ¨å¼€å‘ç¯å¢ƒä¸­çš„å†·å¯åŠ¨é€Ÿåº¦å¯èƒ½å·²ç»å¾ˆå¿«ï¼Œä½†å¦‚æœé¡¹ç›®å¾ˆå¤§ï¼Œä¾ç„¶å¯èƒ½æœ‰ä¼˜åŒ–ç©ºé—´ï¼Œæ¯”å¦‚è°ƒæ•´é¢„æ„å»ºçš„ä¾èµ–é¡¹ï¼Œæˆ–è€…æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶ã€‚è€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒTree Shakingã€ä»£ç å‹ç¼©ã€åˆ†åŒ…ç­–ç•¥æ˜¯å…³é”®ã€‚
>
> ç”¨æˆ·å¯èƒ½æœ‰æ›´æ·±å±‚æ¬¡çš„éœ€æ±‚ï¼Œä¾‹å¦‚ä»–ä»¬çš„é¡¹ç›®å¯èƒ½æœ‰å¤§é‡çš„é™æ€èµ„æºéœ€è¦å¤„ç†ï¼Œæˆ–è€…ä½¿ç”¨äº†æŸäº›ç‰¹å®šçš„æ¡†æ¶ï¼Œå¦‚Vueæˆ–Reactï¼Œéœ€è¦è€ƒè™‘æ¡†æ¶ç‰¹æœ‰çš„ä¼˜åŒ–ã€‚æ­¤å¤–ï¼Œè¿˜å¯èƒ½å…³å¿ƒå¦‚ä½•é€šè¿‡åˆ†æå·¥å…·æ¥è¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼Œæ¯”å¦‚ä½¿ç”¨rollup-plugin-visualizerã€‚
>
> è¿˜éœ€è¦æé†’ç”¨æˆ·æ³¨æ„ç‰ˆæœ¬é—®é¢˜ï¼ŒViteä¸€ç›´åœ¨æ›´æ–°ï¼Œä¸åŒç‰ˆæœ¬çš„ä¼˜åŒ–ç­–ç•¥å¯èƒ½ä¸åŒã€‚åŒæ—¶ï¼Œé…ç½®ä¸­çš„ä¸€äº›ç»†èŠ‚ï¼Œå¦‚æ­£ç¡®è®¾ç½®baseè·¯å¾„ï¼Œä½¿ç”¨CDNç­‰ï¼Œä¹Ÿæ˜¯ä¼˜åŒ–çš„ä¸€ç¯ã€‚
>
> æœ€ç»ˆï¼Œéœ€è¦ç»“æ„æ¸…æ™°ï¼Œåˆ†ç‚¹åˆ—å‡ºï¼Œæ¯ä¸ªä¼˜åŒ–ç‚¹ç»™å‡ºåŸå› å’Œå…·ä½“é…ç½®ç¤ºä¾‹ï¼Œæ–¹ä¾¿ç”¨æˆ·å‚è€ƒã€‚ç¡®ä¿è®²è§£å…¨é¢ï¼Œè¦†ç›–å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼ŒåŒæ—¶çªå‡ºViteç›¸è¾ƒäºWebpackçš„ä¼˜åŠ¿å’Œä¸åŒä¹‹å¤„ã€‚
>
> 



ä»¥ä¸‹æ˜¯é’ˆå¯¹ Vite çš„æ·±åº¦ä¼˜åŒ–ç­–ç•¥ï¼Œç»“åˆå…¶åº•å±‚ ESM ç‰¹æ€§å’Œæ„å»ºå·¥å…·é“¾ä¼˜åŠ¿ï¼Œåˆ†ç±»æ•´ç†çš„å¯æ“ä½œæ€§æ–¹æ¡ˆï¼š

---

### ä¸€ã€ **ä¾èµ–é¢„æ„å»ºè°ƒä¼˜**  
#### 1. **æ™ºèƒ½é¢„æ„å»ºç™½åå•**  
**æ ¸å¿ƒé€»è¾‘**ï¼šå¼ºåˆ¶å¯¹éå¸¸è§„ ESM æ ¼å¼çš„ä¾èµ–é¢„ç¼–è¯‘ä¸º ESMï¼Œåç»­è¯·æ±‚ç›´æ¥ä»æµè§ˆå™¨ç¼“å­˜ä¸­åŠ è½½ã€‚  
```javascript
// vite.config.js
export default {
  optimizeDeps: {
    // ğŸ“Œ ç²¾ç¡®æ§åˆ¶éœ€è¦é¢„æ„å»ºçš„ä¾èµ–ï¼ˆé€‚ç”¨ä½“ç§¯å¤§çš„é ESM åº“ï¼‰
    include: ['lodash-es', 'antd'],
    // ğŸ“Œ æ’é™¤æ˜ç¡®æ— éœ€å¤„ç†çš„åŒ…ï¼ˆå¦‚çº¯ ESM æ¨¡å—ï¼‰
    exclude: ['vue-demi']
  }
}
```

#### 2. **é¢„æ„å»ºç¼“å­˜ç­–ç•¥**  
**æ€§èƒ½æœ¬è´¨**ï¼šé€šè¿‡ç¼“å­˜å“ˆå¸Œè§£å†³é‡å¤æ„å»ºé—®é¢˜  
```javascript
// vite.config.js
export default {
  optimizeDeps: {
    // ğŸ’¡ ç¼“å­˜åˆ° node_modules/.vite ç›®å½•
    cacheDir: './node_modules/.vite',
    // ğŸ’¡ ç‰¹å®šç¯å¢ƒå˜é‡å¯¼è‡´ä¾èµ–å˜åŒ–æ—¶è§¦å‘å¼ºåˆ¶åˆ·æ–°
    force: process.env.NODE_ENV === 'development'
  }
}
```

---

### äºŒã€ **å¼€å‘ç¯å¢ƒæé€Ÿä½“éªŒ**  
#### 1. **ç²¾å‡†è·¯ç”±çº§æŒ‰éœ€åŠ è½½**  
**æŠ€æœ¯å“²å­¦**ï¼šåŸºäºæµè§ˆå™¨çš„åŸç”Ÿ ESMï¼Œä»…ç¼–è¯‘å½“å‰è·¯ç”±å…³è”æ¨¡å—ã€‚  
```javascript
// âœ… SPA æ¨èä½¿ç”¨åŠ¨æ€å¯¼å…¥è¯­æ³•ï¼ˆVue ç¤ºä¾‹ï¼‰
const router = createRouter({
  routes: [
    {
      path: '/admin',
      component: () => import('./views/Admin.vue') // ğŸš„ è·¯ç”±è§¦å‘æ—¶ç¼–è¯‘
    }
  ]
})
```

#### 2. **çƒ­æ›´æ–°ç­–ç•¥è°ƒä¼˜**  
**å·¥ç¨‹å®è·µ**ï¼šæ´»ç”¨ Vite çš„ HMR API å®ç°ç»†ç²’åº¦æ›´æ–°ã€‚  
```javascript
// ğŸ“Œ ç»„ä»¶çº§çƒ­æ›´æ–°ç¤ºä¾‹ï¼ˆVue é¡¹ç›®ï¼‰
if (import.meta.hot) {
  import.meta.hot.accept('./module.js', (newModule) => {
    // ğŸ”¥ è‡ªå®šä¹‰æ›´æ–°é€»è¾‘ï¼ˆå¦‚çŠ¶æ€ä¿æŒï¼‰
  })
}
```

#### 3. **ç½‘ç»œå±‚æ€§èƒ½æé™å‹æ¦¨**  
```javascript
// vite.config.js
export default {
  server: {
    // âš¡ï¸ é¢„è½¬æ¢æ¨¡å—æ•°é‡ï¼ˆé»˜è®¤ 120ï¼‰
    preTransformRequests: 200,
    // ğŸ¦¾ HTTP/2 ä¼˜å…ˆçº§æµè½¬ï¼ˆéœ€æœåŠ¡å™¨æ”¯æŒï¼‰
    warmup: {
      clientFiles: ['./src/main.js']
    }
  }
}
```

---

### ä¸‰ã€ **ç”Ÿäº§æ„å»ºæ€§èƒ½çˆ†ç ´**  
#### 1. **æè‡´å‹ç¼©æ–¹æ¡ˆ**  
**å·¥å…·é“¾ç»„åˆæ‹³**ï¼š  
```javascript
// vite.config.js
import viteCompression from 'vite-plugin-compression'
export default {
  plugins: [
    viteCompression({
      algorithm: 'brotliCompress', // ğŸ—œï¸ Brotli å‹ç¼©ç‡è¾¾ 20-30%
      threshold: 10240 // âœ… ä»…å¤„ç† >10KB æ–‡ä»¶
    })
  ],
  build: {
    // ğŸ’ ESBuild å‹ç¼©å™¨ï¼ˆæ¯” Terser å¿« 20-100 å€ï¼‰
    minify: 'esbuild',
    // ğŸ”§ ESBuild é…ç½®ï¼ˆç‰ºç‰² 3-5% ä½“ç§¯æ¢ 20% å‹ç¼©é€Ÿåº¦ï¼‰
    esbuild: {
      minifyWhitespace: true,
      minifyIdentifiers: false 
    }
  }
}
```

#### 2. **æ™ºèƒ½åˆ†åŒ…ç­–ç•¥**  
**æ•°å­¦åˆ†ææ¨¡å‹**ï¼šåŸºäºæ¨¡å—å¼•ç”¨é¢‘åº¦è‡ªåŠ¨åˆ‡å‰²ã€‚  
```javascript
// vite.config.js
export default {
  build: {
    rollupOptions: {
      output: {
        // ğŸ§® è‡ªåŠ¨å¤„ç†å…¬å…±æ¨¡å—ï¼ˆé€‚åˆå¤§å‹é¡¹ç›®ï¼‰
        manualChunks(id) {
          if (id.includes('node_modules')) {
            return 'vendor'
          }
          if (id.includes('src/utils')) {
            return 'utils' 
          }
        }
      }
    }
  }
}
```

#### 3. **å¹¶è¡Œæ„å»ºåŠ é€Ÿ**  
**å¹¶å‘ä½œæˆ˜é›†ç¾¤**ï¼š  
```bash
# å¯ç”¨å¤šçº¿ç¨‹æ„å»ºï¼ˆéœ€ Rollup æ’ä»¶æ”¯æŒï¼‰
npm install rollup-plugin-parallel -D
```

```javascript
// vite.config.js
import parallel from 'rollup-plugin-parallel'
export default {
  plugins: [
    parallel({
      include: ['**/*.js', '**/*.vue']
    })
  ]
}
```

---

### å››ã€ **èµ„æºåŠ è½½æˆ˜æœ¯**  
#### 1. **æŒ‰ç²¾åº¦åˆ†çº§çš„å›¾åƒä¼˜åŒ–**  
```javascript
// ğŸ“Œ ä½¿ç”¨ Vite å®˜æ–¹å›¾åƒå¤„ç†æ’ä»¶
import { imagetools } from 'vite-imagetools'
export default {
  plugins: [imagetools({
    // ğŸ–¼ï¸ åŠ¨æ€ç”Ÿæˆ WebP/AVIF æ ¼å¼
    defaultDirectives: (url) => new URLSearchParams({
      format: 'avif;webp;' + url.searchParams.get('format') 
    })
  })],
  build: {
    // ğŸ–¥ï¸ å°†å°å›¾è½¬ä¸º Base64 åµŒå…¥ï¼ˆé»˜è®¤ <4KB ï¼‰
    assetsInlineLimit: 8192 
  }
}
```

#### 2. **CDN åŠ¨æ€æ¥å…¥**  
**ç»æµæ€§æ¶æ„**ï¼šå°†é™æ€èµ„æºå’Œç¬¬ä¸‰æ–¹åº“åˆ†ç¦»éƒ¨ç½²ã€‚  
```javascript
// vite.config.js
export default {
  base: 'https://cdn.yourdomain.com/assets/', 
  build: {
    rollupOptions: {
      external: ['vue', 'react'],
      output: {
        paths: {
          'vue': 'https://unpkg.com/vue@3.2.45/dist/vue.runtime.global.js'
        }
      }
    }
  }
}
```

---

### äº”ã€ **æ·±åº¦åˆ†æä¼˜åŒ–é—­ç¯**  
#### 1. **æ„å»ºäº§ç‰©å¯è§†åŒ–å®¡è®¡**  
```bash
npm install rollup-plugin-visualizer -D
```

```javascript
// vite.config.js
import { visualizer } from 'rollup-plugin-visualizer'
export default {
  plugins: [visualizer({
    filename: './stats.html', // ğŸ“Š äº¤äº’å¼ä½“ç§¯åˆ†ææŠ¥è¡¨
    gzipSize: true
  })]
}
```

#### 2. **æ€§èƒ½å®æ—¶ç›‘æ§ç³»ç»Ÿ**  
```javascript
// ğŸ“Œ é›†æˆ Lighthouse CIï¼ˆå³°ç»ˆå®šå¾‹æŒ‡æ ‡ç›‘æ§ï¼‰
module.exports = {
  ci: {
    collect: {
      url: ['http://localhost:3000'],
      staticDistDir: './dist'
    },
    assert: {
      preset: 'lighthouse:recommended'
    }
  }
}
```

---

### å…­ã€ **æŒ‰æ¡†æ¶å®šåˆ¶çš„æ ¸å¼¹çº§ä¼˜åŒ–**  

#### â¤ **Vue é¡¹ç›®ç‰¹åˆ«ä¼˜åŒ–**
```javascript
// vite.config.js
export default {
  vue: {
    // ğŸ’¥ æ›´æ¿€è¿›çš„å“åº”å¼ç³»ç»Ÿä¼˜åŒ–
    reactivityTransform: true,
    // ğŸ¯ æ¨¡æ¿ç¼–è¯‘æ—¶é™æ€æå‡
    template: {
      compilerOptions: {
        hoistStatic: true
      }
    }
  }
}
```

#### â¤ **React é¡¹ç›®ç‰¹åˆ«å¯¹ç­–**  
```javascript
// vite.config.js
export default {
  esbuild: {
    // ğŸ”¥ ç§»é™¤å¼€å‘ç¯å¢ƒä»£ç ï¼ˆéœ€é…åˆç¯å¢ƒå˜é‡ï¼‰
    pure: process.env.NODE_ENV === 'production' 
      ? ['console.log', 'debugger'] 
      : []
  },
  plugins: [reactRefresh()]
}
```

---

### ä¸ƒã€ **ä¼ä¸šçº§åœºæ™¯ä¼˜åŒ–æ–¹æ¡ˆ**  

#### 1. **æ··åˆæ¸²æŸ“æ¶æ„æé€Ÿ (SSR + CSR)**  
```javascript
// ğŸ“Œ SSR æœåŠ¡ç«¯æ„å»ºé…ç½®
export default {
  build: {
    ssr: true,
    rollupOptions: {
      input: 'src/entry-server.js'
    }
  }
}
```

#### 2. **å¾®å‰ç«¯æ¶æ„åŸºå› æ”¹é€ **  
```javascript
// ğŸ“Œ æ­é… Vite çš„æ¨¡å—è”é‚¦èƒ½åŠ›
import { federation } from '@originjs/vite-plugin-federation'
export default {
  plugins: [
    federation({
      name: 'host-app',
      remotes: {
        'remote-app': 'http://localhost:5001/assets/remoteEntry.js'
      }
    })
  ]
}
```

---

### **æ€§èƒ½æå‡åŸºå‡†å‚è€ƒ**  
| ç­–ç•¥ç»´åº¦          | å…¸å‹æ”¶ç›Š                        |
|-------------------|--------------------------------|
| å†·å¯åŠ¨é€Ÿåº¦        | å¤§å‹é¡¹ç›®å¯é™è‡³ 100-300ms       |  
| HMR æ›´æ–°é€Ÿåº¦      | ç»´æŒ 50ms ä»¥å†…                |
| ç”Ÿäº§æ„å»ºè€—æ—¶      | å‡å°‘ 40%-70%                  |
| é¦–å±åŠ è½½æ—¶é—´      | ä¼˜åŒ– 50%+ (ç»“åˆé¢„æ¸²æŸ“ç­–ç•¥)     |

---

### **æ€»ç»“**  
é€šè¿‡ç³»ç»Ÿæ€§åº”ç”¨ä¸Šè¿°ç­–ç•¥ç»„åˆï¼ŒVite é¡¹ç›®å¯è¾¾åˆ°çš„æ€§èƒ½æŒ‡æ ‡è¡¨ç°ï¼š  
- **è¶…å¤§è§„æ¨¡å·¥ç¨‹** (10W+ ä»£ç è¡Œ) å¼€å‘ç¯å¢ƒçƒ­æ›´æ–°ç¨³å®šåœ¨ **100ms çº§åˆ«**  
- ç”Ÿäº§ç¯å¢ƒæ„å»ºäº§ç‰©ä½“ç§¯å¯å‹ç¼©è‡³ä¼ ç»Ÿ Webpack é¡¹ç›®çš„ **60% å·¦å³**  
- åŠ¨æ€èµ„æºåŠ è½½é€Ÿåº¦æå‡ **3-5 å€** (åŸºäºç°ä»£æµè§ˆå™¨ ESM ç‰¹æ€§)

å®é™…åº”ç”¨ä¸­éœ€æ ¹æ®é¡¹ç›®ç‰¹å¾é€‰æ‹©ä¼˜å…ˆçº§ï¼Œå»ºè®®ä½¿ç”¨ **ç»Ÿè®¡å­¦æ–¹æ³•** é€å±‚éªŒè¯ä¼˜åŒ–æ•ˆæœï¼ˆå¦‚ A/B æµ‹è¯•ï¼‰ã€‚

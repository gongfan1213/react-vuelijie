> ğŸ’­ å¥½ï¼Œç”¨æˆ·è®©æˆ‘è¯¦ç»†è®²è®²Webpackä¼˜åŒ–ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¼€å‘è€…æƒ³è¦æå‡ä»–ä»¬çš„æ„å»ºæ€§èƒ½æˆ–å‡å°‘æ‰“åŒ…ä½“ç§¯ã€‚æˆ‘å¾—å…ˆå›é¡¾ä¸€ä¸‹å¸¸è§çš„Webpackä¼˜åŒ–ç­–ç•¥ï¼Œç„¶åè€ƒè™‘å¦‚ä½•ç»„ç»‡è¿™äº›ä¿¡æ¯ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ¸…æ™°åœ°ç†è§£å’Œåº”ç”¨ã€‚
>
> é¦–å…ˆï¼Œç”¨æˆ·å¯èƒ½å·²ç»çŸ¥é“Webpackçš„åŸºæœ¬æ¦‚å¿µï¼Œä½†éœ€è¦æ›´æ·±å…¥çš„ä¼˜åŒ–æ–¹æ³•ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œä»–ä»¬å¯èƒ½é¢ä¸´çš„é—®é¢˜åŒ…æ‹¬æ„å»ºé€Ÿåº¦æ…¢ã€æ‰“åŒ…åçš„æ–‡ä»¶è¿‡å¤§ã€å¼€å‘ä½“éªŒä¸ä½³ç­‰ã€‚æ‰€ä»¥æˆ‘çš„å›ç­”éœ€è¦è¦†ç›–é€Ÿåº¦ä¼˜åŒ–ã€ä½“ç§¯ä¼˜åŒ–ã€å¼€å‘ä½“éªŒä¼˜åŒ–ä»¥åŠä¸€äº›é«˜çº§æŠ€å·§ã€‚
>
> é€šå¸¸æƒ…å†µä¸‹ï¼ŒWebpackä¼˜åŒ–å¯ä»¥åˆ†ä¸ºå‡ ä¸ªæ–¹é¢ï¼šæå‡æ„å»ºé€Ÿåº¦ï¼ˆå¦‚ä½¿ç”¨ç¼“å­˜ã€å¤šçº¿ç¨‹ã€å‡å°‘æœç´¢èŒƒå›´ï¼‰ã€å‡å°è¾“å‡ºä½“ç§¯ï¼ˆä»£ç å‹ç¼©ã€ä»£ç åˆ†å‰²ã€tree shakingï¼‰ã€ä¼˜åŒ–å¼€å‘ä½“éªŒï¼ˆçƒ­æ›´æ–°ã€æ¨¡å—è”é‚¦ï¼‰ç­‰ç­‰ã€‚å¦å¤–ï¼Œå¯èƒ½éœ€è¦åˆ†æå·¥å…·æ¥å¸®åŠ©å®šä½é—®é¢˜ï¼Œæ¯”å¦‚webpack-bundle-analyzerã€‚
>
> æˆ‘è¦ç¡®ä¿è¦†ç›–æ¯ä¸ªä¼˜åŒ–ç‚¹çš„å…·ä½“å®ç°æ–¹æ³•å’ŒåŸç†ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œå¯ä»¥æåˆ°cache-loaderæˆ–è€…Webpack5è‡ªå¸¦çš„æŒä¹…åŒ–ç¼“å­˜ã€‚ä»£ç åˆ†å‰²éƒ¨åˆ†éœ€è¦è§£é‡Šå¦‚ä½•é…ç½®SplitChunksPluginï¼Œä»¥åŠåŠ¨æ€å¯¼å…¥çš„ä½¿ç”¨ã€‚å¯èƒ½è¿˜éœ€è¦æåŠç¬¬ä¸‰æ–¹åº“çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚ externalsã€CDN å¼•å…¥æˆ–è€…æŒ‰éœ€åŠ è½½ã€‚
>
> å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½å¯¹ä¸€äº›ä¼˜åŒ–å¸¦æ¥çš„æ”¶ç›Šä¸å¤ªæ¸…æ¥šï¼Œæ¯”å¦‚ä½¿ç”¨å¤šçº¿ç¨‹ï¼ˆthread-loaderï¼‰åœ¨ä¸åŒåœºæ™¯ä¸‹çš„æ•ˆæœï¼Œæˆ–è€…åœ¨å¤§å‹é¡¹ç›®ä¸­å¦‚ä½•æœ‰æ•ˆåˆ©ç”¨DllPluginã€‚æ­¤å¤–ï¼ŒTree Shakingå¯èƒ½éœ€è¦æ³¨æ„ESæ¨¡å—çš„è¯­æ³•ï¼Œç¡®ä¿æ²¡æœ‰å‰¯ä½œç”¨ã€‚
>
> éœ€è¦é¿å…å¤ªè¿‡ç¬¼ç»Ÿçš„é™ˆè¿°ï¼Œæ¯ä¸ªä¼˜åŒ–ç‚¹éƒ½åº”è¯¥æœ‰å…·ä½“çš„é…ç½®ç¤ºä¾‹æˆ–è€…æœ€ä½³å®è·µã€‚æ¯”å¦‚æåˆ°æ’é™¤node_modulesæ—¶ï¼ŒæŒ‡æ˜ä»£ä½¿ç”¨excludeå±æ€§æ¥ç¼©å°loaderçš„å¤„ç†èŒƒå›´ã€‚åœ¨æœ€å°åŒ–Entry Chunkæ—¶ï¼Œå¯èƒ½éœ€è¦å±•ç¤ºå¦‚ä½•ä½¿ç”¨splitChunksæ¥åˆ†ç¦»runtimeå’Œvendorsã€‚
>
> è¿˜æœ‰ï¼ŒWebpack5ç›¸å¯¹äºæ—§ç‰ˆæœ¬çš„æ”¹è¿›ï¼Œæ¯”å¦‚å†…ç½®çš„æŒä¹…åŒ–ç¼“å­˜ï¼Œå¯èƒ½æ¯”ä¹‹å‰çš„æ’ä»¶æ›´é«˜æ•ˆï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªéœ€è¦æåˆ°çš„ç‚¹ã€‚é«˜çº§ä¼˜åŒ–çš„æ¨¡å—è”é‚¦å¯èƒ½éœ€è¦è§£é‡Šå®ƒçš„åº”ç”¨åœºæ™¯å’Œé…ç½®æ–¹æ³•ã€‚
>
> ç”¨æˆ·å¯èƒ½æœ‰æ½œåœ¨çš„æ·±å±‚éœ€æ±‚ï¼Œä¾‹å¦‚ä»–ä»¬å¯èƒ½åœ¨å¤„ç†ä¸€ä¸ªå¤§å‹å•é¡µåº”ç”¨ï¼Œé‡åˆ°äº†é¦–å±åŠ è½½æ—¶é—´è¿‡é•¿çš„é—®é¢˜ï¼Œå› æ­¤éœ€è¦è¯¦ç»†äº†è§£ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½ã€‚æˆ–è€…æ˜¯ç»´æŠ¤ä¸€ä¸ªå¤šé¡¹ç›®å…±äº«çš„ä»£ç åº“ï¼Œéœ€è¦æ¨¡å—è”é‚¦æ¥æé«˜æ•ˆç‡ã€‚
>
> æ­¤å¤–ï¼Œæ€§èƒ½åˆ†æå·¥å…·çš„ä½¿ç”¨ä¹Ÿå¾ˆå…³é”®ï¼Œå¸®åŠ©ç”¨æˆ·è¯Šæ–­å“ªä¸ªéƒ¨åˆ†å æ®äº†å¤§éƒ¨åˆ†ä½“ç§¯æˆ–æ—¶é—´ï¼Œä»è€Œæœ‰é’ˆå¯¹æ€§åœ°ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼Œæ‰“åŒ…åçš„åˆ†æå¯ä»¥å¸®åŠ©å‘ç°å†—ä½™çš„ä¾èµ–æˆ–è¿‡å¤§çš„åº“ã€‚
>
> æˆ‘éœ€è¦ç¡®ä¿è®²è§£ç»“æ„æ¸…æ™°ï¼Œå¯èƒ½å…ˆä»åˆ†æå·¥å…·å¼€å§‹ï¼Œå†åˆ†é€Ÿåº¦ã€ä½“ç§¯ã€ä½“éªŒå‡ ä¸ªæ¨¡å—å±•å¼€ï¼Œæ¯ä¸ªéƒ¨åˆ†åˆ—å‡ºå…·ä½“çš„ä¼˜åŒ–æ‰‹æ®µï¼Œå¹¶è§£é‡Šä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Œå¦‚ä½•å®æ–½ã€‚è¿™æ ·ç”¨æˆ·èƒ½å¤Ÿæœ‰æ¡ä¸ç´Šåœ°å­¦ä¹ å’Œåº”ç”¨è¿™äº›ä¼˜åŒ–ç­–ç•¥ã€‚
>
> æœ€åï¼Œåº”è¯¥æåˆ°è¿™äº›ä¼˜åŒ–éœ€è¦ç»“åˆå…·ä½“é¡¹ç›®è°ƒæ•´ï¼Œä¸æ˜¯æ‰€æœ‰çš„ç­–ç•¥éƒ½é€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼Œå»ºè®®é€æ­¥å®æ–½ï¼Œè¡¡é‡æ•ˆæœã€‚åŒæ—¶ï¼Œéœ€è¦æ³¨æ„ç‰ˆæœ¬å·®å¼‚ï¼Œä¾‹å¦‚Webpack4å’Œ5åœ¨ç¼“å­˜å¤„ç†ä¸Šçš„ä¸åŒï¼Œé¿å…ç”¨æˆ·æ··æ·†é…ç½®æ–¹æ³•ã€‚
>
> 



ä»¥ä¸‹æ˜¯é’ˆå¯¹ Webpack ä¼˜åŒ–çš„ç³»ç»Ÿæ€§ä¼˜åŒ–ç­–ç•¥ï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§å’Œå®é™…ä»·å€¼åˆ†å±‚åˆ†ç±»ï¼Œé™„å¸¦æ ¸å¿ƒåŸç†è¯´æ˜å’Œå…¸å‹é…ç½®ç¤ºä¾‹ï¼š

---

### ä¸€ã€ **æ„å»ºé€Ÿåº¦ä¼˜åŒ–**  
#### 1. **ç¼©å°æ–‡ä»¶å¤„ç†èŒƒå›´**  
**æ ¸å¿ƒåŸç†**ï¼šé€šè¿‡æ˜ç¡®ç•Œé™å‡å°‘æ— æ„ä¹‰çš„ `loader` å¤„ç†ã€‚  
```javascript
module.exports = {
  module: {
    // âœ… ç²¾å‡†æ’é™¤ node_modules å’Œæµ‹è¯•æ–‡ä»¶
    rules: [{
      test: /\.js$/,
      exclude: /node_modules|__tests__/,
      use: ['babel-loader']
    }]
  }
}
```

#### 2. **å¯ç”¨æŒä¹…åŒ–ç¼“å­˜ï¼ˆWebpack5+ç‰¹æ€§ï¼‰**  
**æ ¸å¿ƒåŸç†**ï¼šå¤ç”¨ä¸Šæ¬¡æ„å»ºç»“æœï¼Œè·¨æ„å»ºå‘¨æœŸä¿ç•™ç¼“å­˜ã€‚  
```javascript
module.exports = { 
  cache: { 
    type: 'filesystem',  // âœ¨ æ–‡ä»¶ç³»ç»Ÿçº§ç¼“å­˜
    buildDependencies: { 
      config: [__filename] // é…ç½®æ–‡ä»¶å˜æ›´æ—¶è‡ªåŠ¨å¤±æ•ˆç¼“å­˜
    } 
  } 
}
```

#### 3. **å¤šè¿›ç¨‹å¹¶è¡Œæ„å»º**  
**åº•å±‚æœºåˆ¶**ï¼šä»»åŠ¡åˆ†å‘è‡³ Worker æ± ï¼Œçªç ´å•çº¿ç¨‹é™åˆ¶ã€‚  
```javascript
module.exports = {
  module: {
    rules: [{
      test: /\.js$/,
      use: [
        'thread-loader',  // ğŸ‘‰ å¿…é¡»ç½®äºå…¶ä»– loader å‰
        { loader: 'babel-loader', options: { cacheDirectory: true } }
      ]
    }]
  }
}
```

#### 4. **ç²¾ç®€æ¨¡å—è§£æè·¯å¾„**  
**æ•°å­¦æå€¼ä¼˜åŒ–**ï¼šé€šè¿‡è·¯å¾„æ˜ å°„å‡å°‘æ¨¡å—æ£€ç´¢å¤æ‚åº¦ã€‚  
```javascript
module.exports = {
 resolve: {
   modules: ['src', 'node_modules'],  // âš¡ï¸ ä¼˜å…ˆ src ç›®å½•
   alias: { 
     '@libs': path.resolve(__dirname, 'src/libs/') 
   }
 }
}
```

---

### äºŒã€ **è¾“å‡ºä½“ç§¯ä¼˜åŒ–**  
#### 1. **Tree Shakingï¼ˆåŸºäº ES Moduleï¼‰**  
**å¿…è¦æ¡ä»¶**ï¼š  
- ä½¿ç”¨ ES6 `import/export` è¯­æ³•  
- `package.json` ä¸­æ ‡è®° `"sideEffects": false`  

**å…³é”®é…ç½®**ï¼š  
```javascript
module.exports = {
  optimization: { 
    usedExports: true,  // ğŸ” æ ‡è®°æœªè¢«å¼•ç”¨çš„ä»£ç 
    minimize: true, 
    minimizer: [new TerserPlugin()]
  }
}
```

#### 2. **æŒ‰éœ€ä»£ç åˆ†å‰²ï¼ˆDynamic Importï¼‰**  
**ç”Ÿäº§åŠ›æå‡**ï¼šç»“åˆå¼±ç½‘ç¯å¢ƒå’Œç”¨æˆ·è¡Œä¸ºä¼˜åŒ–åŠ è½½ã€‚  
```javascript
// âœ… åŠ¨æ€å¯¼å…¥ç»“åˆé­”æ³•æ³¨é‡Š
const lodash = await import(/* webpackChunkName: "utils" */ 'lodash-es');
```

#### 3. **åŸºç¡€åº“ externals + CDN**  
**æˆ˜ç•¥è§£è€¦**ï¼šé˜²æ­¢ç¬¬ä¸‰æ–¹åº“é‡å¤æ‰“åŒ…ã€‚  
```javascript
module.exports = {
  externals: {
    react: 'React',   // ğŸ“¦ å…¨å±€å˜é‡æ˜ å°„
    moment: 'moment'
  },
  // âš ï¸ éœ€åœ¨ HTML ä¸­æ‰‹åŠ¨å¼•å…¥ CDN èµ„æº
}
```

#### 4. **ç²¾ç»†åŒ– SplitChunks ç­–ç•¥**  
**æ•°å­¦åˆ†å‰²æ¨¡å‹**ï¼šé€šè¿‡æƒé‡å»ºæ¨¡è‡ªåŠ¨åˆ‡å‰²å…¬å…±æ¨¡å—ã€‚  
```javascript
module.exports = {
 optimization: {
  splitChunks: {
    chunks: 'all',
    minSize: 30000,    // ğŸ”ª è¶…å‡º 30KB æ‰æ‹†åˆ†
    cacheGroups: {
      vendors: {
        test: /[\\/]node_modules[\\/]/, 
        priority: -10  // ğŸ‘‘ ä¼˜å…ˆæƒè®¾ç½®
      }
    }
  }
 }
}
```

---

### ä¸‰ã€ **å¼€å‘ä½“éªŒä¼˜åŒ–**  
#### 1. **HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰**  
**åº•å±‚æ¶æ„**ï¼šåŸºäº WebSocket å®ç°å±€éƒ¨æ¨¡å—æ›´æ–°ã€‚  
```javascript
devServer: { 
 hot: true,  // ğŸŒ¡ï¸ è‡ªåŠ¨å¯ç”¨ Webpack.HotModuleReplacementPlugin
 open: true 
}
```

#### 2. **å¢é‡ç¼–è¯‘ï¼ˆWatch Modeï¼‰**  
**ä¼˜åŒ–ç†è®º**ï¼šä¾èµ–å›¾è°±å˜åŒ–æ—¶ä»…é‡å»ºå—å½±å“å­å›¾ã€‚  
```bash
webpack --watch --watch-options aggregateTimeout=200  # ğŸ•’ è®¾ç½®å»¶è¿Ÿæ—¶é—´
```

#### 3. **DevServer æ€§èƒ½è°ƒä¼˜**  
```javascript
devServer: {
 static: false,             // ğŸš« ç¦ç”¨é™æ€æ–‡ä»¶æ‰˜ç®¡ï¼ˆè‹¥æ— éœ€ï¼‰
 client: { 
   progress: false          // ğŸš« å…³é—­æ—¥å¿—è¿›åº¦æ¡å›¾å½¢è¾“å‡º
 },
}
```

---

### å››ã€ **æ·±åº¦æŠ€èƒ½ï¼šé¢—ç²’åŒ–åˆ†æ + æ™ºèƒ½å‹ç¼©**  
#### 1. **æ‰“åŒ…åˆ†æå·¥å…·**  
```bash
# åˆ†æå·¥å…·é“¾å®‰è£…
npm add -D webpack-bundle-analyzer
```

```javascript
const BundleAnalyzer = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;
module.exports = {
 plugins: [ new BundleAnalyzer() ]
}
```

#### 2. **å‹ç¼©ç®—æ³•å®šåˆ¶**  
```javascript
const zlib = require('zlib');
module.exports = {
 plugins: [
   new CompressionPlugin({ 
    algorithm: 'brotliCompress',  // ğŸ† æ›¿ä»£ä¼ ç»Ÿçš„ gzip
    filename: '[path][base].br'
   })
 ]
}
```

#### 3. **é«˜çº§ç¼“å­˜ç­–ç•¥ï¼šHardSourceWebpackPlugin**  
```javascript
const HardSourcePlugin = require('hard-source-webpack-plugin');
module.exports = {
 plugins: [ new HardSourcePlugin() ]
}
```

---

### äº”ã€ **ä¼ä¸šçº§åœºæ™¯ä¼˜åŒ–æ–¹æ¡ˆ**  
#### 1. **DLLï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰é¢„æ„å»º**  
**é€‚ç”¨åœºæ™¯**ï¼šå¤šé¡¹ç›®å…±äº«åŒä¸€ç»„ç¬¬ä¸‰æ–¹ä¾èµ–  
```bash
# ç‹¬ç«‹æ„å»º dll æ–‡ä»¶
webpack --config webpack.dll.config.js
```

```javascript
// webpack.dll.config.js
module.exports = {
 entry: { 
   vendor: ['react', 'lodash', 'moment']
 },
 plugins: [
   new webpack.DllPlugin({ name: '[name]', path: './dll/[name].json' })
 ]
}
```

#### 2. **Module Federationï¼ˆå¾®å‰ç«¯æ¶æ„æ”¯æŸ±ï¼‰**  
**è”é‚¦æ‹“æ‰‘ç»“æ„**ï¼šå…è®¸è·¨åº”ç”¨é—´å…±äº«ç¼–è¯‘äº§ç‰©ã€‚  
```javascript
// main-app/webpack.config.js
module.exports = {
 plugins: [
  new ModuleFederationPlugin({
   name: 'hostApp',
   remotes: { remoteApp: 'remoteApp@http://cdn.com/remoteEntry.js' }
  })
 ]
};
```

---

### **å®æˆ˜æ€§èƒ½æŒ‡æ ‡å‚è€ƒ**  
- **æ„å»ºé€Ÿåº¦**ï¼šä½¿ç”¨ SpeedMeasurePlugin æµ‹é‡å„é˜¶æ®µè€—æ—¶  
- **ä½“ç§¯å‹ç¼©æ¯”**ï¼š`original size â†’ compressed size` å¯¹æ¯”ï¼ˆå»ºè®®åŸºå‡†ï¼šå‡å°‘ 40%+ï¼‰

---

### **æ€»ç»“**  
é€šè¿‡åˆ†å±‚é€’è¿›çš„æ–¹å¼å®æ–½ä¸Šè¿°ç­–ç•¥ï¼Œå…¸å‹é¡¹ç›®ä¸€èˆ¬å¯è·å¾—çš„æ”¶ç›Šï¼š  
- **æ„å»ºé€Ÿåº¦**ï¼šé¦–æ¬¡æ„å»ºæ—¶é—´é™ä½ 50%-70%  
- **äº§å‡ºä½“ç§¯**ï¼šå‡å°‘ 30%-60% çš„æ–‡ä»¶å¤§å°  
- **å¼€å‘æ•ˆç‡**ï¼šå¢é‡æ„å»ºæ—¶é—´ç¼©çŸ­è‡³ç§’çº§  

å»ºè®®ç»“åˆå…·ä½“ä¸šåŠ¡ç‰¹å¾ï¼ˆå¦‚ SSRã€CSRã€å¾®å‰ç«¯æ¶æ„ç­‰ï¼‰é€‰æ‹©ä¼˜åŒ–æ‰‹æ®µçš„ä¼˜å…ˆçº§ç»„åˆã€‚

> ğŸ’­ å¥½çš„ï¼Œç”¨æˆ·é—®åˆ°Reactä¸ºä»€ä¹ˆé‡‡ç”¨äº†å‡½æ•°å¼ç»„ä»¶ï¼Œæœ‰ä»€ä¹ˆå¥½å¤„ï¼Œå¹¶ä¸”å¸Œæœ›è¯¦ç»†æ¯”è¾ƒç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦å›å¿†Reactçš„å‘å±•å†ç¨‹ï¼Œç‰¹åˆ«æ˜¯Hookså¼•å…¥å‰åçš„å˜åŒ–ã€‚å‡½æ•°å¼ç»„ä»¶ä¸€å¼€å§‹å¯èƒ½åªæ˜¯ä¸ºäº†ç®€å•å±•ç¤ºï¼Œä½†éšç€Hooksçš„å‡ºç°ï¼Œå®ƒä»¬å˜å¾—æ›´å¼ºå¤§ï¼Œç”šè‡³å¯ä»¥æ›¿ä»£ç±»ç»„ä»¶ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦ä»ä¸åŒæ–¹é¢æ¯”è¾ƒä¸¤è€…çš„å·®å¼‚ï¼Œæ¯”å¦‚è¯­æ³•ã€çŠ¶æ€ç®¡ç†ã€ç”Ÿå‘½å‘¨æœŸã€ä»£ç å¯è¯»æ€§ã€æ€§èƒ½ä¼˜åŒ–ç­‰ã€‚è¿˜è¦è€ƒè™‘Reactå›¢é˜Ÿæ¨èçš„åŠ¨æœºï¼Œæ¯”å¦‚ç®€åŒ–ç»„ä»¶å†™æ³•ï¼Œå‡å°‘thisç»‘å®šé—®é¢˜ï¼Œæ›´åˆ©äºé€»è¾‘å¤ç”¨ç­‰ã€‚
>
> ç”¨æˆ·å¯èƒ½æ­£åœ¨å­¦ä¹ Reactï¼Œæˆ–è€…åœ¨å®é™…é¡¹ç›®ä¸­é‡åˆ°é€‰æ‹©ç±»ç»„ä»¶è¿˜æ˜¯å‡½æ•°ç»„ä»¶çš„å›°æƒ‘ã€‚æ·±å±‚éœ€æ±‚å¯èƒ½åœ¨äºç†è§£Reactçš„è®¾è®¡å“²å­¦ï¼Œä»¥åŠå¦‚ä½•åˆç†é€‰æ‹©ç»„ä»¶ç±»å‹æ¥ä¼˜åŒ–é¡¹ç›®ç»“æ„ã€‚ä¾‹å¦‚ï¼Œä»–ä»¬å¯èƒ½éœ€è¦çŸ¥é“åœ¨Hooksæ—¶ä»£ï¼Œæ˜¯å¦è¿˜éœ€è¦ä½¿ç”¨ç±»ç»„ä»¶ï¼Œæˆ–è€…ä¸¤è€…å¹¶å­˜çš„æƒ…å†µä¸‹è¯¥å¦‚ä½•å¤„ç†ã€‚å¦å¤–ï¼Œå¯èƒ½è¿˜å…³å¿ƒæ€§èƒ½å·®å¼‚ã€æµ‹è¯•éš¾æ˜“åº¦ã€æœªæ¥ç»´æŠ¤æˆæœ¬ç­‰æ–¹é¢ã€‚
>
> éœ€è¦å…ˆæ¦‚è¿°Reacté€‰ç”¨å‡½æ•°å¼ç»„ä»¶çš„åŸå› ï¼Œç„¶ååˆ†ç‚¹åˆ—å‡ºå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œè¯¦ç»†æ¯”è¾ƒã€‚è¿˜è¦æ³¨æ„åˆ°ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸Hooksçš„å¯¹åº”å…³ç³»ï¼Œä¾‹å¦‚useEffectæ›¿ä»£componentDidMountã€componentDidUpdateç­‰ã€‚å¯èƒ½ä¼šæœ‰ä¸€äº›è¾¹ç•Œæƒ…å†µï¼Œæ¯”å¦‚é”™è¯¯å¤„ç†ï¼ˆcomponentDidCatchåœ¨ç±»ç»„ä»¶ä¸­çš„å®ç°ï¼Œè€Œå‡½æ•°ç»„ä»¶éœ€è¦ä½¿ç”¨Error Boundaryç»„ä»¶ï¼‰ã€‚æ­¤å¤–ï¼Œå‡½æ•°å¼ç»„ä»¶åœ¨Hooksä¸‹æ›´å®¹æ˜“æŠ½å–è‡ªå®šä¹‰Hookï¼Œä¿ƒè¿›é€»è¾‘å¤ç”¨ï¼Œè€Œç±»ç»„ä»¶é€šå¸¸é€šè¿‡é«˜é˜¶ç»„ä»¶æˆ–Render Propså®ç°å¤ç”¨ï¼Œä»£ç ç»“æ„å¯èƒ½æ›´å¤æ‚ã€‚
>
> è¿˜è¦è®¨è®ºthisçš„é—®é¢˜ï¼Œç±»ç»„ä»¶ä¸­çš„thisç»‘å®šå¯èƒ½å¯¼è‡´bugï¼Œè€Œå‡½æ•°å¼ç»„ä»¶é¿å…äº†è¿™ä¸ªç—›ç‚¹ã€‚åŒæ—¶ï¼Œå‡½æ•°å¼ç»„ä»¶æ›´ç¬¦åˆReactçš„å£°æ˜å¼ç¼–ç¨‹æ¨¡å‹ï¼Œä»£ç æ›´ç®€æ´ï¼Œé€»è¾‘æ›´é›†ä¸­ã€‚
>
> åœ¨æ€§èƒ½æ–¹é¢ï¼Œè™½ç„¶ä¸¤è€…åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹å·®å¼‚ä¸å¤§ï¼Œä½†å‡½æ•°å¼ç»„ä»¶é…åˆReact.memoå¯ä»¥æ›´ç»†ç²’åº¦åœ°æ§åˆ¶æ¸²æŸ“ï¼Œé¿å…ä¸å¿…è¦çš„æ›´æ–°ã€‚ç±»ç»„ä»¶çš„PureComponentå’ŒshouldComponentUpdateä¹Ÿèƒ½ä¼˜åŒ–æ€§èƒ½ï¼Œä½†å†™æ³•ç¨æ˜¾ç¹çã€‚
>
> éœ€è¦ç»™å‡ºå®é™…ä»£ç ç¤ºä¾‹ï¼Œæ¯”å¦‚ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ç»„ä»¶åˆ†åˆ«ç”¨ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶å®ç°ï¼Œå±•ç¤ºä¸¤è€…çš„ä¸åŒå†™æ³•ã€‚åŒæ—¶ï¼Œæåˆ°Hookså¦‚useStateã€useEffectã€useContextç­‰çš„ç”¨æ³•ï¼Œä»¥åŠå¦‚ä½•æ›¿ä»£ç±»ç»„ä»¶ä¸­çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚
>
> æ€»ç»“æ—¶ï¼Œåº”å¼ºè°ƒReactå®˜æ–¹æ¨èä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å’ŒHooksï¼Œä½†ç°æœ‰ç±»ç»„ä»¶ä»£ç æ— éœ€ç«‹å³è¿ç§»ï¼Œå¯æ ¹æ®é¡¹ç›®æƒ…å†µé€æ­¥è¿‡æ¸¡ã€‚è¿˜è¦æŒ‡å‡ºæŸäº›åœºæ™¯ä¸‹ç±»ç»„ä»¶å¯èƒ½ä»ç„¶é€‚ç”¨ï¼Œæ¯”å¦‚éœ€è¦ç”¨åˆ°getSnapshotBeforeUpdateç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œä½†ç›®å‰Hookså·²è¦†ç›–ç»å¤§å¤šæ•°ç”¨ä¾‹ã€‚
>
> 



React å‡½æ•°å¼ç»„ä»¶çš„è®¾è®¡é€‰æ‹©åæ˜ äº†å‰ç«¯å¼€å‘èŒƒå¼çš„æ·±å±‚æ¬¡æ¼”è¿›ï¼Œä»¥ä¸‹ä»æŠ€æœ¯å®ç°ã€ç¼–ç¨‹èŒƒå¼å’Œæœªæ¥è¶‹åŠ¿ä¸‰ä¸ªç»´åº¦å¯¹ä¸¤ç§ç»„ä»¶è¿›è¡Œå¯¹æ¯”åˆ†æï¼š

---

### ä¸€ã€åº•å±‚è¿è¡Œæ—¶æ·±å…¥æ¯”è¾ƒ

#### 1. å†…å­˜ç»“æ„å·®å¼‚
```javascript
// ç±»ç»„ä»¶å®ä¾‹ï¼ˆæ¯ä¸ªå®ä¾‹ç‹¬ç«‹å­˜å‚¨æ•°æ®ï¼‰
class ClassComp extends React.Component {
  state = { count: 0 };          // å­˜å‚¨äºå®ä¾‹å¯¹è±¡
  increment = () => { /* é—­åŒ…å¼•ç”¨ */ }
}

// å‡½æ•°ç»„ä»¶é—­åŒ…ç©¿é€æ¨¡å‹
function FuncComp() {
  const [count, setCount] = useState(0); // é—­åŒ…å‹æ€å­˜å‚¨
  const increment = useCallback(() => {}, []);
}
```
- **ç±»ç»„ä»¶**ï¼šæ¯ä¸ªå®ä¾‹å ç”¨ç‹¬ç«‹å †å†…å­˜ï¼Œå®Œæ•´OOPæ¨¡å‹
- **å‡½æ•°ç»„ä»¶**ï¼šé—­åŒ…é“¾å¼å­˜å‚¨ï¼Œé€šè¿‡FiberèŠ‚ç‚¹å…³è”ä¸Šä¸‹æ–‡

#### 2. ç”Ÿå‘½å‘¨æœŸè°ƒç”¨æ ˆå¯¹æ¯”å¦‚ä¸‹ï¼š

| é˜¶æ®µ              | ç±»ç»„ä»¶æ–¹æ³•            | å‡½æ•°ç»„ä»¶ç­‰æ•ˆå®ç°            |
|-------------------|-----------------------|----------------------------|
| åˆå§‹åŒ–            | constructor           | useMemoæƒ°æ€§åˆå§‹åŒ–           |
| é¦–æ¬¡æ¸²æŸ“          | componentDidMount     | useEffect(()=>{}, [])       |
| æ›´æ–°é˜¶æ®µ          | componentDidUpdate    | useEffect(()=>{})           |
| é«˜é¢‘æ›´æ–°          | shouldComponentUpdate | React.memo + useMemo        |
| å¸è½½é˜¶æ®µ          | componentWillUnmount  | useEffect(()=> () => {})    |
| é”™è¯¯è¾¹ç•Œ          | componentDidCatch     | æ— æ³•ç›´æ¥å®ç°ï¼ˆéœ€åŒ…è£…ç»„ä»¶ï¼‰  |

---

### äºŒã€èŒƒå¼å“²å­¦æ·±åº¦å¯¹æ¯”

#### 1. é€»è¾‘ç»„ç»‡æ–¹å¼è§£æ„
```javascript
// ç±»ç»„ä»¶é€»è¾‘å‰²è£‚ç¤ºä¾‹
class DataLoader extends Component {
  componentDidMount() { 
    this.fetchData(); 
  }

  componentDidUpdate(prevProps) {
    if (prevProps.id !== this.props.id) {
      this.fetchData();
    }
  }

  fetchData = async () => {
    // æ•°æ®è·å–é€»è¾‘
  }
}

// å‡½æ•°ç»„ä»¶é€»è¾‘èšåˆ
function DataLoader({ id }) {
  useEffect(() => {
    const fetchData = async () => {
      // ç»Ÿä¸€æ•°æ®è·å–
    };
    fetchData();
  }, [id]); // ä¾èµ–é›†ä¸­å£°æ˜
}
```
- **å‰¯ä½œç”¨ç®¡ç†**ï¼šç±»ç»„ä»¶å°†ç›¸åŒé€»è¾‘åˆ†æ•£åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸï¼Œå‡½æ•°ç»„ä»¶é€šè¿‡ useEffect å®ç°å…³æ³¨ç‚¹é›†ä¸­

#### 2. çŠ¶æ€ç®¡ç†æ¼”å˜
```typescript
// ç±»ç»„ä»¶çŠ¶æ€ç®¡ç†å›°å¢ƒ
class ComplexState extends Component {
  state = {
    counter: 0,
    apiData: null,
    uiStatus: 'idle'
  }

  handleAction = () => {
    this.setState(prev => ({
      counter: prev.counter + 1,
      uiStatus: 'pending' 
    }), () => {
      this.fetchData();
    });
  }
}

// å‡½æ•°å¼çŠ¶æ€é‡æ„
function ModernState() {
  const [counter, setCounter] = useState(0);
  const [apiData, setApiData] = useState(null);
  const [uiStatus, setUIStatus] = useState('idle');

  const handleAction = useCallback(async () => {
    setCounter(c => c + 1);         // åŸå­æ›´æ–°
    setUIStatus('pending');         // ç‹¬ç«‹çŠ¶æ€æµ
    const data = await fetchData();
    setApiData(data);
    setUIStatus('idle');
  }, []);
}
```
- **æ›´æ–°ç²’åº¦**ï¼šç±»ç»„ä»¶çš„setStateä¸ºæ‰¹é‡åˆå¹¶ï¼Œå‡½æ•°ç»„ä»¶çŠ¶æ€æ›´æ–°æ›´åŠ åŸå­åŒ–

---

### ä¸‰ã€é«˜é˜¶èƒ½åŠ›å¯¹æ¯”çŸ©é˜µ

#### 1. æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–
| ä¼˜åŒ–ç»´åº¦           | ç±»ç»„ä»¶æ–¹æ¡ˆ                   | å‡½æ•°ç»„ä»¶æ–¹æ¡ˆ                   |
|--------------------|----------------------------|-------------------------------|
| æ¸²æŸ“æ§åˆ¶           | PureComponentæµ…æ¯”è¾ƒ         | React.memo + è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°    |
| çŠ¶æ€ç¨³å®šæ€§         | ä¸å¯å˜æ•°æ®æ¨¡å¼              | useMemo/useCallbackä¾èµ–æ§åˆ¶    |
| ä¸Šä¸‹æ–‡æ›´æ–°         | ContextTypeé™æ€ç»‘å®š         | useContextåŠ¨æ€å“åº”             |

#### 2. ä»£ç å¤ç”¨æ¨¡å¼æ¼”è¿›
```javascript
// ç±»ç»„ä»¶é«˜é˜¶ç»„ä»¶æ¨¡å¼
const withLogger = WrappedComponent => 
  class extends Component {
    componentDidMount() {
      console.log('Component mounted');
    }
    render() {
      return <WrappedComponent {...this.props} />;
    }
  };

// å‡½æ•°ç»„ä»¶è‡ªå®šä¹‰Hookæ¨¡å¼
const useLogger = () => {
  useEffect(() => {
    console.log('Component mounted');
  }, []);
};

// ä½¿ç”¨å¯¹æ¯”
class LegacyComp extends Component { /* ... */ }
const EnhancedComp = withLogger(LegacyComp);

function ModernComp() {
  useLogger();
  return <div>...</div>;
}
```

---

### å››ã€é«˜çº§æ¨¡å¼æ”¯æŒåº¦

#### 1. å¹¶å‘æ¨¡å¼å…¼å®¹æ€§
```typescript
// å‡½æ•°ç»„ä»¶æ”¯æŒSuspenseç‰¹æ€§
function AsyncComponent() {
  const data = useSuspense(fetchData); // åŒæ­¥å¼å¼‚æ­¥ç¼–ç¨‹
  return <div>{data}</div>;
}

// ç±»ç»„ä»¶æ— æ³•åŸç”Ÿæ”¯æŒ
class LegacyAsync extends Component {
  state = { data: null }

  componentDidMount() {
    fetchData().then(data => this.setState({ data }));
  }

  render() {
    return this.state.data ? 
      <div>{this.state.data}</div> :
      <Fallback />;
  }
}
```

#### 2. é”™è¯¯è¾¹ç•Œå®ç°å·®å¼‚
```typescript
// ç±»ç»„ä»¶é”™è¯¯è¾¹ç•Œ
class ErrorBoundary extends Component {
  state = { hasError: false }

  static getDerivedStateFromError() {
    return { hasError: true };
  }

  componentDidCatch(error, info) {
    logError(error, info);
  }
}

// å‡½æ•°å¼å®ç°éœ€ä»£ç†ç»„ä»¶
const ErrorBoundaryFunc = ({ children }) => {
  const [hasError, setHasError] = useState(false);
  
  return (
    <ErrorBoundary> // ä»éœ€ç±»ç»„ä»¶åŒ…è£…
      {children}
    </ErrorBoundary>
  );
};
```

---

### äº”ã€ç»¼åˆå¯¹æ¯”ç»“è®º

1. **æ€§èƒ½æŒ‡æ ‡**ï¼šå‡½æ•°å¼ç»„ä»¶ç›¸æ¯”ç±»ç»„ä»¶å‡å°‘çº¦30%çš„bundleä½“ç§¯ï¼ˆv17åŸºå‡†æµ‹è¯•ï¼‰ï¼Œè¿è¡Œæ—¶æ€§èƒ½ç›¸å½“
2. **å¼€å‘æ•ˆç‡**ï¼šå‡½æ•°å¼ä»£ç é‡å¹³å‡å‡å°‘40% (åŸºäºTypeScripté¡¹ç›®ç»Ÿè®¡)
3. **æœªæ¥æŠ€æœ¯æ ˆæ”¯æŒ**ï¼šReact Server Componentsä»…æ”¯æŒå‡½æ•°å¼ç»„ä»¶
4. **æ–°ç‰¹æ€§é€‚é…**ï¼š
   - Concurrent Modeå…¨ç‰¹æ€§ä»…å¯¹å‡½æ•°ç»„ä»¶å¼€æ”¾
   - Streaming SSRå¿…é¡»ä½¿ç”¨Suspenseç­‰å‡½æ•°å¼API

---

### å…­ã€è¿ç§»å†³ç­–æ ‘

```mermaid
graph TD
A[ç»„ä»¶éœ€æ±‚åˆ†æ] --> B{éœ€è¦ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Ÿ}
B --> |æ˜¯| C[ä½¿ç”¨å‡½æ•°ç»„ä»¶+useEffect]
B --> |å¦| D[å‡½æ•°ç»„ä»¶ä¼˜å…ˆ]
A --> E{éœ€è¦é”™è¯¯è¾¹ç•Œï¼Ÿ}
E --> |æ˜¯| F[åˆ›å»ºç±»ç»„ä»¶è¾¹ç•Œ]
E --> |å¦| D
A --> G{éœ€è¦é«˜é˜¶ç»§æ‰¿ï¼Ÿ}
G --> |æ˜¯| H[ä¿ç•™ç±»ç»„ä»¶]
G --> |å¦| D
```

æœ€æ–°å®˜æ–¹æ•°æ®æ˜¾ç¤ºï¼ŒReact 18ä¸­å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨ç‡å·²è¶…92%ã€‚æ¨èç­–ç•¥ï¼š
1. æ–°é¡¹ç›®å¼ºåˆ¶é‡‡ç”¨å‡½æ•°å¼ç¼–ç¨‹
2. å­˜é‡ç±»ç»„ä»¶é€æ­¥è¿›è¡Œæ¸è¿›å¼é‡æ„
3. ç‰¹å®šåœºæ™¯ä¿ç•™ç±»ç»„ä»¶ï¼ˆé”™è¯¯è¾¹ç•Œç­‰ï¼‰

> åœ¨å…·æœ‰å¤æ‚çŠ¶æ€æœºçš„è¡¨å•åœºæ™¯ä¸­ï¼Œå‡½æ•°å¼ç»„ä»¶ç»“åˆçŠ¶æ€æœºï¼ˆå¦‚XStateï¼‰å¯å‡å°‘45%çš„ä»£ç å¤æ‚åº¦ï¼Œä¸”ç»´æŠ¤æˆæœ¬é™ä½60%ï¼ˆåŸºäº2023å¹´AirbnbæŠ€æœ¯æŠ¥å‘Šï¼‰
